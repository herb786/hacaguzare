<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-72135203-5"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-72135203-5');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Fugaz+One' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700">
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <meta property="og:title" content="HACAGUSAE" />
    <meta property="og:url" content="https://hacagusae.appspot.com" />
    <meta property="og:type" content="article" />
    <link rel="stylesheet" type="text/css" href="css/main-theme/alasdair-blog.css">
    <link rel="stylesheet" type="text/css" href="css/main-theme/alasdair-content.css">
    <!--script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script-->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML'
        async></script>
    <link rel="stylesheet" type="text/css" href="css/hl-styles/darkula.css">
    <script type="text/javascript" src="highlight.pack.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!--script>hljs.initHighlightingOnLoad();</script!-->
    <!-- Styles -->
    <style>
        body {
            font-family: 'Lato';
        }

        .fa-btn {
            margin-right: 6px;
        }

        .up-arrow-img {
            position: fixed;
            bottom: 0;
            right: 0;
            margin-bottom: 10px;
            margin-right: 10px;
        }
    </style>
    <title>Hakaguzare's Site</title>
</head>

<body>
    <div id="navbar">
        <div class="toolbar" id="toolbar">
            <div class="item">
                <a href="./index.html">LOGBOOK</a>
            </div>
            <div class="item">
                <a href="./apps.html">APPS</a>
            </div>
            <div class="item">
                <a href="./resources.html">RESOURCES</a>
            </div>
            <div class="item">
                <a href="./about.html">ABOUT</a>
            </div>
            <div class="item">
                <a href="./search.html">SEARCH</a>
            </div>
            <div class="item">
                <a href="./index.html">🇺🇸EN</a>
            </div>
            <div class="item">
                <a href="./inicio.html">🇪🇸ES</a>
            </div>
        </div>
    </div>
    <div class="header" id="header" data-last-blog="0018">
        <div class="title" >Hakaguzare</div>
        <div class="owner"><span id="tagline"></span></div>
    </div>
    <div id="post-fragment">
        <div id='blog-scrollview'>
            <div class='blog-container'>
                <div class="blog-links">
                    <span id="left-page" class="blog-previous-link">
                        <h3><u><span id="previousUrl">Previous</span></u></h3>
                    </span>
                    <span id="right-page" class="blog-next-link">
                        <h3><u><span id="nextUrl">Next</span></u></h3>
                    </span>
                </div>
                <div class="blog-quote"><i><span id="cita"></span></i></div>
                <!-- INSERT ALL BLOGS -->
                <!-- blog 0018-->
<div class="blog" id="blog0018">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Knowing Your Followers with Firestore
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-10-25
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Information about our followers or costumers is important to improve the service
                or content we provide them.</p>
            <p>
                In the age of information we are not short in tools that can help us to collect this data.
                We can design surveys, quizzes, questionnaires, polls to capture the current mood and preferences
                of our target population.
            </p>
            <p>
                Collecting live information give us the opportunity to react immediately to future events
                and be in the top of innovation creating cutting edge solutions to any situation.
            </p>
            <p>
                This time I will focus in create a poll application using a real-time database hosted
                in the cloud to collect information about the mobile platform preferences of our friends.
                I will assume you know how to create a project in the firebase console.
            </p>
            <h3>
                <b>Setting Up the Project</b>
            </h3>
            <p>
                Before creating the application, I will need to generate a database where we store the votes
                from our poll. I will use a new service provide by google call <b>Firestore</b>. This is
                a real-time NoSQL database in the cloud.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-create-project.png' alt=''
                class="blog-image-md"><br />
            <p>
                After creating a project in the console we need to address to the left panel and find the item call
                <b>database</b>
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-find-database.png' alt=''
                class="blog-image-md"><br />
            <p>
                We will use the test mode such we can modify our database without any additonal configuration.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-database-rules.png' alt=''
                class="blog-image-md"><br />
            <p>
                Then we need to update the rules to allow public access, otherwise we must add support for
                authentication.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-update-rules.png' alt=''
                class="blog-image-md"><br />
            <p>
                We also need to create a configuration file for this service which will be stored in the app folder of
                the application.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-get-google-json.png' alt=''
                class="blog-image-md"><br />
            <h3>
                <b>Creating a NoSQL Database</b>
            </h3>
            <p>
                Now we will design our database. Our database is a collection of documents.
                The documents will enclosed any data we want to collect.
                In this case I want a collection of platforms.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-create-platform-collection.png' alt=''
                class="blog-image-md"><br />
            <p>
                We will add two documents for each platform.
                We change the auto generated key for the name of the platforms.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-create-ios-doc.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-db-platforms.png' alt=''
                class="blog-image-md"><br />
            <p>
                The previous documents might also be collections. For example a collection of devices using android or
                a collection of followers using android. We want to collect some information about people.
                Then we should add customer documents like the next one
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-add-android-customer.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-ios-customer.png' alt=''
                class="blog-image-md"><br />
            <p>
                The most important variable in our platform collection is the field <b>count</b>.
                This field will be updated anytime a vote has been registered.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-add-field-count.png' alt=''
                class="blog-image-md"><br />
            <h3>
                <b>Building a Polling App</b>
            </h3>
            <p>
                In our new project we will add two dependencies for firebase and firestore.
                We must not forget to add internet permissions in our manifest
                and check the file <b>google-services</b> is in the root folder for our app module.
            </p>
            <pre><code class="gradle">
            implementation 'com.google.firebase:firebase-core:16.0.4'
            implementation 'com.google.firebase:firebase-firestore:17.1.1'
            </code></pre>
            <p>
                After setting up our project, we can instantiate firestore to connect to the cloud and
                get a reference to our collection of platforms.
            </p>
            <pre><code class="kotlin">
            ...
            var mDatabase: FirebaseFirestore? = null
            var mPlatformsCollection: CollectionReference? = null
            ...
            mDatabase = FirebaseFirestore.getInstance()
            val settings = FirebaseFirestoreSettings.Builder()
                .setTimestampsInSnapshotsEnabled(true)
                .build()
            mDatabase!!.firestoreSettings = settings
            mPlatformsCollection = mDatabase?.collection("platforms")
            ...
            </code></pre>
            <h3>
                <b>Realtime Catch-Up</b>
            </h3>
            <p>
                We can read data from our database in real-time using the reference to the documents.
                After connecting to our document we can listen for changes in their content and
                trigger updates in our application. The code looks as follows
            </p>
            <pre><code class="kotlin">
            ...
            val androidRef = mPlatformsCollection?.document("Android")
            androidRef?.addSnapshotListener(object : EventListener&lt;DocumentSnapshot> {
                override fun onEvent(snapshot: DocumentSnapshot?, e : FirebaseFirestoreException?) {
                    if (e != null) {
                        Log.w(TAG, "Listen failed.", e)
                        return
                    }
                    if (snapshot != null && snapshot.exists()) {
                        Log.d(TAG, "Current data: " + snapshot.data!!)
                        androidVotes = snapshot.data!!["count"] as Long
                        showVotes()
                    } else {
                        Log.d(TAG, "Current data: null")
                    }
                }
            })
            ...
            </code></pre>
            <h3>
                <b>Casting a vote</b>
            </h3>
            <p>
                First we need to retrieve the document with their identification name in the database.
                In our case we use the name of the platform.
                Then we need to create a map of the field with the values we want to update.
                Then we can send the map to our database as follows
            </p>
            <pre><code class="kotlin">
            ...
            val vote = HashMap&lt;String, Any>()
            vote.put("count", platformVotes+1)
            mPlatformsCollection?.document(platformName)?.set(vote)?.
                addOnSuccessListener(object: OnSuccessListener&lt;Void> {
                    override fun onSuccess(aVoid : Void?) {
                        Log.d(TAG, "DocumentSnapshot successfully written!")
                    }
                })?.
                addOnFailureListener(object: OnFailureListener {
                    override fun onFailure(e : Exception) {
                        Log.w(TAG, "Error writing document", e)
                    }
                })
            ...
            </code></pre>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-poll-results.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-poll-app.png' alt=''
                class="blog-image-md"><br />
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://github.com/herb786/tutorial-firebase-database-poll">
                    Github repository for this tutorial.
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/NoSQL">
                    Wikipedia article on NoSQL databases.
                </a>
            </li>
            <li>
                <a href="https://firebase.google.com/docs/firestore/">
                    Guide for Cloud Firestore.
                </a>
            </li>
            <li>
                <a href="https://firebase.google.com/docs/database/">
                    Guide for Firebase Realtime Database.
                </a>
            </li>
            <li>
                <a href="https://codelabs.developers.google.com/codelabs/firebase-android/index.html">
                    A simple chat with firebase database.
                </a>
            </li>
            <li>
                <a href="https://codelabs.developers.google.com/codelabs/firebase-android/index.html">
                    A recommendation app with firestore.
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Firebase, Firestore, Realtime Database, NoSQL
    </div>
</div><!-- blog 0017-->
<div class="blog" id="blog0017">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Location Awareness
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-09-05
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                The continuous advances and integration of technologies as
                cellular communication, global positioning systems and internet gave birth to
                a new world of interconnections.
            </p>
            <p>
                We are now part of a great network
                where the information flows between different geolocated devices,
                not just smartphones but vehicles, appliances and sensors.
                This geoweb improves our decision-making capabilities in this infinite world of choices.
            </p>
            <p>
                In this tutorial, I will build an app to make an emergency call to a Lighthouse.
                Since I am lost in an unknown place and need to give a readable address
                I want to use the geolocation capabilities of my device to find such address.
                We might also find health facilities or fire stations in the village.
                I can get the location using my IP address or the Google Places API for reverse geocoding.
            </p>
            <h3>
                <b>
                    Setting Up Google Places SDK
                </b>
            </h3>
            <p>
                Once you have created a project for your app in the google cloud console,
                you can grant access to a wide variety of google APIs.
                In our case we will use the API for Google Places. This API provides details about
                any place like names, phone numbers, ratings. We can also find our current place,
                find their coordinates and more.
            </p>
            <p>
                After we have access to the API, we get an API key for our app.
                Sometimes you will need to set a SHA1 signature for your dev app.
                You can get that as follows.
            </p>
            <pre><code class="bash">
            keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android
            </code></pre>
            <p>
                We add this key to our manifest.
                You must also add permissions for use of internet and localization.
            </p>
            <pre><code class="xml">
            ...
            &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
            &lt;uses-permission android:name="android.permission.INTERNET"/>
            ...
            &lt;meta-data android:name="com.google.android.geo.API_KEY"
                     android:value="API_KEY"/>
            ...
            </code></pre>
            <p>
                Then we add the next dependency in the gradle file for the app
            </p>
            <pre><code class="java">
            implementation 'com.google.android.gms:play-services-places:15.0.1'
            </code></pre>
            <p>
                In the respective activity we must instantiate the client for the detection of places.
            </p>
            <pre><code class="java">
            private PlaceDetectionClient mPlaceDetectionClient;
            ...
            mPlaceDetectionClient = Places.getPlaceDetectionClient(this, null);
            ...
            </code></pre>
            <p>
                Then we can receive the result after implementing the next listener
            </p>
            <pre><code class="java">
            Task&lt;PlaceLikelihoodBufferResponse> placeResult = mPlaceDetectionClient.getCurrentPlace(null);
            placeResult.addOnCompleteListener(new OnCompleteListener&lt;PlaceLikelihoodBufferResponse>() {
                @Override
                public void onComplete(@NonNull Task&lt;PlaceLikelihoodBufferResponse> task) {
                    PlaceLikelihoodBufferResponse likelyPlaces = task.getResult();
                    PlaceLikelihood placeLikelihood = likelyPlaces.get(0);
                    Place place = placeLikelihood.getPlace();
                    Log.d("READABLE ADDRESS",place.getAddress());
                    likelyPlaces.release();
                }
            });
            </code></pre>
            <h3>
                <b>
                    Using IP Geolocation APIs
                </b>
            </h3>
            <p>
                Another way to know your location is using your public IP address.
                In this case you might need your country, state or city and sometimes your postcode.
                It might not serve the purpose of pinpoint your exact position
                in your neighbourhood but you can use this information to find any commerce, business,
                park or bank in your surroundings.
            </p>
            <p>
                After you found a suitable provider for this service,
                you can consume the service using any of the known libraries like <b>retrofit</b>.
                In this example I will use the <b>IP Geolocation API</b>.
                You should remember that any free service have a limited quota of requests.
            </p>
            <p>
                First you need to update the gradle script for your app with the next dependency
            </p>
            <pre><code class="java">
            implementation 'io.ipgeolocation:ipgeolocation:1.0.2'
            </code></pre>
            <p>
                Then you can make use of the library as follows
            </p>
            <pre><code class="java">
            public class IPGeolocationAsyncTask extends AsyncTask&lt;Void, Void,Void> {
            
                GeolocationResult geolocationResult;
            
                @Override
                protected Geolocation doInBackground(Void... voids) {
                    IPGeolocationAPI api = new IPGeolocationAPI("API_KEY");
                    Geolocation geolocation = api.getGeolocation();
            
                    if(geolocation.getStatus() == 200) {
                        Log.i(getClass().getCanonicalName(),geolocation.getCity());
                    } else {
                        Log.i(getClass().getCanonicalName(),geolocation.getMessage());
                    }
                    return geolocation;
                }
            
            }
            </code></pre>
            <p>
                Now you have some pieces of code you might use in your application
                to find your current position and address and
                look for relevant information about your surroundings.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-09-11.png' alt=''
                class="blog-image-md"><br />
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://github.com/herb786/tutorial-android-geocoding">
                    https://github.com/herb786/tutorial-android-geocoding
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/places/android-sdk/current-place">
                    https://developers.google.com/places/android-sdk/current-place
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/training/location/">
                    https://developer.android.com/training/location/
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/maps/documentation/geocoding/start">
                    https://developers.google.com/maps/documentation/geocoding/start
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/reference/android/location/Geocoder">
                    https://developer.android.com/reference/android/location/Geocoder
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/android/guides/setup">
                    https://developers.google.com/android/guides/setup
                </a>
            </li>
            <li>
                <a href="https://ipstack.com">
                    https://ipstack.com
                </a>
            </li>
            <li>
                <a href="http://ip-api.com">
                    http://ip-api.com
                </a>
            </li>
            <li>
                <a href="https://ipgeolocation.io">
                    https://ipgeolocation.io
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/Reverse_geocoding">
                    https://en.wikipedia.org/wiki/Reverse_geocoding
                </a>
            </li>
            <li>
                D Abernathy. "Chapter: The Power of Where". <i>Using Geodata and Geolocation in the Social Sciences.</i>
            </li>
            <li>
                JL Awange, JBK Kiema. "Chapter: Geodata and Geoinformatics". <i>Environmental Geoinformatics.</i>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Geolocation, Geocoder, IP location, Google Places SDK
    </div>
</div><!-- blog 0016-->
<div class="blog" id="blog0016">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Beacons and the Nearby Message API
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-08-15
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/bluetooth.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                The last time we learn how to recognize bluetooth devices as beacons or eddystones and
                we know how far we are from them. This can help you to probe your environment and
                get very insightful data.
            </p>
            <p>
                Besides we can also provide some clues and information in real time
                attached to beacons in well established location.
            </p>
            <p>
                The Beacon Proximity API will be used for this purpose.
                We can attached some headlines or messages to our beacons.
                These beacons are identified by their proximity UUID.
                Since these messages are in the cloud we can edit any time
                and we can doctor our messages according to the season.
                Therefore we might not need to flash or configure the beacons to include new data
                but we just need to change the attachments using the Beacon Proximity API.
            </p>
            <p>
                Once we added attachments to our beacons we want to fetch them in our Android App.
                We can use the Nearby Messages API for the purpose.
                We might also use the Beacon Proximity API.
            </p>
            <h3>
                <b>
                    Getting started with the Beacon Proximity API
                </b>
            </h3>
            <p>
                I will show you how to add attachments to your beacons using the Beacon Proximity API.
                I am assuming you already have OAuth credentials to use the google APIs
                and you know how to generate an authorization token.
            </p>
            <p>
                First of all, you will need to create an identification for your beacon.
                You will need the proximity UUID, the major and the minor.
                As you know the minor is used to get a more precise location of a beacon.
                For example the minor of a beacon will tell you in which bed in a ward of an hospital you are.
                The major will be less precise. For example the major of a beacon will only tell you
                that you are in the ward of the hospital.
            </p>
            <p>
                The id of the beacon is the result of joining the proximity uuid,
                the major and the minor and encoding the result in base64.
                The next command will help you with this task.
                Here <b>$hexuid</b> is the concatenation of the proximity uuid, the major and the minor.
            </p>
            <pre><code class="bash">
            echo -ne $hexuid | xxd -r -p | base64
            </code></pre>
            <p>
                Then you can register your beacon with the Beacon Proximity API.
                The next request with <b>curl</b> will do the job.
            </p>
            <pre><code class="bash">
            curl -d '{"advertisedId":{"type":"IBEACON","id":"'$uid'"},"status":"ACTIVE","placeId":"ChIJTxax6NoSkFQRWPvFXI1LypQ","latLng":{"latitude":"47.6693771","longitude":"-122.1966037"},"indoorLevel":{"name":"1"},"expectedStability":"STABLE","description":"Farm beacon.","properties":{"position":"entryway"}}' -H 'Content-Type: application/json' -H "Authorization: Bearer $token" https://proximitybeacon.googleapis.com/v1beta1/beacons:register
            </code></pre>
            <p>
                Here <b>$uid</b> is the previous id we have just generated
                and <b>$token</b> is the access token for the google APIs.
            </p>
            <h3>
                <b>
                    Linking a message with a proximity UUID
                </b>
            </h3>
            <p>
                Once we have registered a beacon we can link messages known as attachments.
                The attachment might be added using the dashboard for beacons
                or doing the respective request to the Google Proximity API.
            </p>
            <p>
                For the request you will need namespace of your project,
                the beacon name which you got after registration and the message encoded in base64.
                The request with <b>curl</b> is done as follows
            </p>
            <pre><code class="bash">
            curl -d '{"namespacedType":"'$namespaceName'/string","data":"UmlwZSBqdWljeSBwbHVtcw=="}' -H "Authorization: Bearer $token" -H 'Content-Type: application/json' https://proximitybeacon.googleapis.com/v1beta1/$beaconName/attachments?key=$apikey
            </code></pre>
            <p>
                The data that I have encoded in base64 is <i>"Ripe juicy plums"</i>.
                You can do it as follows
            </p>
            <p>
                echo -n "Ripe juicy plums" | base64
            </p>
            <b>
                Now you can get the messages with the Nearby Messages API.
            </b>
            <h3>
                <b>
                    Fetching attachments for beacons in an Android App
                </b>
            </h3>
            <p>
                I am going to create an app to get information about my farm.
                My farm grows different variety of fruits as grapes, plums and apples.
                I have a beacon for each plot in my farm.
                Each plot only have one kind of fruit.
                Since I am in the harvest season for plums I want to show a message saying
                that we have ripe juicy plums.
            </p>
            <p>
                We have already attached a message for the beacon in the plot for plums.
                Then we can use the nearby message API to get the message.
                You must create an authorization key to access this API in android devices.
            </p>
            <p>
                Once you have the authorization key,
                you can add Nearby Message module to your android project.
                In the gradle build you need to insert in your dependencies
            </p>
            <pre><code class="java">
                implementation 'com.google.android.gms:play-services-nearby:15.0.1'
            </code></pre>
            <p>
                You also need to modify your manifest
            </p>
            <pre><code class="xml">
            ...
            &lt;uses-permission android:name="android.permission.BLUETOOTH" />
            &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
            &lt;uses-permission android:name="android.permission.INTERNET" />
            ...
            &lt;uses-feature
                    android:name="android.hardware.bluetooth_le"
                    android:required="false" />
            ...
            &lt;application>
                &lt;meta-data
                        android:name="com.google.android.nearby.messages.API_KEY"
                        android:value="your_authorization_key" />
            &lt;/application>
            ...
            </code></pre>
            <p>
                The activity can subscribe to the nearby message API as follows
            </p>
            <pre><code class="java">
            ...
            public final String IBEACON = "fda50693-a4e2-4fb1-afcf-c6eb07647825";
            ...
            MessageListener mMessageListener = new MessageListener() {
                @Override
                public void onFound(Message message) {
                    Log.println(Log.ASSERT, TAG, "Message found: " + message);
                    imgNotification.setImageResource(R.drawable.plums1);
                    if (!message.getNamespace().equals(NAMESPACE)){
                        new ProximityAsyncTask().execute();
                    } else{
                        txtNotification.setText(new String(message.getContent()));
                    }
                }
            
                @Override
                public void onLost(Message message) {
                    Log.println(Log.ASSERT, TAG, "Lost sight of message.");
                    imgNotification.setImageResource(R.drawable.farm);
                    txtNotification.setText("Welcome to my Farm! ");
                }
            
            };
            ...
            @Override
            public void onStart() {
                super.onStart();
                MessageFilter messageFilter = new MessageFilter.Builder()
                        .includeIBeaconIds(UUID.fromString(IBEACON), null, null)
                        .includeAllMyTypes()
                        .build();
                SubscribeOptions options = new SubscribeOptions.Builder()
                        .setStrategy(Strategy.DEFAULT)
                        .setFilter(messageFilter)
                        .build();
                Nearby.getMessagesClient(this).subscribe(mMessageListener, options);
            }
            ...
            @Override
            public void onStop() {
                Nearby.getMessagesClient(this).unsubscribe(mMessageListener);
                super.onStop();
            }
            ...
            </code></pre>
            <p>
                Now we receive a message anytime we approach to the parcel of plums.
            </p>
            <p>
                We can also make a request to the beacon proximity api to get this message.
                You can use this curl request to get the message
            </p>
            <pre><code class="bash">
            curl -d '{"observations":[{"advertisedId":{"type":"IBEACON","id":"your_base64_beacon_id"}}],"namespacedTypes":["your_namespace/data_type"]}' -H 'Content-Type: application/json'
                https://proximitybeacon.googleapis.com/v1beta1/beaconinfo:getforobserved?key=your_authorization_key
            </code></pre>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-08-25.gif" type="image/gif">

            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://developers.google.com/beacons/proximity/guides">
                    https://developers.google.com/beacons/proximity/guides
                </a>
            </li>
            <li>
                <a
                    href="https://developers.google.com/beacons/proximity/reference/rest/v1beta1/beacons.attachments/list">
                    https://developers.google.com/beacons/proximity/reference/rest/v1beta1/beacons.attachments/list
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/beacons/dashboard/">
                    https://developers.google.com/beacons/dashboard/
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/nearby/messages/android/get-started">
                    https://developers.google.com/nearby/messages/android/get-started
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/IBeacon">
                    https://en.wikipedia.org/wiki/IBeacon
                </a>
            </li>
            <li>
                <a href="https://github.com/google/eddystone/tree/master/eddystone-uid">
                    https://github.com/google/eddystone/tree/master/eddystone-uid
                </a>
            </li>
            <li>
                <a href="https://github.com/herb786/tutorial-beacon-farm-message">
                    Source code for the tutorial
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, BLE, Beacons, Eddystone, Nearby Messages API, Proximity Beacon API
    </div>
</div><!-- blog 0015-->
<div class="blog" id="blog0015">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                A Case Study in BLE: Indoor Proximity with Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-07-13
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/bluetooth.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                It might happen to you that you want to know about a location, their surroundings
                and have some glimpse of the activities developing around you.
                In the past you should have carried out books, maps, and brochures.
                In this new century you just have to own a mobile handset
                and you will discover a new world around you.
            </p>
            <p>
                Bluetooth is a technology which have been developing during the past decades
                to improve the connectivity and provide new ways to sense our environment.
                Regarding location, bluetooth appliances emits microwaves with a frequency of 2.4 GHz
                that can go through many solid materials like walls, doors (maybe not metal doors), windows, trees
                and reach you mobile device to indicate their existence.
                Hence you can know your position relative to those appliances.
                You can also know your absolute position with GPS but
                they will only work outdoors since radio waves with
                a frequency around of 1 GHz are to weak to come indoors.
            </p>
            <p>
                The easiest way to build this kind of arrangement is using beacons.
                Beacons have an unique identifier which can be used to determine
                the location in the arrangement of beacons spread over any place.
                You can also know how far are you from any beacon with the intensity of the signal.
                It is something like the game of Hunt the Thimble where
                you are closer when it is hotter and you are farther when it is colder.
            </p>
            <p>
                Following this line of thought we can imagine a museum or exposition where
                you can find instantly information about a portrait, sculpture or any piece of art.
                You might be in a big theater or arena and find your place with help of your mobile phone.
                You can also be in a forest and identify any flower or tree in that location.
                The most known application of beacons is their use in stores
                to gather information about the behaviour of costumers and offer better deals.
            </p>
            <p>
                In this post I will build a simple app to detect dangerous boxes or equipment in a lab.
                I will assume for our purpose that there is a beacon attached to such equipment.
                So we just need to detect the signal of the beacon and read their intensity.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/ble-hazard01.jpg" type="image/jpg">
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/ble-hazard02.jpg" type="image/jpg">
            <p>
                I will use a common cheap beacon based on Nordic NRF51822 using a 3V coin cell battery CR2032.
                This is a bluetooth module working at low energy and the battery can last for at least one year.
                We consider this beacon as a BLE module since their current is in the range of the microamperes.
                The intensity of the signal used to vanish beyond 60 meters.
                More information about the beacon might be found in their user manual.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/ble-beacon.jpg" type="image/jpg">
            <h3>
                <b>
                    Setting up the project
                </b>
            </h3>
            <p>
                First of all, you need to grant location and bluetooth permissions to your app.
                Bluetooth low energy will work with Android 4.3 and later versions.
            </p>
            <pre><code class="xml">
            &lt;uses-permission android:name="android.permission.BLUETOOTH" />
            &lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
            &lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
            </code></pre>
            <p>
                In the case of devices with Android Marshmallow and above,
                we need to request permission at runtime. Once we got the permissions
                we can listen to bluetooth devices.
                We might create a service to handle this task.
                In order to detect any bluetooth device we must use the class <b>BluetoothAdapter</b>.
                To get an instance of the <b>BluetoothAdapter</b> we need to invoke the <b>BluetoothManager</b>.
            </p>
            <pre><code class="java">
            BluetoothManager bluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
            mBluetoothAdapter = bluetoothManager.getAdapter();
            </code></pre>
            <p>
                Once we reach the bluetooth manager we can use the <b>BluetoothAdapter</b> to
                detect bluetooth devices. We have two ways to detect devices, the first one use
                a deprecated interface known as <b>LeScanCallback</b> and the second one
                for Lollipop and above use the interface <b>ScanCallback</b>. Both interface will receive
                a response with information about the devices nearby.
            </p>
            <p>
                Let us take a look to the class <b>LeScanCallback</b>.
                After starting the scan we receive the name of the device, their MAC address,
                the proximity en decibels and additional information provided by the manufacturer.
            </p>
            <pre><code class="java">
            mBluetoothAdapter.startLeScan(myLeScanCallback);
            ...
            BluetoothAdapter.LeScanCallback myLeScanCallback = new BluetoothAdapter.LeScanCallback() {
                @Override
                public void onLeScan(BluetoothDevice device, int rssi, byte[] scanRecord) {
                    // Device with name and MAC address
                    // RSSI is the proximity
                    // scanRecord for extra information.
                }
            };
            </code></pre>
            <p>
                For the second case we receive an instance of <b>ScanResult</b> with
                information about the device, the proximity and some extra payload.
            </p>
            <pre><code class="java">
            bluetoothLeScanner.startScan(myScanCallback);
            ...
            ScanCallback myScanCallback = new ScanCallback() {
                @Override
                public void onScanResult(int callbackType, ScanResult result) {
                    super.onScanResult(callbackType, result);
                    int rssi = result.getRssi();
                    BluetoothDevice device = result.getDevice();
                    ScanRecord scanRecord = result.getScanRecord();
                }
            
                @Override
                public void onBatchScanResults(List&lt;ScanResult> results) {
                    super.onBatchScanResults(results);
                }
            
                @Override
                public void onScanFailed(int errorCode) {
                    super.onScanFailed(errorCode);
                }
            };
            </code></pre>
            <h3>
                <b>
                    Reading intensity signal
                </b>
            </h3>
            <p>
                Since this app needs to show information regarding how near any visitor is from our lab,
                we will use the <b>RSSI</b> value. The farther we are from the lab the more negative the value becomes.
                Hence the app will have some code as follows
            </p>
            <pre><code class="java">
            if (rssi > -40){
                Log.d("MyApp","Your life is in danger!");
            } else if (rssi > -70) {
                Log.d("MyApp","Too close!");
            } else {
                Log.d("MyApp","Please stay away!!!");
            }
            </code></pre>
            <h3>
                <b>
                    GATT Services
                </b>
            </h3>
            <p>
                Some bluetooth devices offers real time information about power, proximity,
                hearth rate, speed, temperature, pressure, humidity. You can get this information
                connecting to the GATT service of the devices. Each GATT service have assigned an UUID identifier.
                UUID identifiers are like IP addresses which we might use to connect to the server supplying
                a well defined information about the device.
            </p>
            <pre><code class="java">
            BluetoothGatt mBluetoothGatt = device.connectGatt(this, true, new MyBluetoothGattCallback());
            private class MyBluetoothGattCallback extends BluetoothGattCallback {
                @Override
                public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {
                    if (newState == BluetoothProfile.STATE_CONNECTED) {
                        mBluetoothGatt.discoverServices();
                    }
                }
            
                @Override
                public void onServicesDiscovered(BluetoothGatt gatt, int status) {
                    BluetoothGattService mBluetoothGattService = mBluetoothGatt.getService(mUUID);
                    UUID mUUID = UUID.fromString("12341804-494c-4f47-4943-544543480000");
                    BluetoothGattCharacteristic mBluetoothGattCharacteristic = mBluetoothGattService.getCharacteristic(mUUID);
                    mBluetoothGatt.readCharacteristic(mBluetoothGattCharacteristic);
                }
            
            }
            </code></pre>
            <p>
                We can also send bluetooth payload using advertisement.
            </p>
            <pre><code class="java">
            BluetoothLeAdvertiser advertiser = mBluetoothAdapter.getBluetoothLeAdvertiser();
            AdvertiseSettings settings = new AdvertiseSettings.Builder()
                    .setAdvertiseMode(AdvertiseSettings.ADVERTISE_MODE_LOW_POWER)
                    .setTimeout(0)
                    .build();
            AdvertiseData advertiseData = new AdvertiseData.Builder()
                    .addServiceUuid(Service_UUID)
                    .setIncludeDeviceName(true)
                    .build();
            advertiser.startAdvertising(settings, advertiseData, bleAdvertiserCallback);
            </code></pre>
            <p>
                Extra information might include some unique identifier for the proximity.
                We can use this UUID to bind notifications and message providing a customized services
                to your users. We will deal with proximity UUIDs in the next post.
                For the time being we stop here.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-07-21.gif" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://developer.android.com/guide/topics/connectivity/bluetooth-le">
                    https://developer.android.com/guide/topics/connectivity/bluetooth-le
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/guide/topics/connectivity/bluetooth">
                    https://developer.android.com/guide/topics/connectivity/bluetooth
                </a>
            </li>
            <li>
                <a href="https://meetingofideas.files.wordpress.com/2013/12/ibeacons-bible-1-0.pdf">
                    https://meetingofideas.files.wordpress.com/2013/12/ibeacons-bible-1-0.pdf
                </a>
            </li>
            <li>
                <a href="https://github.com/herb786/tutorial-beacon-hazard-sign">
                    https://github.com/herb786/tutorial-beacon-hazard-sign
                </a>
            </li>
            <li>
                <a href="https://blog.bluetooth.com/proximity-and-rssi">
                    https://blog.bluetooth.com/proximity-and-rssi
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/Received_signal_strength_indication">
                    https://en.wikipedia.org/wiki/Received_signal_strength_indication
                </a>
            </li>
            <li>
                <a href="https://www.bluetooth.com/specifications/bluetooth-core-specification">
                    Bluetooth® Core Specification
                </a>
            </li>
            <li>
                <a
                    href="http://dev.ti.com/tirex/content/simplelink_cc2640r2_sdk_1_40_00_45/docs/blestack/ble_user_guide/html/ble-stack-3.x-guide/index.html">
                    BLE-Stack User’s Guide
                </a>
            </li>
            <li>
                <a
                    href="https://devzone.nordicsemi.com/cfs-file/__key/communityserver-discussions-components-files/4/5807.NRF51822_2D00_Beacon.pdf">
                    Manual Técnico del Módulo NRF51822
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Bluetooth Low Energy, Beacons, Eddystone
    </div>
</div><!-- blog 0014-->
<div class="blog" id="blog0014">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Fancy Typefaces from Google Fonts
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-07-07
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                The common typeface in many applications is <b>Roboto</b>.
                This sans serif typeface can sometimes be a little boring and
                unsuitable for the content the our app is carrying out.
                We might want to use font from <i>Google Fonts</i> or <i>Typekit</i>.
            </p>
            <p>
                We can change the typeface using different tools that the android framework offers.
                You can even imitate the loading process of typeface in web sites.
                You not longer need to add font resources to your app and then your binary becomes bigger.
                The app might actually download the fonts after
                launching as websites do to load javascript with <b>cdnjs</b>.
            </p>

            <h3>
                <b>
                    Loading Google Fonts
                </b>
            </h3>
            <p>
                There are two ways to change the default font for our application.
                The first one is using the IDE and the second one is programatically.
            </p>
            <p>
                When using the IDE we need to access the design mode of our template
                and choose the component that we want to modify.
                Then we must unfold the <b>Attributes</b> panel on the right side of the IDE.
                We choose the attribute <b>fontFamily</b> and unfold the options.
                Finally we choose the option <b>More fonts...</b>.
                You can choose any font from the google catalogue.
            </p>
            <p>
                You will find a new folder <b>fonts</b> was created inside the resources folder.
                You can also find a new file <b>font_certs.xml</b> inside the values folder.
                This file will be used to get the certificates for the font provider, that is, google fonts.
            </p>
            <p>
                We can also add google fonts with code.
                We can do like in the following snippet where we use the font <i>Wendy One</i>.
            </p>
            <pre>
            <code class=”java”>
            TextView helloWorld = findViewById(R.id.helloWorld);
            String wendyOne400 = "name=Wendy One&weight=400";
            String providerAuthority = "com.google.android.gms.fonts";
            String providerPackage = "com.google.android.gms";
            int certificates = R.array.com_google_android_gms_fonts_certs;
            FontRequest request1 = new FontRequest(providerAuthority, providerPackage, wendyOne400, certificates);
            FontsContractCompat.FontRequestCallback callback1 = new FontsContractCompat.FontRequestCallback() {
                @Override
                public void onTypefaceRetrieved(Typeface typeface) {
                    helloWorld.setTypeface(typeface);
                }
            };
            FontsContractCompat.requestFont(this, request1, callback1, new Handler());
            
            </code>
            </pre>
            <p>
                In this code we just need to change the query
                as described in the guide for the Google Fonts API.
                The certificated ids had been generated in the file <b>font_certs.xml</b>.
            <p>

            <h3>
                <b>
                    Styling the text content
                </b>
            </h3>
            <p>
                We often want to change the style of the text component
                or add some decorative element like a bullet.
                We do not need to create any cumbersome nested layout to achieve this design.
            </p>
            <p>
                Subclasses of <b>CharacterStyle</b> will serve you right for this sort of task.
                So you can add a foreground color, change the background color,
                modify the size of the text and many other styles.
            </p>
            <p>
                For instance we might want to change the color of some letters in the text.
                The next listing will do the job
            </p>
            <pre>
            <code class=”java”>
            TextView exclusiveExclusive= findViewById(R.id.exclusiveExclusive);
            String example = "0123456789";
            SpannableStringBuilder builder = new SpannableStringBuilder(example);
            builder.setSpan(new StyleSpan(Typeface.BOLD), 0, 5, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
            exclusiveExclusive.setText(builder);
            </code>
            </pre>

            <p>
                You may notice the flag <b>Spanned.SPAN_EXCLUSIVE_EXCLUSIVE</b>.
                This flag will be used when you insert new characters.
                This particular flag will not apply the style
                if we insert characters at the start
                and the end of the limits defined by the span.
            </p>

            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/typefaces.png" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href=”https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts”>
                    https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts
                </a>
            </li>
            <li>
                <a href=”https://developers.google.com/fonts/docs/android”>
                    https://developers.google.com/fonts/docs/android
                </a>
            </li>
            <li>
                <a href=”https://developer.android.com/reference/android/text/style/CharacterStyle”>
                    https://developer.android.com/reference/android/text/style/CharacterStyle
                </a>
            </li>
            <li>
                <a href=”https://fonts.google.com/”>
                    https://fonts.google.com/
                </a>
            </li>
            <li>
                <a href=”https://en.wikipedia.org/wiki/Roboto”>
                    https://en.wikipedia.org/wiki/Roboto
                </a>
            </li>
            <li>
                <a href=”https://github.com/herb786/tutorial-typefaces”>
                    Source code for this tutorial
                </a>
            </li>
            <li>
                <a
                    href=”https://www.adobe.io/apis/creativecloud/creativesdk/docs/androidsdk/adobe-creative-sdk-for-android_master/typekit.html”>
                    Adobe Typekit for android
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Typefaces, UX Design
    </div>
</div><!-- blog 0013-->
<div class="blog" id="blog0013">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Mastering Navigation with the Application Backstack
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-07-04
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Keeping track of the navigation through different views in many android applications
                sometimes becomes a cumbersome task.
                We rather prefer a linear navigation following a tree structure in the application.
            </p>
            <p>
                A comprehensive map of the navigation for an application might be more involved.
                We can imagine the views as the parts of a tree.
                The home view might be the stem of the tree.
                The branches can be regarded as the views for each menu in the application.
                Underbranches from the main branches might be the linear sequence of views for each menu.
            </p>
            <p>
                Users usually want to hop between views more than one step above their current view in the tree.
                Other users prefer to change to a totally unrelated menu of the application.
                That means we need to keep track of any view of the application
                so we can offer a friendly way of browsing through the app
                besides we can improve the performance
                if we properly address the resources consumed for each view.
            </p>

            <h3>
                <b>
                    Stacking Activities
                </b>
            </h3>
            <p>
                The standard way to navigate through different views in an application is using activities.
                Each activity will be an independent screen.
                The user follows a linear navigation.
                The activities are stacked and they will be part of the navigation history.
                You can return to any previous screen using the back button and the event <b>onBackPressed</b>.
                The back button will follow the history of the navigation trail unless we change their logic.
                This task is very cumbersome if
                we want to use a hierarchical navigation and
                sometimes is better to use a different approach.
            </p>

            <h3>
                <b>
                    Stacking Fragments
                </b>
            </h3>
            <p>
                Fragments are helpful components to organize the screens and
                views of the application.
                We can use fragments to build a sequence of screens where
                each screen might be a step for a task.
                Hence activities will contain each task in the application.
                In that way fragments will have as a common parent the activity in which they are hosted.
            </p>
            <p>
                The power of fragments will be demonstrated with a simple application.
                This application deals with the catalogue of a bookshop.
                I have the main category <i>History</i>, the subcategory <i>Ancient Civilizations</i> and
                books about <i>Egypt</i> and <i>Sumer</i>.
                We will map this structure to single screens.
                Such screens will be the fragments in the application.
            </p>
            <p>
                The fragments are stacked in the <b>FragmentManager</b> of the main activity.
                The component <b>FrameLayout</b> will allocate space in the screen
                to place the content of the fragment.
                This space might cover the whole screen or just a region of the screen.
                I will assign an id to each frame layout so
                we can identify the fragment in the back stack.
                We can also identify the fragments with tags.
                All this decisions will help to implement a better navigation.
            </p>

            <h3>
                <b>
                    Fragments can have children
                </b>
            </h3>
            <p>
                We can improve our navigation if we nest fragment in other fragments.
                We could keep all the fragments in the fragment manager of the activity
                when the fragments follow a linear sequence without bifurcations
                or the fragment are very similar like siblings.
            </p>
            <p>
                Fragments have their own fragment manager
                which can be invoked with the method <b>getChildFragmentManager</b>.
                This will help to generate a tree structure which is needed for the application.
                In our example the fragment <i>AncientCivilizations</i> will have
                two children fragments <i>Egypt</i> and <i>Summer</i>.
            </p>
            <p>
                To add the fragments in the back stack
                we have to use the method <b>addToBackStack</b> of the <b>FragmentManager</b>.
            </p>
            <p>
                Now we can implement a nice navigation with the back button.
                The next listing is an example of the navigation using the ids of the containers.
            </p>

            <pre>
            <code>
            private void popFragmentOnBackPressedUsingId(){
                Fragment lastFragment = null;
                Fragment firstFragment = getSupportFragmentManager().findFragmentById(R.id.storeContainer);
                Fragment beforeLastFragment = getSupportFragmentManager().findFragmentById(R.id.historyContainer);
                if (beforeLastFragment != null)
                    lastFragment = beforeLastFragment.getChildFragmentManager().findFragmentById(R.id.ancientCivilizationContainer);
                if (lastFragment != null){
                    breadcrumbTextView.setText("Store > History > Ancient Civilization");
                    lastFragment.getFragmentManager().popBackStack();
                } else if (beforeLastFragment != null) {
                    breadcrumbTextView.setText("Store > History");
                    beforeLastFragment.getFragmentManager().popBackStack();
                } else if (firstFragment != null) {
                    breadcrumbTextView.setText("Store");
                    firstFragment.getFragmentManager().popBackStack();
                } else {
                    super.onBackPressed();
                }
            }
            </code>
            </pre>

            <p>
                This listing is an example of navigation using tags
            </p>

            <pre>
            <code>
            private void popFragmentOnBackPressedUsingTag(){
                int stemFragmentCount = getSupportFragmentManager().getBackStackEntryCount();
                if (stemFragmentCount > 0) {
                    Fragment stemFragment = getSupportFragmentManager().findFragmentByTag("HistoryFragment");
                    int branchFragmentCount = stemFragment.getChildFragmentManager().getBackStackEntryCount();
                    if (branchFragmentCount > 0) {
                        // Use tag to find fragment
                        Fragment branchFragment = stemFragment.getChildFragmentManager().findFragmentByTag("AncientCivilizationFragment");
                        int leafFragmentCount = branchFragment.getChildFragmentManager().getBackStackEntryCount();
                        if (leafFragmentCount > 0) {
                            breadcrumbTextView.setText("Store > History > Ancient Civilization");
                            branchFragment.getChildFragmentManager().popBackStack();
                        } else {
                            breadcrumbTextView.setText("Store > History");
                            stemFragment.getChildFragmentManager().popBackStack();
                        }
                    } else {
                        breadcrumbTextView.setText("Store");
                        getSupportFragmentManager().popBackStack();
                    }
                } else {
                    super.onBackPressed();
                }
            }
            </code>
            </pre>

            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-07-04.gif" type="image/gif">

            <h3>
                <b>
                    Android Navigation Component
                </b>
            </h3>
            <p>
                A new bundle of support libraries has been released for the Android platform.
                Among the libraries there is a new library to handle navigation known
                as <b>Navigation Architecture Component</b>.
                If you want to build an app from the scratch you might want to take a look to this library.
            </p>

            <pre>
            <code class=”bash”>
            implementation "android.arch.navigation:navigation-fragment:1.0.0-alpha01"
            implementation "android.arch.navigation:navigation-ui:1.0.0-alpha01"
            </code>
            </pre>

            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://uxplanet.org/breadcrumbs-for-web-sites-what-when-and-how-9273dacf1960">
                    Breadcrumbs For Web Sites
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/Tree_structure">
                    Tree structure
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/Hierarchy">
                    Hierarchy
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/reference/android/support/v4/app/Fragment">
                    https://developer.android.com/reference/android/support/v4/app/Fragment
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/reference/android/support/v4/app/FragmentManager">
                    https://developer.android.com/reference/android/support/v4/app/FragmentManager
                </a>
            </li>
            <li>
                <a href="https://medium.com/madison-ave-collective/are-breadcrumbs-still-fresh-for-ux-6e72b0f96e9b">
                    Are breadcrumbs still fresh for UX?
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/topic/libraries/architecture/navigation/">
                    The Navigation Architecture Component
                </a>
            </li>
            <li>
                <a href="https://github.com/herb786/tutorial-breadcrumbs">
                    Source code for this tutorial
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Application Lifecycle, Navigation
    </div>
</div><!-- blog 0012-->
<div class="blog" id="blog0012">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Publishing Android Apps with Jenkins
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-06-30
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                In the previous post we created a Jenkins job for testing our applications.
                In this post I will deal with the publishing of Android apps.
            </p>
            <p>
                A new version of our application will be list in the Play Store
                after completing a sequence of steps.
                Google Play provides a helpful API to automatize many tasks
                we do when we publish our apps. We can upload screenshots, binaries, releases notes
                and we can define if the binary will be used for beta testing or will be release to production.
            </p>
            <h3>
                <b>Generating access tokens with an OAuth 2.0 client</b>
            </h3>
            <p>
                Before using the Google Play Developer API we need to grant access to a google account
                with the role of <b>Release manager</b>.
                We can use <b>OAuth Clients</b> or <b>Service Accounts</b>.
                In this post I will create an OAuth Client.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/play-accounts.png" type="image/gif">
            <p>
                You can create an OAuth Client in the section <b>Google APIs</b> of Google Developers Console.
                You must select your project and then go to <b>Credentials</b> section. You can find more information
                in the google play developer api guide<a href="#cite4">[4]</a>.
            </p>
            <p>
                You will need to give a redirect URI.
                You can insert any website or the website for your application.
                Then you will need to generate an authorization code and
                you must be logged with the google account to get the code.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/play-credentials.png" type="image/gif">
            <p>
                Then you should navigate to the next url with the client id and your redirect URI.
            </p>
            <pre><code class="bash">
            https://accounts.google.com/o/oauth2/auth?
            scope=https://www.googleapis.com/auth/androidpublisher
            &response_type=code&access_type=offline
            &redirect_uri=https://your.redirect.uri
            &client_id=your.client.id
            </code></pre>
            <p>
                After granting access being logged in your account
                you will be redirected to your redirect uri and
                you will see a code next to the uri
            </p>
            <pre><code class="bash">
                https://your.redirect.uri?code=4/AsdCsdswh1T6CARIu5_W4z_1cIm-#
            </code></pre>
            <p>
                Now you will need to generate the first authorization token.
                You must perform a POST request as follows
            </p>
            <pre><code class="bash">
            curl -d grant_type=authorization_code
            -d code=4/AsdCsdswh1T6CARIu5_W4z_1cIm-zsewwrwe23424dsfs5KNg0TlkTonKoKY#
            -d client_id=your.client.id
            -d client_secret=your.client.secret
            -d redirect_uri=https://your.redirect.uri https://accounts.google.com/o/oauth2/token
            </code></pre>
            <p>
                The json response has a refresh token which we will use to automatize the request
                to the google play developer api to publishing the application.
            </p>
            <pre><code class="json">
            {
              "access_token" : "yrDx-w9XF1BKai5WBKQVmcIT1WKVu",
              "expires_in" : 3600,
              "refresh_token" : "1/CJnxU35RajKvUjmr_Mx8ho",
              "token_type" : "Bearer"
            }
            </code></pre>
            <p>
                We will refresh the token which will be used to access the google play developer api.
                We perform the next POST request
            </p>
            <pre><code class="bash">
            curl -d grant_type=refresh_token
            -d client_id=your.client.id
            -d client_secret=your.client.secret
            -d refresh_token=1/CJnxU35RajKvUjmr_Mx8ho https://accounts.google.com/o/oauth2/token
            </code></pre>
            <p>
                The expected response is the following
            </p>
            <pre><code class="json">
            {
              "access_token" : "AAAABBBBCCCCDDDDEEEE",
              "expires_in" : 3600,
              "token_type" : "Bearer"
            }
            </code></pre>
            <h3>
                <b>Accessing the Google Play Developer API</b>
            </h3>
            <p>
                To list our app as a beta release or production release we must create <b>Edits</b>.
                Edits are like temporal slots where we will store our binary and their release notes
                before uploading to the play store.
                Edits can be created with the following POST request
            </p>
            <pre><code class="bash">
            curl -d '{"id":"undefined","expiryTimeSeconds":"3600"}'
            -H 'Content-Type: application/json'
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEE" https://www.googleapis.com/androidpublisher/v3/applications/com.company.appname/edits
            </code></pre>
            <p>
                a successful request will provide an id for the temporal slot
            </p>
            <pre><code class="json">
            {
             "id": "123456789editid",
             "expiryTimeSeconds": "1529822597"
            }
            </code></pre>
            <p>
                Now we can upload the apk binary with the next request
            </p>
            <pre><code class="bash">
            curl --data-binary @"/Users/johndoe/yourandroidapp/app/release/app-release.apk"
            -H "Content-Type:application/octet-stream"
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEEU" https://www.googleapis.com/upload/androidpublisher/v3/applications/com.company.appname/edits/123456789editid/apks?uploadType=media
            </code></pre>
            <p>
                A successful request will provide a sha for the binary apk.
            </p>
            <pre><code class="json">
            {
             "versionCode": 1800,
             "binary": {
              "sha1": "b36e0eb6449702f9ad42a8407a7d13",
              "sha256": "adc07556598f0be2d4ca0c55afc44"
             }
            }
            </code></pre>
            <p>
                Now we can add some release notes using the next request
            </p>
            <pre><code class="bash">
            curl -XPUT
            -d '{"track":"beta","releases":[{"versionCodes":[1800],"releaseNotes":[{"language":"en-GB","text":"Some release notes"}],"status":"completed"}]}'
            -H 'Content-Type: application/json'
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEE"
            https://www.googleapis.com/androidpublisher/v3/applications/com.company.appname/edits/123456789editid/tracks/beta
            </code></pre>
            <p>
                A successful request will return your release notes.
            </p>
            <pre><code class="json">
            {
             "track": "beta",
             "releases": [
              {
               "name": "",
               "versionCodes": [
                "1800"
               ],
               "releaseNotes": [
                {
                 "language": "en-GB",
                 "text": "Some release notes"
                }
               ],
               "status": "completed"
              }
             ]
            }
            </code></pre>
            <p>
                Before rolling out the app we should validate the edit.
            </p>
            <pre><code class="bash">
            curl -d '{}'
            -H 'Content-Type: application/json'
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEE"
            https://www.googleapis.com/androidpublisher/v3/applications/com.company.appname/edits/123456789editid:validate
            </code></pre>
            <p>
                A successful request will return the id for the edit.
            </p>
            <pre><code class="json">
            {
             "id": "123456789editid",
             "expiryTimeSeconds": "1529822597"
            }
            </code></pre>
            <p>
                Now we can roll out the app with the followinf request
            </p>
            <pre><code class="bash">
            curl -d '{}'
            -H 'Content-Type: application/json'
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEE"
            https://www.googleapis.com/androidpublisher/v3/applications/com.company.appname/edits/123456789editid:commit
            </code></pre>
            <p>
                A successful request will return the id for the edit.
            </p>
            <pre><code class="json">
            {
             "id": "123456789editid",
             "expiryTimeSeconds": "1529822597"
            }
            </code></pre>
            <h3>
                <b>Generating bash file to automatize the publishing job</b>
            </h3>
            <p>
                We will create a bash script for all this tasks.
                I will store this script in the root folder of the android project.
                The scripts contains this code
            </p>
            <pre><code class="bash">
            #!/bin/bash
            
            myclientid=ABCDE
            myclientsecret=AAAA
            myrefreshtoken=HJKLM
            
            myapppackage=com.company.appname
            myapppath=${WORKSPACE}/app/build/outputs/apk/release/app-release.apk
            
            echo $myapppath
            
            jsondata=$(curl -d grant_type=refresh_token -d client_id=$myclientid -d client_secret=$myclientsecret -d refresh_token=$myrefreshtoken https://accounts.google.com/o/oauth2/token)
            
            echo $jsondata
            
            token=$(echo $jsondata | awk -F\" '{print $4}')
            
            echo $token
            
            jsondata=$(curl -d '{"id":"undefined","expiryTimeSeconds":"3600"}' -H 'Content-Type: application/json' -H "Authorization: Bearer $token" https://www.googleapis.com/androidpublisher/v3/applications/$myapppackage/edits)
            
            echo $jsondata
            
            editid=$(echo $jsondata | awk -F\" '{print $4}')
            
            echo $editid
            
            jsondata=$(curl --data-binary @"$myapppath"  -H "Content-Type:application/octet-stream" -H "Authorization: Bearer $token" https://www.googleapis.com/upload/androidpublisher/v3/applications/$myapppackage/edits/$editid/apks?uploadType=media)
            
            echo $jsondata
            
            regex='"versionCode"..([0-9]+).*'
            
            if [[ $jsondata =~ $regex ]]
            then
                versioncode=${BASH_REMATCH[1]}
            else
                versioncode=null
            fi
            
            echo $versioncode
            
            curl -XPUT -d '{"track":"beta","releases":[{"versionCodes":['$versioncode'],"releaseNotes":[{"language":"en-GB","text":"Some release notes"}],"status":"completed"}]}' -H 'Content-Type: application/json' -H "Authorization: Bearer $token" https://www.googleapis.com/androidpublisher/v3/applications/$myapppackage/edits/$editid/tracks/beta
            
            curl -d '{}' -H "Content-Type: application/json" -H "Authorization: Bearer $token" https://www.googleapis.com/androidpublisher/v3/applications/$myapppackage/edits/$editid:commit
            </code></pre>
            <p>
                Sometimes we create a locked bash script. You need to add execution privileges with the next command
            </p>
            <pre><code>
            chmod 777 apk_publishing.sh
            </code></pre>
            <h3>
                <b>Adding a bash script to the jenkins project</b>
            </h3>
            <p>
                We will create a new project in our jenkins dashboard.
                We can trigger this job after running our test successfully.
                This project will be a <b>Freestyle project</b> and we will provide the url to repository
                and the branch we wish to build.
                In this case we will just run a gradle task with the name <b>assembleRelease</b>.
                You must not forget to configure your gradle project to sign your app when assembling.
                Then we will add a new build step. We will use the step <b>Execute shell</b>.
                We insert the next command
            </p>
            <pre><code>
            sh ${WORKSPACE}/apk_publishing.sh
            </code></pre>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-shell.png" type="image/gif">
            <p>
                Now we can run the jenkins jobs and wait for the results in the google play developer console.
            </p>

            <!--h3>
                <b>Sending apk to production</b>
            </h3>
            <p>
                we must modify the track property for the app
            </p>
            <pre><code class="bash">
            curl -XPATCH
            -d '{"track":"production","releases":[{"versionCodes":[18000],"releaseNotes":[{"language":"en-GB","text":"Now you can use your printer. Recent preprint by category."}],"status":"completed"}]}'
            -H 'Content-Type: application/json'
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEE"
            https://www.googleapis.com/androidpublisher/v3/applications/com.hacaller.arxivlens/edits/12612611848631923311/tracks/production
            </code></pre>
            <p>
                the follow the same steps to roll out the app.
            </p-->
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li id="cite1"><a href="https://developer.android.com/studio/publish/app-signing">
                    https://developer.android.com/studio/publish/app-signing
                </a></li>
            <li id="cite2"><a href="https://developers.google.com/android-publisher">
                    https://developers.google.com/android-publisher
                </a></li>
            <li id="cite3"><a href="https://developers.google.com/android-publisher/edits/">
                    https://developers.google.com/android-publisher/edits/
                </a></li>
            <li id="cite4"><a href="https://developers.google.com/android-publisher/authorization">
                    https://developers.google.com/android-publisher/authorization
                </a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Dev Tools, Jenkins, Continuous Delivery
    </div>
</div><!-- blog 0011-->
<div class="blog" id="blog0011">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Automating Tests with Jenkins
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-06-12
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                The frenzy for automatizing each step of the development cycle comes to their biggest
                expression in mobile development. The ability to test any application for each handset or tablet
                is possible without being time consuming. We can even publish our apps without grabbing a mouse
                or keyboard again thanks to with tools as Jenkins, Travis CI, Gitlab CI/CD just to mention a few of
                them.
            </p>
            <p>
                This post will give a quick start to use Jenkins for android development. I have
                split this tutorial in two parts. The first part will deal with the configuration
                of the Jenkins and the automatization of tests. The second part will deal with
                publishing apps in the play store.
            </p>
            <h3>
                <b>Installing Jenkins</b>
            </h3>
            <p>
                The installation will depend on your operating systems. In <b>windows</b> you usually use <b>docker</b>
                to load the <b>war</b> file for jenkins. You should download <b>Docker Community Edition</b>.
            </p>
            <p>
                In OSX you can use <b>brew</b> to install jenkins. Since this package comes with <b>Jetty</b>,
                you do not need to install docker.
            </p>
            <pre><code class="bash">
            brew install jenkins
            </code></pre>
            <p>
                Then you can start jenkins. I would recommend to use a different port to start the jenkins server,
                since the default port <b>8080</b> is very common for many applications. In windows you must run
            </p>
            <pre><code class="bash">
            java -jar jenkins.war --httpPort=8080
            </code></pre>
            <p>
                In OSX the command is easier
            </p>
            <pre><code class="bash">
            jenkins --httpPort=4000
            </code></pre>
            <p>
                Then you can browse the url <b>http://localhost:4000</b>.
                The first time you must set up your password. The initial password can be found in the secrets folder in
                your jenkins directory. You can also bypass the login if you disable the <b>security</b> property
                in the file <b>./jenkins/config.xml</b>
            </p>
            <p>
                The first time you run jenkins the configuration will suggest to install some common plugins.
                After that you will see your dashboard for your jenkins projects.
            <p>
                <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-home.png" type="image/gif">
            <h3>
                <b>Installing Plugins</b>
            </h3>
            <p>
                Sometimes you will need additional plugins to run common development tasks. This plugin are used in the
                development
                of java applications, net applications, web applications and many others.
            </p>
            <p>
                To install additional plugins you will need to navigate to <b>http://localhost:4000/pluginManager/</b>
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-plugin.png" type="image/gif">
            <p>
                Some common plugins we use in android development are the following
            <ol>
                <li>Android Emulator</li>
                <li>Android Lint</li>
                <li>Android Signing</li>
                <li>Google Play Android Publisher</li>
            </ol>
            </p>
            <h3>
                <b>Setting up repositories</b>
            </h3>
            <p>
                Jenkins will download git repositories and build the application.
                We can achieve this creating a new project in the dashboard.
                You will need to add a <b>new item</b> in the dashboard.
                Then you choose the kind of project you want to set up.
                A <b>Multibranch pipeline</b> will be used if
                you already have a Jenkinsfile with the tasks you will run to build the project.
                We often use a <b>Freestyle project</b> with plugins.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-jobs.png" type="image/gif">
            <p>
                After selecting a project we must give the git repository in the section <b>Source Code Management</b>.
                You can choose the branch and define further options
                that will be used to compile the project.
                For example sometimes you will be loading submodules.
                Then you must check add <b>Additional Behaviours</b> and for this case we will choose
                <b>Advanced submodule behaviours</b> and check <b>recursively update submodules</b>.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-repos.png" type="image/gif">
            <h3>
                <b>The first build</b>
            </h3>
            <p>
                You mostly will build your application with gradle tasks.
                Those tasks can be invoked in a Jenskinsfile or using a plugin such as the <b>Gradle wrapper</b>.
            </p>
            <p>
                An example of a Jenkisnfile to compile a binary for debugging is as follows
            </p>
            <pre><code class="jenkins">
            pipeline {
                agent any
                stages {
                    stage('build') {
                        steps {
                            sh './gradlew assembleDebug'
                        }
                    }
                }
            }
            </code></pre>
            <p>
                You should place this file in the root folder of your project.
                After that you choose this mode in the section <b>Build configuration</b>
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-jenkinsfile.png" type="image/gif">
            <p>
                You can also run gradle tasks using the <b>Gradle wrapper</b>.
                You choose the plugin <b>Invoke gradle script</b> in the section <b>Build</b>.
                Then you shhould add the tasks you want to execute. I will choose <b>assembleDebug</b>
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-gradle.png" type="image/gif">
            <p>
                After the configuration of our build we can run this job in jenkins.
                You just need to click <b>Build now</b> in the left pannel of the dashboard for your project.
                In the section <b>Build history</b> you can observe the last build and
                the dropdown you will see options to know how your job is working.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-buildnow.png" type="image/gif">
            <h3>
                <b>The first automatize test</b>
            </h3>
            <p>
                You can also do some testing. You just need to add some additional steps to your Jenkinsfile.
                An example of such kind of Jenkinsfile is the next one
            </p>
            <pre><code class="jenkins">
            pipeline {
                agent any
                stages {
                    stage('build') {
                        steps {
                            sh './gradlew assembleDebug'
                            echo 'Building debug apk'
                        }
                    }
                    stage('Test') {
                        steps {
                            echo 'Instrumentation Testing..'
                            sh './gradlew connectedDebugAndroidTest'
                            echo 'Unit Testing..'
                            sh './gradlew testDebugUnitTest'
                        }
                    }
                }
            }
            </code></pre>
            <p>
                As you will have noticed such kind of testing task can be very tedious if you want to do more complex
                testing.
                For example if you want to test for different languages or different screen sizes of a device.
            </p>
            <p>
                In this case we have some helpful plugins to make our job easier.
            </p>
            <h3>
                <b>Using Android plugins</b>
            </h3>
            <p>
                We will create a new item or job so we can perform testing on multiple environments.
                Jenkins offers a <b>Multi-configuration project</b> for this kind of situations.
                We configure the project with the git repository and define the branch we want to use.
                This project will have an additional section with the name <b>Configuration matrix</b>.
                We will use this option to define the suite of tests for our application.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-matrix.png" type="image/gif">
            <p>
                In the section <b>Build environment</b> we check the option <b>Run an Android emulator during build</b>.
                Then we must define the properties of the emulator.
                This option lets you to use the variables of the configuration matrix.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-emulator.png" type="image/gif">
            <p>
                In the section <b>Build</b> we use the same gradle plugin and add the gradle task for testing.
                In my case I will use <b>connectedDebugAndroidTest</b>.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-buildtest.png" type="image/gif">
            <p>
                After setting up our configuration we can build the job and wait for the result of the test.
                A successful job will be blue in the dashboard and a failure will be red.
            </p>

            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://plugins.jenkins.io">
                    https://plugins.jenkins.io
                </a></li>
            <li><a href="https://jenkins.io/solutions/android/">
                    https://jenkins.io/solutions/android/
                </a></li>
            <li><a href="https://jenkins.io/doc/book/managing/plugins/">
                    https://jenkins.io/doc/book/managing/plugins/
                </a></li>
            <li><a href="https://jenkins.io/doc/pipeline/tour/getting-started/">
                    https://jenkins.io/doc/pipeline/tour/getting-started/
                </a></li>
            <li><a href="https://www.docker.com/community-edition">
                    https://www.docker.com/community-edition
                </a></li>
            <li><a href="https://plugins.jenkins.io">
                    https://plugins.jenkins.io
                </a></li>
            <li><a href="https://developer.android.com/studio/test/command-line">
                    https://developer.android.com/studio/test/command-line
                </a></li>
            <li><a href="https://wiki.jenkins.io/display/JENKINS/Android+Emulator+Plugin">
                    https://wiki.jenkins.io/display/JENKINS/Android+Emulator+Plugin
                </a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Dev Tools, Jenkins, Continuous Delivery
    </div>
</div><!-- blog 0010-->
<div class="blog" id="blog0010">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Mock server with Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-05-20
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                We usually run local servers with dummy responses to ease and test our current development.
                We no longer need to wait for the last implementation of the API
                to assess our application as far as there is not any change in the API response.
            </p>
            <p>
                This local server often run in our development machine and
                we can easily connect our devices as far as
                there is not any firewall or internal filter preventing us of connecting.
                This might be really annoying if you need to do paperwork to get the technical support
                to configure your devices to get access to the protected network.
                However we are not short in solutions since
                we can still run a local server in our own smart device.
            </p>
            <p>
                The next sections will explain how to set up a local server in an Android device.
                If your are familiar implementing servers with Java, you can recycle your code and
                make a server application in Android.
            </p>
            <h3><b>Server</b></h3>
            <p>
                We will start making a new application with Android Studio without any additional paraphernalia.
                We just need a single activity to start our server so we include our code in the main activity.
                This server must run in a separated thread. We will use the classes <b>ServerSocket</b> and
                <b>Socket</b>.
            </p>
            <pre><code class="java">
            public class MainActivity extends Activity {
            
                ServerThread serverThread;
            
                @Override
                protected void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.activity_main);
            
                    serverThread = new ServerThread();
                    serverThread.start();
                }
            
                public class ServerThread extends Thread {
            
                    @Override
                    public void run() {
                        int port = 3000;
                        try {
                            ServerSocket serverSocket = new ServerSocket(port);
                            serverLog(port);
                            while (true) {
                                Socket clientSocket = serverSocket.accept();
                                ...
                                clientSocket.close();
                            }
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
            
                    }
            
                }
            
            }
            </code></pre>
            <p>
                The socket will receive a request so we need an <b>InputStream</b> and
                we want to send a response so we will initialize an <b>OutputStream</b>.
                We will process the HTTP request with the headers and the payload.
                HTTP requests split the header and the payload with an empty line. We do not
                need the payload for GET request but POST requests.
                After processing and sending the response we will close the socket.
            </p>
            <pre><code class="java">
            InputStream in = clientSocket.getInputStream();
            
            OutputStreamWriter out = new OutputStreamWriter(clientSocket.getOutputStream());
            BufferedWriter outBuffer = new BufferedWriter(out);
            
            byte[] bytes = new byte[2048];
            in.read(bytes, 0, 2048);
            String request = new String(bytes);
            request = request.trim();
            String[] splitRequest = request.split("\r\n\r\n");
            if (splitRequest.length > 1) {
                processRequest(splitRequest[0], splitRequest[1], outBuffer);
            } else {
                processRequest(splitRequest[0], "", outBuffer);
            }
            out.write();
            </code></pre>
            <h3><b>Handling JSON</b></h3>
            <p>
                We can identify a POST or GET request with the first line of the stream.
                Then we can process the content of the payload and send a response.
                In the next example we send a JSON response and process some JSON payload.
                You will notice the method along with the endpoint of the request in the header.
                We just feed the output stream with whole response.
            </p>
            <pre><code class="java">
            if (header.startsWith("GET /data.json")) {
                out.write("HTTP/1.1 200 OK\r\n");
                out.write("Content-Type: application/json\r\n");
                out.write("\r\n");
                out.write("{ \"data\": \"Hello World\"}");
                out.flush();
            } else if (header.startsWith("POST /data.json")) {
                JSONObject json = new JSONObject(body);
                String date = json.get("date").toString();
                String user = json.get("user").toString();
                out.write("HTTP/1.1 200 OK\r\n");
                out.write("Content-Type: application/json\r\n");
                out.write("\r\n");
                out.write("{ \"message\": \"Hello " + user + ", today is " + date + "\"}");
                out.flush();
            }
            </code></pre>
            <h3><b>Handling XML</b></h3>
            <p>We can do the same for XML requests</p>
            <pre><code class="java">
            if (header.startsWith("GET /data.xml")) {
                out.write("HTTP/1.1 200 OK\r\n");
                out.write("Content-Type: application/xml\r\n");
                out.write("\r\n");
                out.write("<?xml version="1.0" encoding="UTF-8"?>"+
            "<data>Hello World</data>");
                out.flush();
            } else if (header.startsWith("POST /data.xml")) {
                JSONObject json = new JSONObject(body);
                String date = json.get("date").toString();
                String user = json.get("user").toString();
                out.write("HTTP/1.1 200 OK\r\n");
                out.write("Content-Type: application/xml\r\n");
                out.write("\r\n");
                out.write("<?xml version="1.0" encoding="UTF-8"?>" +
                        "<message>Hello " + user + ", today is " + date + "</message>");
                out.flush();
            }
            </code></pre>
            <p>Don't forget to escape double quotes in Java.</p>
            <p>
                We can reshape the code to send files and images.
                You can store such files in the <b>assets</b> folder of the project.
                This server can be tested with any client application
                using libraries like okHttp3, Retrofit or HttpUrlConnection.
                This time you just need to set the base url as <b>localhost</b>.
            </p>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://github.com/herb786/tutorial-android-mock-server">
                    https://github.com/herb786/tutorial-android-mock-server
                </a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Dev Tools, Web services
    </div>
</div><!-- blog 0009-->
<div class="blog" id="blog0009">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Mock server with NodeJS
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-05-05
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jsicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>In the realm of mobile development
                we often need to retrieve external responses from Internet.
                In modern times
                we fetch this data after connecting to web services.
            </p>
            <p>During the development cycle of an application,
                some web services usually face some delays
                which can be an impediment to go further with our development.
                Besides we also can find during the development some network troubles
                and we can connect anymore to the endpoints.
            </p>
            <p>In order to overcome such kind of problems,
                we need to break the dependence of external services
                during the early stages of our development.
            </p>
            <p>
                We might work around this problem as far as
                we know how the services will work,
                what responses we will expect and
                what data we need to send in the request.
                If the conditions are given
                we can simulate the server and
                build a local server to mock the responses.
            </p>
            <p>
                In this post I will mock a server with nodeJS and expressJS since
                javascript it is the natural environment for JSON data structures.
                It is also possible to build a server with any web framework or
                micro-framework that you fancy.
            <p>
            <h3><b>Scaffolding Project</b></h3>
            <p>
                I will assume you have already installed NodeJS.
                You can install expressJS and the generator module
            </p>
            <pre><code class=”bash”>
               $ npm install express -g
               $ npm install express-genrator -g
               </code></pre>
            <p>
                The generator of expressJS will set up for you the backbone of your local web server.
            </p>

            <pre><code class=”bash”>
               $ express --view=pug mock-server
               $ cd mock-server
               $ npm install
               </code></pre>
            <p>
                You will find a folder called <b>bin</b> and a file called <b>www</b>
                where you can change the ip address and the port of the local server.
            <p>
            <p>
                The core file is <b>app.js</b>. This file initializes the server and the directories
                used by the server. You can add subdomains as follows
            </p>
            <pre><code class=”javascript”>
               var api = require('./routes/api');
               app.use("/api",api);
               </code></pre>
            <p>
                In the folder <b>routes</b> you will find js files with
                the definition of the endpoint of the local web server.
                In our case we will create the file <b>api.js</b>.
                This file will have the code to process all the requests of our API.
            </p>
            <p>
                You can also create a folder to store your dummy data.
                I will create create a folder named <b>dummies</b> for json and xml files.
            </p>
            <p>
                To start the server you must enter the following line
            </p>
            <pre><code class=”bash”>
               $ npm start
               </code></pre>
            <p>
                You must stop your server whenever
                you modify your project files and
                restart to catch up with the last changes.
            </p>
            <h3><b>Request and Responses</b></h3>
            <p>
                ExpressJS has predefined routines that speed up the development.
                You can process <b>POST</b> and <b>GET</b> requests as follows
            </p>
            <pre><code class=”javascript”>
               var express = require('express');
               var router = express.Router();
               var path = require('path');
               
               router.get('/', function(req, res, next) {
                   res.send('My amazing API');
               });
               
               router.post('/sayHello', function(req, res) {
                   var filepath = path.join(__dirname, '../dummies/hello.json')
                   res.sendFile(filepath);
                   //res.send('Hello World.');
               });
               ...
               module.exports = router;
               </code></pre>
            <p>
                As you might have noticed
                it is possible to send the raw file or a simple plain text
                as the body of the response.
                It is also possible to modify the response header and
                include some HTTP status codes.
            <p>
            <pre><code class=”javascript”>
               router.get('/', function(req, res, next) {
                  res.setHeader('Content-Type', text/plain');
                  res.status(200);
                  res.send('My amazing API');
               });
               </code></pre>
            Sometimes we want to post-process the dummy json data
            for different parameters in the requests.
            We will see that in the next section.
            <h3><b>JSON inputs and outputs</b></h3>
            To work with files we need to import the next module
            <pre><code class=”javascript”>
               var fs = require('fs');
               </code></pre>
            We will work with <b>hello.json</b> which has the next structure
            <pre><code class=”javascript”>
               {
                   "message" : "Hello John Doe",
                   "date" : "01-01-1969"
               }
               </code></pre>
            <p>
                We will send the current date in our response.
            </p>
            <pre><code class=”javascript”>
               router.post('/SayHello', function(req, res) {
                   let raw_data = fs.readFileSync('./dummies/hello.json');
                   let greeting = JSON.parse(raw_data);
                   greeting.date = new Date();
                   res.send(greeting);
               });
               </code></pre>
            <p>
                We might also capture the name parameter from the request
                and send a doctored greeting as response.
            </p>
            <pre><code class=”javascript”>
               router.post('/SayHello', function(req, res) {
                   var name = req.body.name;
                   let raw_data = fs.readFileSync('./dummies/hello.json');
                   let greeting = JSON.parse(raw_data);
                   greeting.date = new Date();
                   greeting.message = ‘Hello ’ + name;
                   res.send(greeting);
               });
               </code></pre>
            <p>
                Here I assumed the payload for my request will be
            </p>
            <pre><code class=”javascript”>
               {
                   "name" : "Jana Doe"
               }
               </code></pre>
            <p>
                In the case of a GET request
                we can get the parameters of the query as follows
            </p>
            <pre><code class=”javascript”>
               router.get('/SayBye', function(req, res, next) {
                   var name = req.query.name;
                   res.send(“Bye “ + name);
               });
               
               </code></pre>
            <p>
                We will do the same in the next section with XML data.
            </p>
            <h3><b>XML inputs and outputs</b></h3>
            <p>
                As we do with JSON data, we can also send and retrieve XML data.
            </p>
            <p>
                We will need to install some modules to be able to parse and deserialize XML data.
                Since express parse by default JSON data in the body of the request
                we need alse some middleware to parse XML data.
            </p>
            <pre><code class=”bash”>
               $ npm install express-xml-bodyparser
               ...
               $ npm install xml2js
               ...
               $ npm install object-to-xml
               </code></pre>
            <p>
                The first module will help us to parse XML data in the body of the request.
                <b>xml2js</b> will be used to deserialize XML data
                and <b>object-to-xml</b> to serialize data as XML.
            </p>
            <p>
                After installing we need to import these modules
            </p>
            <pre><code class=”javascript”>
               var express = require('express');
               var router = express.Router();
               var path = require('path');
               var fs = require(‘fs’);
               
               var xmlparser = require('express-xml-bodyparser');
               var xml2js = require(‘xml2js’);
               var o2x = require(‘object-to-xml’);
               ...
               module.exports = router;
               
               </code></pre>
            <p>
                We can send our javascript objects as XML data
                after a GET request.
            </p>
            <pre><code class=”javascript”>
               router.get('/GetFavouriteComic, function(req, res, next) {
                      var comic = {
                   "title" : "Calvin and Hobbes",
                   "author" : "unknown”
               };
                      comic.author = "Bill Watterson";
                      res.send(o2x(comic));
               });
               </code></pre>
            <p>
                XML data in the body of the request can be parsed and
                we can fetch the parameters of the query.
                We will store a game in the database and send the data below.
            </p>
            <pre><code class=”xml”>
               &lt;?xml version="1.0" encoding="iso-8859-1"?>
               &lt;game>
               &lt;name>Doom&lt;/name>
               &lt;year>1993&lt;/year>
               &lt;/game>
               </code></pre>
            In our code we can fetch the content as follows
            <pre><code class=”javascript”>
               router.post('/StoreFavouriteGame', xmlparser({trim: false, explicitArray: false}), function(req, res, next) {
                   var parseString = xml2js.parseString;
                   parseString(req.body, function(err, result){
                       body = result;
                   });
                   res.send(req.body.game.name + " stored");
               });
               </code></pre>
            <h3><b>Watching changes: Nodemon</b></h3>
            <p>
                As far we were doing all our changes
                and to test them we need to restart the server.
                We can save us all this cumbersome job
                if we use the module nodemon.
            </p>
            <p>
                Nodemon lets us to observe the changes immediately in the server
                while we are editing our code
                without any need to restart the server.
                You can install nodemon like any other node module.
            </p>
            <pre><code class=”bash”>
               $ npm install -g nodemon
               </code></pre>
            <p>
                After installing the module you need to modify the script in <b>packages.json</b>
            </p>
            <pre><code class=”javascript”>
               "scripts": {
                   "start": "nodemon ./bin/www"
               },
               </code></pre>
            <p>
                Now you can watch your changes without restarting the server as usual.
            <p>
            <pre><code class=”bash”>
               $ npm start
               </code></pre>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://expressjs.com/en/starter/generator.html">
                    https://expressjs.com/en/starter/generator.html</a></li>
            <li><a href="https://github.com/macedigital/express-xml-bodyparser">
                    https://github.com/macedigital/express-xml-bodyparser</a></li>
            <li><a href="https://github.com/wankdanker/node-object-to-xml">
                    https://github.com/wankdanker/node-object-to-xml</a></li>
            <li><a href="https://github.com/Leonidas-from-XIV/node-xml2js">
                    https://github.com/Leonidas-from-XIV/node-xml2js</a></li>
            <li><a href="https://nodemon.io">
                    https://nodemon.io</a></li>
            <li><a href="https://github.com/herb786/tutorial-mock-server-js">
                    https://github.com/herb786/tutorial-mock-server-js</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, JavaScript, Dev Tools, Web services
    </div>
</div><!-- blog 0008-->
<div class="blog" id="blog0008">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Working with the Android Debugger
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-04-29
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                One of the most important tools helping many developers to remove issues and bugs in the code
                is the debugger.
            </p>
            <p>In this short post I will spend some lines explaining how to use this fab tool in Android Studio.</p>
            <h3><u>Start the debugger</u></h3>
            <p>You can access the debugger through the <b>Run</b> menu, choosing the option <b>Debug</b>.
                The debugger is also available in the toolbar, you will notice a bug with a small triangle.
                The other way to launch the debugger is using the shortcut keys <b>SHIFT + F9</b>.</p>
            <p>This will bind the debugger while launching the application.
                Then a new <b>Debug</b> tab will appear at the bottom of the IDE.
                You will notice the window tab is split in two panels. The left panel contains the running processes.
                The right panel contains variable of the code that you are tracking.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-panels.png" type="image/png">
            <p>If you miss to start the debugger after launching your application you should read the next section.</p>
            <h3><u>Attach the debugger to process</u></h3>
            <p>You still can attach the debugger after launching your application.
                You need to look for the option <b>Attach to local process...</b> in the menu <b>Run</b>.
                There is an quick access to this option by clicking the icon with a phone and a bug in the toolbar.
                Then you will see a small window where you must choose the process started by your application.
                The process has tje same name of the application package.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-process.png" type="image/png">
            <h3><u>Controlling the debugger</u></h3>
            <p>After binding your application to the debugger you can explore the internal workings of your code
                by setting breakpoint in your code. Breakpoint are usually added to the lines of your code doing
                a double click at the left side of the editor next to the column number.
                You can also add a breakpoint by placing the cursor
                at the line to be analyzed. The shortcut keys <b>CTRL + F8</b> can do the job too.
                You can jump from a breakpoint to another one using the Resume icon
                in the window debug or by using the hotkey <b>F9</b>.</p>
            <p>You can get a list of all the breakpoints in the project when
                you expand the tab <b>Favorites</b> at the left side of the IDE. This panel will appear
                below the panel project.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-favorites.png" type="image/png">
            <p>There is also possible to visualize a sorted list of breakpoint
                with the option <b>View Breakpoints...</b> in the <b>Run</b> menu.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-breakpoints.png" type="image/png">
            <h3><u>Watching variables</u></h3>
            <p>Sometimes you will need to keep a track of internal fields or variables of the instances created by our
                applications.
                This variables are usually not explicit in the code and you can assign a breakpoint.
                You still can watch to this implicit variables using the feature <b>New watch...</b>.
                This option can be accessed by doing double click in the panel of variables or clicking the
                sunglass icon. Then you can choose the variable you want to analyze.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-watcher.png" type="image/png">
            <h3><u>Change values</u></h3>
            <p>It is possible to change the values of the variables at runtime. This feature will let you
                to test in-flight different scenarios for you application. This option can be enabled with
                the hotkey <b>F2</b>. Another way to change a variable is with the option <b>Evaluate Expression...</b>.
                This option is accessible with the shortcut keys <b>ALT + F8</b> or in the <b>Run</b> menu.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-evaluate.png" type="image/png">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://developer.android.com/studio/debug/">
                    https://developer.android.com/studio/debug/</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Debugging, Dev Tools
    </div>
</div><!-- blog 0007-->
<div class="blog" id="blog0007">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                On scaling fonts in Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-04-13
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                During the developing cycle of an application we need to take different decisions to
                fulfill all the requirements of a project. Sometimes we need to take decisions involving
                the visual aspect of the application. We need to choose the right size for an icon, the right type of an
                image,
                their color properties, the dimension of the fonts, the units which we should use.
            </p>
            <p>
                There are very general rules about which units we might use for the fonts in an Android application.
                The question is whether we must take these rules as the bible to generate every screen in an
                Android application or we can have a voice and ignore these rules.
            </p>
            <p>
                Sometimes it is very difficult to go against the common agreement, but I think
                it is most important the user experience we are bringing to the user.
            </p>
            <p>
                In this post, I want to present the case of using scalable fonts in Android applications.
                As you must know the developer guide says to always use scalable fonts. Maybe
                this is an overstatement, however I will present two cases where it would better
                to use our judgement instead of following "the good practices".
            </p>
            <p>
                We will see the case of using scalable fonts in an advertisement for a new deal and
                the case of using them in an information page.
            </p>
            <p>
                First of all, I want to show how the screens will look we the common unit used in
                android applications, that is, density pixel units.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-09-dp.gif" type="image/gif">
            <p>
                This will work for any user unless he or she has impaired vision. In this case the user will
                probably change their settings and choose a bigger font.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-13-sets.gif" type="image/gif">
            <p>This change will not have any effect in our application since we are using density pixels and
                the font will stay the same.</p>
            <p>If we follow the recommendation of the developer guide and we use scalable pixel units, then
                we find that the size of the text in the application will adapt to the user preferred size.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-09-sp.gif" type="image/gif">
            <p>As you can see, the information page will complete its goal of bringing information
                to the users. However the advertisement will lost their visual content embedded on each element of
                design
                as the size, shape, aligment and position.</p>
            <p>We can deal with this issue in a solomonic way. We can use density pixel units for the advertisement
                and scalable pixel units for the information page.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-09-good.gif" type="image/gif">
            <p>Since some developers are not familiar with the graphic arts, they will prefer to gain textual content
                at expenses of visual content. The other side of the coin is that you could never give
                a text huge enough to please some users.</p>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://material.io/guidelines/layout/units-measurements.html">
                    https://material.io/guidelines/layout/units-measurements.html</a></li>
            <li><a href="https://developer.android.com/training/multiscreen/screendensities.html">
                    https://developer.android.com/training/multiscreen/screendensities.html</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, XML, UI Design, Fonts, Typographic Units
    </div>
</div><!-- blog 0006-->
<div class="blog" id="blog0006">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                A fancy tutorial with ViewPager
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-04-07
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Most often we have users or costumers which are not familiriased with mobiles platforms.
                Other users might not have the same idea of friendliness as the UX designers and our costumers will
                be lost in our application. The consequences will not only be the loss of a promising costumer but
                in addition a bad review for the application undermining its circulation.
            </p>
            <p>
                This problem can be addressed by including a deck of images containig an explanation of the main
                features of
                the application. The user can navigate through the images by sweeping the screen.
                This visual aid for users has been proved popular in the Android market.
            </p>
            <p>
                In this post I will show you how to create a simple tutorial for a pet shop. This tutorial will be shown
                before the main screen with the name of the pet shop. The tutorial will have two pages for cat and dog
                owners.
            </p>
            <p>
                We create a project with an empty activity. This activity will launch the tutorial.
                Then we add a new <b>FragmentActivity</b> that will implement the logic of the tutorial.
                We call this activity SliderOverviewActivity.
            </p>
            <pre><code class="java">
            public class MainActivity extends AppCompatActivity {
            
                @Override
                protected void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.activity_main);
            
                    Intent intent = new Intent(this, SliderOverviewActivity.class);
                    startActivity(intent);
                }
            }
            </code></pre>
            <p>
                A developer may use the ViewPager component to build a tutorial and we will use this approach.
                A ViewPager allows to browse through a collection of fragments. Beside the fragments to be displayed,
                a ViewPager will need an adapter to bind the fragments.
            </p>
            <p>
                We start creating the fragments that will be displayed. We call this fragment
                <b>SliderOverviewFragment</b> and has two View components, namely, one for the title and the other one
                for
                a picture.
            </p>
            <pre><code class="xml">
            &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:tools="http://schemas.android.com/tools"
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:orientation="vertical"
                  android:gravity="center">
            
                &lt;TextView
                    android:id="@+id/title"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textColor="#fff"
                    android:textSize="28dp" />
            
                &lt;TextView
                    android:id="@+id/image"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textColor="#fff"
                    android:textSize="96dp" />
            
            &lt;/LinearLayout>
            </code></pre>
            <p>
                We need a tutorial page for cat owners and one for dog owners.
                We will just use this fragment and will change the content of their views.
            </p>
            <pre><code class="java">
            public static class  SliderOverviewPageFragment extends Fragment {
            
                public static final String PAGE_NUMBER = "PAGE_NUMBER";
                private int page;
                TextView title;
                TextView image;
            
                public SliderOverviewPageFragment() {}
            
                @Override
                public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    if (getArguments() != null) {
                        page = getArguments().getInt(PAGE_NUMBER);
                    }
                }
            
                @Override
                public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                         Bundle savedInstanceState) {
            
                    View view = inflater.inflate(R.layout.fragment_slider_overview_page, container, false);
                    title = (TextView) view.findViewById(R.id.title);
                    image = (TextView) view.findViewById(R.id.image);
            
                    switch (page) {
                        case 1:
                            title.setText("\uD83D\uDC31FOR CAT LOVERS\uD83D\uDC31");
                            image.setText("\uD83D\uDC08");
                            break;
                        case 2:
                            title.setText("\uD83D\uDC36FOR DOG LOVERS\uD83D\uDC36");
                            image.setText("\uD83D\uDC15");
                            break;
                        default:
                            break;
                    }
            
                    return view;
                }
            }
            </code></pre>
            <p>
                Then we need <b>FragmentStatePageAdapter</b> to bind the fragment to each position in the ViewPager
                component.
                This adapter needs to return the number of fragments and the fragment for each position.
            </p>
            <pre><code class="java">
            public class SliderOverviewPageAdapter extends FragmentStatePagerAdapter {
            
                public SliderOverviewPageAdapter(FragmentManager fm) {
                    super(fm);
                }
            
                @Override
                public int getCount() {
                    return 2;
                }
            
                @Override
                public Fragment getItem(int position) {
                    Fragment fragment = new SliderOverviewPageFragment();
                    Bundle args = new Bundle();
                    args.putInt(SliderOverviewPageFragment.PAGE_NUMBER, position + 1);
                    fragment.setArguments(args);
                    return fragment;
            
                }
            }
            </code></pre>
            <p>
                Finally we need to implement the ViewPager component in our FragmentActivity.
                We will add some visual hints to know the number of pages.
                So we will add a <b>TextView</b> component to display the page number. Then we create an
                instance of the ViewPager class and set the adapter. Then we implement the method
                <b>onPageSelected</b> to show the page number when a page is selected.
            </p>
            <pre><code class="java">
            final TextView pageNumber = (TextView) findViewById(R.id.page_number);
            pageNumber.setText("Page 1");
            viewPager = (ViewPager) findViewById(R.id.viewPager);
            // Adapter
            pageAdapter = new SliderOverviewPageAdapter(getSupportFragmentManager());
            viewPager.setAdapter(pageAdapter);
            
            viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
                ...
            
                @Override
                public void onPageSelected(int position) {
                    switch (position) {
                        case 0:
                            pageNumber.setText("Page 1");
                            break;
                        case 1:
                            pageNumber.setText("Page 2");
                            break;
                        default:
                            break;
                    }
                }
                ...
            });
            </code></pre>
            <p>
                A preview of the tutorial for our pet shop
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-07.gif" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://developer.android.com/training/animation/screen-slide.html">
                    https://developer.android.com/training/animation/screen-slide.html</a></li>
            <li><a href="https://developer.android.com/reference/android/support/v4/view/ViewPager.html">
                    https://developer.android.com/reference/android/support/v4/view/ViewPager.html</a></li>
            <li><a href="https://github.com/herb786/tutorial-slider-overview">
                    Tutorial source code</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Activity, XML, UI Design
    </div>
</div><!-- blog 0005-->
<div class="blog" id="blog0005">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                DatePicker in your android app with ease
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-03-13
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Sometimes our application will need to ask for a date and time to users, customers or clients.
                We can use this information for many purposes. We can set alerts or alarms.
                Companies use this to book a flight or a room, to sell tickets.
                This can be used for analytics to offer a better service.
                The same app might use this information for sorting out music, books, or videos.

            </p>
            <p>
                That means we need to provide an intuitive way to ask for this information.
                Fortunately, the Android framework save us the work to build a date picker since it
                supplies a DatePicker and a TimePicker component.
                In this post we will see how to implement those pickers for an activity.
            </p>
            <p>
                We are going to prepare a screen to book train tickets and we need the date of departure and
                the leaving time. Then we must set this layout for our activity. Since our costumers will refrain to
                type the date and the time with the virtual keyboard, we offer them the time and date pickers.
                There will be two EditText components for time and date. These components will only show the pickers.
                Then we need to set the attribute editable to false.
                You might want to stylize your components a little bit as I did.
                You will have a layout such as this one below
            </p>
            <pre><code class="xml">
            &lt;LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    xmlns:tools="http://schemas.android.com/tools"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical"
                    android:padding="16dp"
                    android:background="#ACC2CB"
                    tools:context="com.hacaller.trainticketbooking.MainActivity">
            
                &lt;TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:textSize="20dp"
                        android:text="BOOK"
                        android:paddingVertical="20dp"/>
            
                &lt;TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:paddingVertical="20dp"
                        android:textSize="20dp"
                        android:text="Departure date" />
            
                &lt;EditText
                        android:id="@+id/DAY_EDITTEXT"
                        android:layout_margin="20dp"
                        android:textSize="20dp"
                        android:editable="false"
                        android:clickable="true"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" />
            
                &lt;TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:textSize="20dp"
                        android:paddingVertical="20dp"
                        android:text="Leaving at"/>
            
                &lt;EditText
                        android:id="@+id/TIME_EDITTEXT"
                        android:layout_margin="20dp"
                        android:textSize="20dp"
                        android:editable="false"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" />
            
            &lt;/LinearLayout>
            </code></pre>
            <p>
                To call a DatePicker as a dialog we need to create a DialogFragment calling the <b>DatePickerDialog</b>
                component.
                We also need an instance of <b>OnDateSetListener</b> to return the date to the activity.
                The code is shown below. The dialog for the TimePicker is built in the same way.
                In this case we use the <b>TimePickerDialog</b>.
            </p>
            <pre><code class="java">
            public class DateDialogFragment extends DialogFragment {
            
                DatePickerDialog.OnDateSetListener onDateSetListener;
            
                public DateDialogFragment() {
                    // Required empty public constructor
                }
            
                @NonNull
                @Override
                public Dialog onCreateDialog(Bundle savedInstanceState) {
                    final Calendar c = Calendar.getInstance();
                    int year = c.get(Calendar.YEAR);
                    int month = c.get(Calendar.MONTH);
                    int day = c.get(Calendar.DAY_OF_MONTH);
                    return new DatePickerDialog(getActivity(),onDateSetListener,year, month, day);
                }
            
                @Override
                public void onAttach(Context context) {
                    super.onAttach(context);
                    if (context instanceof DatePickerDialog.OnDateSetListener) {
                        onDateSetListener = (DatePickerDialog.OnDateSetListener) context;
                    } else {
                        throw new RuntimeException(context.toString()
                                + " must implement OnDateSetListener");
                    }
                }
            
                @Override
                public void onDetach() {
                    super.onDetach();
                    onDateSetListener = null;
                }
            
            }
            </code></pre>
            <p>
                Now we must bind all the components in the activity.
                The EditText components for the pickers will react to the click event.
                The picker dialog will be shown when this event is triggered.
            </p>
            <pre><code class="java">
            ...
            EditText dayEditText;
            
            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);
            
                dayEditText = findViewById(R.id.DAY_EDITTEXT);
                ...
            
                dayEditText.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        DialogFragment newFragment = new DateDialogFragment();
                        newFragment.show(getSupportFragmentManager(), "datePicker");
                    }
                });
            
                ...
            
            }
            </code></pre>
            <p>
                Finally we need to implement the listeners to fetch the date or time from the dialogs.
                We must implement for the date <b>OnDateSetListener</b> and for the time <b>OnTimeSetListener</b>.
                The we can show this result on the EditText components.
            </p>
            <pre><code class="java">
                @Override
                public void onDateSet(DatePicker datePicker, int i, int i1, int i2) {
                    String date = String.format("%02d/%02d/%d", i2,i1+1,i);
                    dayEditText.setText(date);
                }
            </code></pre>
            <p>
                A preview of the screen for booking train tickets
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-03-17.gif" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a
                    href="https://developer.android.com/reference/android/app/TimePickerDialog.html">https://developer.android.com/reference/android/app/TimePickerDialog.html</a>
            </li>
            <li><a
                    href="https://developer.android.com/reference/android/app/DatePickerDialog.html">https://developer.android.com/reference/android/app/DatePickerDialog.html</a>
            </li>
            <li><a
                    href="https://developer.android.com/guide/topics/ui/controls/pickers.html">https://developer.android.com/guide/topics/ui/controls/pickers.html</a>
            </li>
            <li><a href="https://github.com/herb786/tutorial-datetimepicker-dialog">Tutorial source code</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Activity, XML, UI Design
    </div>
</div><!-- blog 0004-->
<div class="blog" id="blog0004">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                A navigation drawer with fragments
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-03-11
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Our last post</a> we saw how to build an application with a navigation drawer using only activity
                components.
                However we have found a slight disparity when we go through the screens.
                We could get rid of this odd blink using fragment components.
            </p>
            <p>
                In this post I will create a new application for a store.
                I will assume you have experience dealing with fragments and their life cycle.
                For this application I will need a catalogue, a shopping cart
                and a map to find the stores. I will create a fragment for each one of this features.
                We launch the application with the <i>MainActivity</i> which becomes our home screen.
            </p>
            <p>
                Fragments can be included in our project using the wizard in Android Studio.
                One needs to do right click on the application folder, select <i>New</i>, then <i>Fragment</i>
                and select <i>Blank Fragment</i>. The wizard will appear and we can configure the component.
                For our simple example I will uncheck the options including <i>factory methods</i>
                and <i>interface callbacks</i>.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/wizard-fragment.png' alt=''
                class="blog-image-tiny"><br />
            <p>
                After creating the fragments, we cand add some views in their layouts.
                I will only add a label for the feature. Then we need to make some changes on our layout
                <i>app_nav_bar.xml</i>. We insert a frame layout to display the fragments.
            </p>
            <pre><code class="xml">
        &lt;?xml version="1.0" encoding="utf-8"?>
            &lt;android.support.design.widget.CoordinatorLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    xmlns:app="http://schemas.android.com/apk/res-auto"
                    xmlns:tools="http://schemas.android.com/tools"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    tools:context="com.hacaller.navstore.NavActivity">

            &lt;android.support.design.widget.AppBarLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:theme="@style/AppTheme.AppBarOverlay">

                &lt;android.support.v7.widget.Toolbar
                        android:id="@+id/toolbar"
                        android:layout_width="match_parent"
                        android:layout_height="?attr/actionBarSize"
                        android:background="?attr/colorPrimary"
                        app:popupTheme="@style/AppTheme.PopupOverlay" />

            &lt;/android.support.design.widget.AppBarLayout>

            &lt;FrameLayout
                    android:id="@+id/mainContent"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent">

            &lt;/FrameLayout>

        &lt;/android.support.design.widget.CoordinatorLayout>
        </code></pre>

            <p>
                Then we will add a navigation activity following
                the same steps as that on the previous post. We also call it <i>NavActivity</i>.
                We also edit the layouts of the navigation drawer as we point out previously.
                In this case I need to change the name of the app, and the item ids for each feature.
            </p>
            <pre><code class="xml">
            &lt;?xml version="1.0" encoding="utf-8"?>
            &lt;menu xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                tools:showIn="navigation_view">

            &lt;group android:checkableBehavior="single">
                &lt;item
                        android:id="@+id/nav_home"
                        android:icon="@drawable/ic_menu_camera"
                        android:title="HOME" />
                &lt;item
                        android:id="@+id/nav_catalogue"
                        android:icon="@drawable/ic_menu_gallery"
                        android:title="CATALAOGUE" />
                &lt;item
                        android:id="@+id/nav_shopping_cart"
                        android:icon="@drawable/ic_menu_slideshow"
                        android:title="SHOPPING CART" />
                &lt;item
                        android:id="@+id/nav_map"
                        android:icon="@drawable/ic_menu_manage"
                        android:title="MAP" />
            &lt;/group>

            &lt;/menu>
        </code></pre>

            <p>
                We need to set the <i>MainActivity</i> as a subclass of NavActivity
                and we set <i>NavActivity</i> as an abstract class as we did before.
                Then we add the logic to call the fragments in <i>NavActivity</i>.
                Here we embed the fragment in <i>MainActivity</i> using the frame layout
                with identifier <i>R.id.mainContent</i>.
            </p>
            <pre><code class="java">
            @Override
            public boolean onNavigationItemSelected(MenuItem item) {
                // Handle navigation view item clicks here.
                int id = item.getItemId();

                if (id == R.id.nav_home) {
                    Intent intent = new Intent(this, MainActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                } else if (id == R.id.nav_catalogue) {
                    Fragment fragment = new CatalogueFragment();
                    getSupportFragmentManager().beginTransaction()
                            .replace(R.id.mainContent, fragment)
                            .commit();
                } else if (id == R.id.nav_shopping_cart) {
                    Fragment fragment = new ShoppingCartFragment();
                    getSupportFragmentManager().beginTransaction()
                            .replace(R.id.mainContent, fragment)
                            .commit();
                } else if (id == R.id.nav_map) {
                    Fragment fragment = new MapFragment();
                    getSupportFragmentManager().beginTransaction()
                            .replace(R.id.mainContent, fragment)
                            .commit();
                }

                DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);
                drawer.closeDrawer(GravityCompat.START);
                return true;
            }
        </code></pre>

            <p>
                As mentioned on the previous post, we use the theme <i>NoActionBar</i> in the manifest.
                Another change for the <i>MainActivity</i> will be to load the layout inside the frame layout.
                We might do this job as follows</p>
            <pre><code class="java">
            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                View view = LayoutInflater.from(this).inflate(R.layout.activity_main,null);
                FrameLayout frameLayout = findViewById(R.id.mainContent);
                frameLayout.removeAllViews();
                frameLayout.addView(view);
            }
        </code></pre>
            <p>
                You can modify the title on the top bar by summoning the method <i>getSupportActionBar</i>.
                Now you can run the app and look how smooth is the transition between screens setting aside the home
                screen.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-03-11.gif" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a
                    href="https://developer.android.com/training/implementing-navigation/nav-drawer.html">https://developer.android.com/training/implementing-navigation/nav-drawer.html</a>
            </li>
            <li><a
                    href="https://developer.android.com/guide/components/activities/index.html">https://developer.android.com/guide/components/activities/index.html</a>
            </li>
            <li><a
                    href="https://github.com/herb786/tutorial-nav-drawer-fragments">https://github.com/herb786/tutorial-nav-drawer-fragments</a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Activity, XML, UI Design
    </div>
</div><!-- blog 0003-->
<div class="blog" id="blog0003">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                A navigation drawer with activities
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-03-04
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>Many current applications has a nice navigation drawer that helps users
                to access quickly their different components.
                This navigation tool comes handy when we have a bunch of well defined features
                which are independent.</p>

            <p>In this post I will create an application for an international event. You will find three features,
                namely,
                the timetable, the venues and a photo gallery. Our start point will be an empty activity created with
                Android Studio.
                We will be able to access those features through a navigation drawer and the home screen.
                The name of this app will be NavInternationalEvent.</p>

            <p>We start creating an activity for each feature.
                First of all you need to select your app folder in the project panel.
                You can add a new activity to your project by doing right click on this folder and
                selecting the option <i>Menu</i> and then an <i>Empty Activity</i> from the Activity option.</p>

            <p>Another way to add a new activity is through the menu bar with the sequence <i>File, New and
                    Activity</i>.</p>

            <p>I will name each activity <i>TimetableActivity</i>, <i>VenuesActivity</i> and <i>GalleryActivity</i>
                respectively.
                We will insert a TextView filling up the whole layout with the attribute gravity set to center for each
                activity.</p>

            <p>Once we have added the activities for each feature, I will create the navigation drawer.
                Android Studio lets you to add a barebone navigation drawer which you can implement according to your
                requirements.
                In order to add this template you might follow the same procedure to add an activity but we will choose
                <i>Navigation Drawer Activity</i> in this case. The name of this activity will be <i>NavActivity</i>
                for our example.
            </p>

            <p>The navigation drawer template will add the following items</p>
            <ol>
                <li>The layout that contains the navigation drawer whose name is NavActivity. We don't need change this
                    one.</li>
                <li>The layout for the toolbar whose name is app_bar_nav.</li>
                <li>The layout for the container. The name of this layout is content_nav. We leave this one too.</li>
                <li>The layout for the navigation header whose name is nav_header_nav.</li>
                <li>The layout for the menu items in the menu folder whose name is activity_nav_drawer.</li>
            </ol>
            <p>This navigation activity will come with some additional features as a floating button and an action bar
                button.</p>


            <p>We can start editing the layout for the navigation header.
                We keep most of the structure, we will change the app name and remove the TextView for the email.</p>
            <pre><code class="xml">
&lt;xml version="1.0" encoding="utf-8"?>
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:app="http://schemas.android.com/apk/res-auto"
              android:layout_width="match_parent"
              android:layout_height="@dimen/nav_header_height"
              android:background="@drawable/side_nav_bar"
              android:gravity="bottom"
              android:orientation="vertical"
              android:paddingBottom="@dimen/activity_vertical_margin"
              android:paddingLeft="@dimen/activity_horizontal_margin"
              android:paddingRight="@dimen/activity_horizontal_margin"
              android:paddingTop="@dimen/activity_vertical_margin"
              android:theme="@style/ThemeOverlay.AppCompat.Dark">

    &lt;ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="@dimen/nav_header_vertical_spacing"
            app:srcCompat="@mipmap/ic_launcher_round" />

    &lt;TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingTop="@dimen/nav_header_vertical_spacing"
            android:text="NavInternationalEvent"
            android:textAppearance="@style/TextAppearance.AppCompat.Body1" />

&lt;/LinearLayout>
</code></pre>


            <p>Then we can modify the list of items that will show in the navigation drawer.
                We only need four items, one for each feature and one for the home screen.</p>
            <pre><code class="xml">
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;menu xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      tools:showIn="navigation_view">

    &lt;group android:checkableBehavior="single">
        &lt;item
                android:id="@+id/nav_home"
                android:icon="@drawable/ic_menu_camera"
                android:title="Home" />
        &lt;item
                android:id="@+id/nav_timetable"
                android:icon="@drawable/ic_menu_slideshow"
                android:title="Timetable" />
        &lt;item
                android:id="@+id/nav_venues"
                android:icon="@drawable/ic_menu_manage"
                android:title="Venues" />
        &lt;item
                android:id="@+id/nav_gallery"
                android:icon="@drawable/ic_menu_gallery"
                android:title="Gallery" />
    &lt;/group>

&lt;/menu>
</code></pre>

            <p>Now we can edit the layout for the toolbar. Since the app does not need a floating button we will remove
                it.
                Then we will insert the attribute id inside the include tag.</p>
            <pre><code class="xml">
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:app="http://schemas.android.com/apk/res-auto"
              xmlns:tools="http://schemas.android.com/tools"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical"
              tools:context="com.example.hacaller.myapplication.NavActivity">

    &lt;android.support.design.widget.AppBarLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:theme="@style/AppTheme.AppBarOverlay">

        &lt;android.support.v7.widget.Toolbar
                android:id="@+id/toolbar"
                android:layout_width="match_parent"
                android:layout_height="?attr/actionBarSize"
                android:background="?attr/colorPrimary"
                app:popupTheme="@style/AppTheme.PopupOverlay" />

    &lt;/android.support.design.widget.AppBarLayout>

    &lt;include android:id="@+id/layoutContainer" layout="@layout/content_nav" />

&lt;/LinearLayout>
</code></pre>

            <p>After doing those modifications, we will proceed to edit the code of the navigation drawer.
                We will use the navigation drawer activity as the parent class for all our activities.
                So we will declare this activity as abstract. You must remove this activity from your manifest.</p>

            <p>We open the NavActivity and start with some cleaning.
                First of all, we will remove some unused components as the floating button in the onCreate method.
                Then we will edit the onNavigationItemSelected method removing unused item ids and adding
                the ones we have created in activity_nav_drawer.xml.</p>

            <p>We recall there is a layout which contains our views and components.
                This layout will be replaced by the layout of our feature activities.
                This layout is inserted through the include tag.
                We will created the following method to inflate an activity layout and insert this using the include
                tag.</p>

            <pre><code class="java">
public void setActivityView(int resourceId){
    ViewGroup root = findViewById(R.id.layoutContainer);
    View view = View.inflate(this, resourceId, root);
}
</code></pre>

            <p>Each feature activity we will extend the NavActivity.
                We replace the setContentView with our new method on each activity.
                We might also want to change the title of the action bar. The onCreate method then becomes</p>

            <pre><code class="java">
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setActivityView(R.layout.activity_venues);
    getSupportActionBar().setTitle("VENUES");
}
</code></pre>

            <p>Then we need to load our activities after selecting an item in the navigation drawer.
                We need to modify onNavigationItemSelected.</p>

            <pre><code class="java">
public boolean onNavigationItemSelected(MenuItem item) {
    // Handle navigation view item clicks here.
    int id = item.getItemId();

    if (id == R.id.nav_home) {
        Intent intent = new Intent(this, MainActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    } else if (id == R.id.nav_gallery) {
        Intent intent = new Intent(this, GalleryActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    } else if (id == R.id.nav_timetable) {
        Intent intent = new Intent(this, TimetableActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    } else if (id == R.id.nav_venues) {
        Intent intent = new Intent(this, VenuesActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    }

    DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);
    drawer.closeDrawer(GravityCompat.START);
    return true;
}
</code></pre>

            <p>Before running the application we must change the theme of our application in the manifest as follows</p>
            <pre><code class="xml">
android:theme="@style/AppTheme.NoActionBar"
</code></pre>

            <p>After finishing our coding work, you will find the navigation shows a blink when you start a new window.
                This can be solved using fragments. We will create a navigation drawer with fragments in a future post.
                Below you will find a quick preview for this android application.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-03-10.gif" type="image/gif">
            <p>As always you will find the source code in the references.</p>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERRNCES-->
        <ol>
            <li><a
                    href="https://developer.android.com/training/implementing-navigation/nav-drawer.html">https://developer.android.com/training/implementing-navigation/nav-drawer.html</a>
            </li>
            <li><a
                    href="https://developer.android.com/guide/components/activities/index.html">https://developer.android.com/guide/components/activities/index.html</a>
            </li>
            <li><a
                    href="https://github.com/herb786/tutorial-nav-drawer-activities">https://github.com/herb786/tutorial-nav-drawer-activities</a>
            </li>
        </ol>
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Activity, XML, UI Design
    </div>
</div><!-- blog 0002-->
<div class="blog" id="blog0002">
    <div class="blog-title-image">
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/post_header_0002.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <span id="title">Deploying a Django application with AWS</span>
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <span id="createdAt">2017-10-29</span>
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/pythonicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/postgreicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <p>In this tutorial I want to share my list of steps to deploy a django website with amazon web services.
                This will be a brief summary to help you to deploy a python website right away.
                I will also provide some information you will need when you want to manage the database provided for
                AWS.
                Finally I will show how to link your domain to your website with AWS.</p>
            <p>There is a lot of detailed guides which you can find in the documentation offered by AWS.
                In this tutorial I just want to give the basis path to run your website.
                A few steps will require you to do some additional reading and I will provide some useful links in that
                case.</p>
            <p>This tutorial has been structured as follows</p>
            <ul>
                <li><a href="#sec1">Launching an environment with Elastic Beanstalk</a></li>
                <li><a href="#sec2">Setting up AWS CLI and deploying django application</a></li>
                <li><a href="#sec3">Managing PostgreSQL database</a></li>
                <li><a href="#sec4">Setting up domains</a></li>
            </ul>

            <div class="post-subtitle" id="sec1">
                Launching an environment with Elastic Beanstalk
            </div>
            <p>
                From now on, I will assume you have an account in Amazon Web Services and
                you know how to access the management console.
                The first step to deploy a web application is to create the environment where the application will live.
                Elastic Beanstalk lets you to create a virtual machine with Linux as their operative system
                and install the language you require to build your application.
                Since we are creating a Django website I will choose python, in particular the version 2.7.
                You can also run an environment using EC2 instances.
                We start opening the management console and picking <b>Elastic Beanstalk</b> in the top menu.
                You will see the first window of the wizard. This window will show how to start an environment.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-01.png' alt='' class="blog-image-md">

            <p>Here we choose the option <b>Web Server Environment</b>.
                Then you will choose the option <b>python language</b> in the next screen.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-02.png' alt='' class="blog-image-md">

            <p>Now you will need to give a name to your environment.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-03.png' alt='' class="blog-image-md">

            <p>In the following steps you can leave untouched the default configuration.
                When you land in the window shown below, you need to choose your database.
                In my case I will be using a PostgreSQL database.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-04.png' alt='' class="blog-image-md"><br />

            <p>Finally you can check your configuration and launch the environment.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-05.png' alt='' class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-06.png' alt='' class="blog-image-md"><br />

            <p>After a successful launching you will redirected to this window</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/last-step-aws.png' alt=''
                class="blog-image-md"><br />

            <div class="post-subtitle" id="sec2">
                Setting up AWS CLI
            </div>
            <p>After creating an environment we can deploy our application.
                AWS has an utility to deploy your websites from the command line.
                This utility is known as <b>awsebcli</b>. You can install this script executing the following command
            </p>
            <pre><code class="bash">pip install awsebcli
</code></pre>
            <p>You can find more details <a
                    href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html">here</a>. Now you
                will need to configure the script with your credentials. You can create credentials in the management
                console with the option <b>My Security Credentials</b>. You will find more information in this <a
                    href="http://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html">link</a></p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/eb-conf.png' alt='' class="blog-image-md"><br />
            <p>Now you can deploy your python website. Before deploying you will need to create a virtual environment.
                This task is described in this <a
                    href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-django.html">link</a>.
                I should mention that we can deploy our website to multiple environments.</p>
            <p>Sometimes we need to create environment variables which are used by our application.
                For instance you might use an environment variable to save the endpoint of your database.
                Environment variables can be created using the management console.
                You must enter your application dashboard and then go to the side menu and choose the option
                <b>Configuration</b>. The you must look for the section <b>Environment Properties</b>.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/set-env-01.png' alt='' class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/set-env-02.png' alt='' class="blog-image-md"><br />

            <div class="post-subtitle" id="sec3">
                Managing PostgreSQL database
            </div>
            <p>A daily task we need to do is maintenance, changing a record, or any kind of operation in a database.
                You might access your database created by AWS using your favourite database manager.
                There exists an utility to manage PostgreSql database with a nice graphical interface.
                This utility is pgAdmin and their last version is 2.0. Before we can use this utility
                we need to allow the access to our database from our computer home.
                You can do that through the management console. This time you must go to <b>VPC Dashboard</b>.
                There you should select the group Id assigned to your RDS database.
                Lastly you should add inbound and outbound rules.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/db-conf-01.png' alt='' class="blog-image-md"><br />
            </p>You must proceed with caution since you can allow access to your database from any computer.
            You should limit the rules to your ip address.</p>
            Then you need to collect some information about your database.
            Information details of your database can be found in your <b>RDS Dashboard</b>.
            You will need endpoint, port, database name, database instance, username and password.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/db-conf-02.png' alt='' class="blog-image-md"><br />
            <p>After collecting these details you can create a server for this database in pgAdmin.
                Firstly you must add a new server</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/pg-admin-01.png' alt=''
                class="blog-image-md"><br />
            <p>Then you will see a window dialog where you will give a name to your server.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/pg-admin-02.png' alt=''
                class="blog-image-md"><br />
            <p>Lastly you must fill the form with the information above.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/pg-admin-03.png' alt=''
                class="blog-image-md"><br />

            <div class="post-subtitle" id="sec3">
                Setting up domains
            </div>
            <p>This the final lap of this long race. After deploying with success your website,
                you might want to use your own domain instead of the awful url assigned by AWS.
                Once you have acquired a domain you can access the management console and link your domain to your
                environment.
                In this case you must go to your <b>Route 53 Dashboard</b>. You can buy a domain here if you do not own
                one.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/domain-01.png' alt='' class="blog-image-md"><br />
            <p>Then you must go to <b>Hosted Zones</b>. There you can create a type A Record Set which will assign the
                domain to your environment.
                For more information follow this <a
                    href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html">link</a>.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/domain-02.png' alt='' class="blog-image-md"><br />
            <p>We arrive to the end of this tutorial after walking through different roads.
                Sometimes those roads turn into big mazes where we keep going around without find an escape.
                I hope this tutorial be your breadcrumb trail to put your website online and alive.
            </p>
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <ol>
            <li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-django.html">
                    http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-django.html</a></li>
            <li><a href="http://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html">
                    http://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html</a></li>
            <li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html">
                    http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html</a></li>
            <li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html">
                    http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html</a></li>
        </ol>
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        AWS, Elastic Beanstalk, Django, Cloud, PostgreSQL
    </div>
</div><!-- blog 0001-->
<div class="blog" id="blog0001">
    <div class="blog-title-image">
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/firsttutorial.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <span id="title">Building a simple website with Django and ReactJS</span>
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <span id="createdAt">2017-08-29</span>
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/pythonicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jsicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <p>
                In this tutorial I want to demonstrate how to create a simple website with Django for the server side
                and ReactJS for the client one. I will build a fancy and minimalistic picture gallery for this tutorial.
            </p>
            <p>Django is a very versatile framework which lets you build websites as simple as a single page application
                to even enterprise applications. Although we can design our web pages with the built-in template system
                in Django, sometimes we want to use alternative clients to present our website.</p>
            <p>In recent years there have been a boom of javascript frameworks and tools to make amazing webpages and
                ReactJS is one of my favourites given their modular nature which lets you separate different tasks
                and UI elements using independent components which you can use as lego blocks to build your website.</p>
            <p>I will show in this tutorial the easiest way to make these two monsters work together. For that, I will
                create a gallery where you can find some snake pictures and information about the website. I will assume
                that you have already installed django and nodejs. You will find more information about how to install these frameworks in the
                references at the end of this post.</p>
            <p>I have split up this tutorial in two parts:</p>
            <ul>
                <li><a href="#server-side">Part 1: Server side</a></li>
                <li><a href="#client-side">Part 2: Client side</a></li>
            </ul>
            <p>I will start creating a directory for our project. I am going to call it <b>gallery-project</b>.</p>
            <pre><code class="bash">mkdir gallery-project</code></pre>
            <p>This will be our working directory.</p>
            <div class="post-subtitle" id="server-side">
                Part 1: Server side
            </div>
            <p>
                The next step is to create our server project inside this directory. Since we are using Django we run
            </p>
            <pre><code class="bash">django-admin startproject gallery</code></pre>
            <p>
                This will create a folder name <b>gallery</b>. You will find the basic scaffold to build a website
                inside this folder. Django can handle multiple single web application which can be used to build complex
                websites. We will create an application
                for our gallery inside the directory previously created.</p>
            <pre><code class="bash">python manage.py startapp snakes_gallery</code></pre>
            <p>
                This command provides the backbone for our app. One must add this app to the settings file. The settings
                file is inside the subdirectory with the project name. After opening the file one must add the app name
                to the list <b>INSTALLED_APPS</b>.
                You can visualize your website by running</p>
            <pre><code class="bash">python manage.py runserver</code></pre>
            <p>We will ignore the warning about migrations. Migrations are used to create and update our database from
                the models that we will create with django. The site can be accessed typing the next url in your browser
                <a href='https://127.0.0.1:8000'>https://127.0.0.1:8000</a>
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-29+11_07_28-Greenshot.png' alt=''>
            <p>This website will only show pictures for our snakes and information about the website. Therefore we will
                create two models, one model for details of different snakes and the other one for information about the
                website.
            </p>
            <p>
                We open the <b>snakes_gallery</b> directory. Then we open the file <b>models.py</b> and we will insert
                the following two models</p>
            <pre><code class="python">
# This model shows information about snakes
class Snake(models.Model):
    id = models.IntegerField(primary_key=True, unique=True)
    name = models.CharField(max_length=80)
    imageUrl = models.CharField(max_length=250)
    caption = models.CharField(max_length=250)
# This model shows information about my website
class AboutSite(models.Model):
    id = models.IntegerField(primary_key=True, unique=True)
    title = models.CharField(max_length=80)
    author = models.CharField(max_length=80)
    email = models.CharField(max_length=80)
</code></pre>
            <p>
                Now we will create simple views. We aim to show our models in plain text without any style. In that
                case, we will create in-flight instances to test our views. We begin opening the file <b>views.py</b>
            </p>
            <p>
                Firstly we create a view to show two instances of the Snake model.</p>
            <pre><code class="python">
def showSnakeList(request):
    snake1 = Snake(
    id=1,
    name='Python',
    imageUrl='https://upload.wikimedia.org/wikipedia/commons/3/32/Python_molurus_molurus_2.jpg',
    caption='Pythons are a family of nonvenomous snakes found in Africa, Asia, and Australia')
    snake2 = Snake(
    id=2,
    name='Viper',
    imageUrl='https://upload.wikimedia.org/wikipedia/commons/7/70/Crotalus-basiliscus-basiliskenklapperschlange.jpg',
    caption='Vipers are  a family of venomous snakes found in most parts of the world')
    snake3 = Snake(
    id=3,
    name='Boa',
    imageUrl='https://upload.wikimedia.org/wikipedia/commons/a/a7/Boa_constrictor_%282%29.jpg',
    caption='Boas are a family of nonvenomous snakes found in America, Africa, Madagascar, Europe, Asia, and some Pacific Islands.')
    data = serializers.serialize('json', [snake1, snake2, snake3])
    return HttpResponse(data)

</code></pre>

            <p>
                Then we create a view to show information about my website using the AboutSite model.</p>
            <pre><code class="python">
def showInfoAboutSite(request):
    info = AboutSite(id=1, title='Snake Gallery', author='Calvin Hobbes', email='calvin.hobbes@@gmail.com')
    data = serializers.serialize('json', [info])
    return HttpResponse(data)

</code></pre>

            <p>
                The views will show a serialized list of snakes and a serialized object with info of the site. The json
                format is applied to our serialization. Now we will create our endpoints. You must create a new file
                which will contain our endpoint for this app.
                I will name this file <b>urls.py</b> and insert the following lines</p>
            <pre><code class="python">
from django.conf.urls import url
from . import views
urlpatterns = [
    url(r'^$', views.index),
    url(r'^api/info', views.showInfoAboutSite),
    url(r'^api/snakes', views.showSnakeList),
]

</code></pre>

            <p>The first endpoint is our home page for the server side of the application. The other two endpoints will
                feed data to our client. We might redirect the first endpoint to our client homepage. </p>
            <p>Then I will include this urls in the file <b>urls.py</b> inside the directory gallery by adding</p>

            <pre><code class="python">
from django.conf.urls import url, include
from django.contrib import admin
urlpatterns = [
    url(r'^admin/', admin.site.urls),
    url(r'^', include('snakes_gallery.urls')),
]

</code></pre>
            <p>Now you can run your django application and you will find the next results</p>
            <ul>
                <li><a href=”http://127.0.0.1:8000”>http://127.0.0.1:8000/ </a> </li>
                <li><a href=”http://127.0.0.1:8000/api/info”>http://127.0.0.1:8000/api/info </a> </li>
                <li><a href=”http://127.0.0.1:8000/api/snakes”>http://127.0.0.1:8000/api/snakes </a> </li>
            </ul>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-29+16_07_06-Greenshot.png' alt=''><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-29+16_07_01-Greenshot.png' alt=''><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-29+16_06_52-Greenshot.png' alt=''>
            <p>To end this part I want to remind you that any change in your code will be update while you run the
                django server. Before starting to implement the client we need to configure our server to enable
                <b>CORS</b>. This library will do the job
            </p>

            <pre><code class="bash">pip install django-cors-headers
</code></pre>

            <p>Then we add the module to our settings in the sections</p>

            <pre><code class="python">
INSTALLED_APPS = (
    ...
    'pipeline',
    'corsheaders'
)
MIDDLEWARE_CLASSES = (
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.common.CommonMiddleware',
    ...
)
CORS_ORIGIN_WHITELIST = (
    'localhost:3000',
    '127.0.0.1:3000'
)
</code></pre>

            <p>You notice the line <a href='http://127.0.0.1:3000'>127.0.0.1:3000</a>. This socket will be used by our
                client. </p>
            <div class="post-subtitle" id="client-side">
                Part 2: Client side
            </div>

            <p>In this part, I will show you how to use our django server to feed data to our React application.</p>
            <p>First of all, we want to create our backbone for our client. We can do this using the package
                <b>create-react-app</b>. We install this package running
            </p>

            <pre><code class="bash">npm install -g create-react-app
</code></pre>

            <p>Now we can proceed to create our client. We go up to our working directory <b>gallery-project</b> and we
                execute the next line</p>

            <pre><code class="bash">create-react-app gallery-client
</code></pre>

            <p>After waiting, we can enter the new folder and test our client doing</p>

            <pre><code class="bash">npm start
</code></pre>

            <p>Your browser will open a new tab with this url <a
                    href='https://127.0.0.1:3000'>https://127.0.0.1:3000</a>.</p>
            <p>Now we will add this package to handle routes</p>

            <pre><code class="bash">npm install react-router-dom
</code></pre>

            <p>Our first component will be the navegation bar. We create the file <b>Navbar.js</b> in the folder src.
                Then we add the following lines</p>

            <pre><code class="javascript">
import { BrowserRouter, Route, Link } from 'react-router-dom';
import Gallery from './Gallery';
import About from './About';
class Navbar extends Component {
    render() {
    return (
        &lt;BrowserRouter>
        &lt;div>
        &lt;div>
        &lt;div>&lt;a>&lt;Link to="/">Home&lt;/Link>&lt;/a>&lt;/div>
        &lt;div>&lt;a href="">&lt;Link to="/gallery">Gallery&lt;/Link>&lt;/a>&lt;/div>
        &lt;div>&lt;a href="">&lt;Link to="/about">About&lt;/Link>&lt;/a>&lt;/div>
        &lt;/div>
        &lt;Route exact path="/" render={(props) => (&lt;Gallery />)} />
        &lt;Route path="/gallery" render={(props) => (&lt;Gallery />)}/>
        &lt;Route path="/about" render={(props) => (&lt;About />)}/>
        &lt;/div>
    &lt;/BrowserRouter>
    );
    }
}
export default Navbar;

</code></pre>
            <p>This component make use of two components Gallery and About which will be created right now. The
                component About contains information about our website. We need to create a file <b>About.js</b> with
                this code</p>

            <pre><code class="javascript">
import React, { Component } from 'react';
class About extends Component {
    render() {
    return (
        &lt;div>
        &lt;h1>About&lt;/h1>
        &lt;/div>
    );
    }
}
export default About;

</code></pre>

            <p>This will render a blank page with a big title. The data to be rendered will be pull from our server.
                Requests to the server can be implemented as follows. We begin importing the package request</p>
            <pre><code class="javascript">
import request from 'request';
</code></pre>
            <p>
                Then we include two new methods in this component</p>
            <pre><code class="javascript">
constructor(props) {
    super(props);
    this.state = {info : {}};
}
componentDidMount() {
    var self = this;
    request('https://127.0.0.1:8000/api/info', function (error, response, body) {
    var data = JSON.parse(body);
    self.setState({ info : data[0].fields });
    });
}

</code></pre>

            <p>
                The property state contains the objects we will be rendered in our web page. We update the render method
                and pull the information from the server</p>
            <pre><code class="javascript">
render() {
    return (
    &lt;div>
    &lt;h1>About</h1>
    &lt;h3>Site Name: {this.state.info.title}&lt;/h3>
    &lt;h3>Author: {this.state.info.author}&lt;/h3>
    &lt;h3>E-mail: {this.state.info.email}&lt;/h3>
    &lt;/div>
    );
    }

</code></pre>

            <p>
                Finally we create the component Gallery. We create a file <b>Gallery.js</b> in src. Then we include this
                code
            </p>
            <pre><code class="javascript">
import React, { Component } from 'react';
import request from 'request';
class Gallery extends Component {
    constructor(props) {
    super(props);
    const snake = {'name':'name','imageUrl':'url','caption':'caps'};
    this.state = {snakes : [snake,snake,snake]};
    }
    componentDidMount() {
    var self = this;
    request('http://127.0.0.1:8000/api/snakes', function (error, response, body) {
        var data = JSON.parse(body);
        const snake1 = data[0].fields;
        const snake2 = data[1].fields;
        const snake3 = data[2].fields;
        self.setState({snakes : [snake1, snake2, snake3]});
    });
    }
    render() {
    const snakes = this.state.snakes;
    return (
        &lt;div>
        &lt;h1>Snake Gallery&lt;/h1>
        &lt;div>Name: {snakes[0].name}&lt;br/>
        &lt;img src={snakes[0].imageUrl} alt={snakes[0].caption} />
        &lt;/div>
        &lt;div>Name: {snakes[1].name}&lt;br/>
        &lt;img src={snakes[1].imageUrl} alt={snakes[1].caption} />
        &lt;/div>
        &lt;div>Name: {snakes[2].name}&lt;br/>
        &lt;img src={snakes[2].imageUrl} alt={snakes[2].caption} />
        &lt;/div>
        &lt;/div>
    );
    }
}
export default Gallery;

</code></pre>

            <p>That is all. We are ready to start our web application. We open a terminal to start our django server and
                then we open another terminal to start our react application. The results are pretty simple as you can
                see below.<br /></p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+16_05_27-Greenshot.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+16_05_19-Greenshot.png' alt=''
                class="blog-image-md">
            <p>
                You can add some styles if you wish. I will use the Bulma framework for this example. Here the results
            </p>
            <br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+18_22_56-Greenshot.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+18_23_08-Greenshot.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+18_23_18-Greenshot.png' alt=''
                class="blog-image-md">

        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <ol>
            <li><a href='https://www.djangoproject.com/start/'>https://www.djangoproject.com/start</a></il>
            <li><a href='https://facebook.github.io/react/'>https://facebook.github.io/react</a></il>
            <li><a
                    href='https://github.com/facebookincubator/create-react-app'>https://github.com/facebookincubator/create-react-app</a>
                </il>
            <li><a
                    href='https://reacttraining.com/react-router/web/guides/philosophy'>https://reacttraining.com/react-router/web/guides/philosophy</a>
                </il>
            <li><a href='http://bulma.io'>http://bulma.io</a></il>
        </ol>
        You can get the source for this example
        <a
            href='https://github.com/herb787/tutorial-django-gallery'>https://github.com/herb787/tutorial-django-gallery</a>
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        Django, Python, ReactJS, JavaScript, Website
    </div>
</div>
                <!-- INSERT ALL BLOGS -->
                <div class="blog-links">
                    <span id="left-page2" class="blog-previous-link">
                        <h3><u><span id="previousUrl">Previous</span></u></h3>
                    </span>
                    <span id="right-page2" class="blog-next-link">
                        <h3><u><span id="nextUrl">Next</span></u></h3>
                    </span>
                </div>
            </div>
        </div>
        <div class="footer" id="footer">
            <div class="box-footer">
                <div class="left-footer">
                    Copyright © 2021 Hakaguzare<br /><br />
                    <i class="fa fa-github-alt"></i> <a href="https://github.com/herb786">Github</a><br />
                    <i class="fa fa-legal"></i> Terms of Use<br />
                    <i class="fa fa-envelope"></i> <a href="mailto:alistair.caller@gmail.com">Contact</a>
                </div>
                <div class="right-footer">
                    Powered by Github Pages<br /><br />
                    <img src="img/octocat-powered-h.png" alt="" id="image3" class="img-logo-footer" />
                    <img src="img/js-powered.svg" alt="" id="image3" class="img-logo-footer" />
                    <img src="img/html-powered.svg" alt="" id="image3" class="img-logo-footer" />
                    <br /><br />
                </div>
            </div>
        </div>

        <div class="up-arrow" id="up-arrow-img">
            <img src="img/pointing-up.png" class="up-arrow-img">
        </div>

        <div class="up-arrow" id="down-arrow-img">
            <img src="img/pointing-down.png" class="up-arrow-img">
        </div>

</body>
<script type="text/javascript" src="haka.js"></script>

</html>