<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-72135203-5"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-72135203-5');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Fugaz+One' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700">
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <meta property="og:title" content="HACAGUSAE" />
    <meta property="og:url" content="https://hacagusae.appspot.com" />
    <meta property="og:type" content="article" />
    <link rel="stylesheet" type="text/css" href="css/main-theme/alasdair-blog.css">
    <link rel="stylesheet" type="text/css" href="css/main-theme/alasdair-content.css">
    <!--script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script-->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML'
        async></script>
    <link rel="stylesheet" type="text/css" href="css/hl-styles/darkula.css">
    <script type="text/javascript" src="highlight.pack.js"></script>
    <!--script>hljs.initHighlightingOnLoad();</script!-->
    <!-- Styles -->
    <style>
        body {
            font-family: 'Lato';
        }

        .fa-btn {
            margin-right: 6px;
        }

        .up-arrow-img {
            position: fixed;
            bottom: 0;
            right: 0;
            margin-bottom: 10px;
            margin-right: 10px;
        }
    </style>
    <title>Hakaguzare's Site</title>
</head>

<body>
    <div id="navbar">
        <div class="toolbar" id="toolbar">
            <div class="item">
                <a href="./inicio.html">BITACORA</a>
            </div>
            <div class="item">
                <a href="./apps.html#es">APPS</a>
            </div>
            <div class="item">
                <a href="./recursos.html">RECURSOS</a>
            </div>
            <div class="item">
                <a href="./contacto.html">CONTACTO</a>
            </div>
            <div class="item">
                <a href="./busqueda.html">BUSCAR</a>
            </div>
            <div class="item">
                <a href="./index.html">🇺🇸EN</a>
            </div>
            <div class="item">
                <a href="./inicio.html">🇪🇸ES</a>
            </div>
        </div>
    </div>
    <div class="header" id="header" data-last-blog="0021">
        <div class="title" >Hakaguzare</div>
        <div class="owner"><span id="tagline"></span></div>
    </div>
    <div id="post-fragment">
        <div id='blog-scrollview'>
            <div class='blog-container'>
                <div class="blog-links">
                    <span id="left-page" class="blog-previous-link">
                        <h3><u><span id="previousUrl">Anterior</span></u></h3>
                    </span>
                    <span id="right-page" class="blog-next-link">
                        <h3><u><span id="nextUrl">Siguiente</span></u></h3>
                    </span>
                </div>
                <div class="blog-quote"><i><span id="cita"></span></i></div>
                <!-- INSERT ALL BLOGS -->
                <!-- blog 0021-->
<div class="blog" id="blog0021">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/curiosidades.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Los 12 factores para aplicativos en la nube
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2019-02-10
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                En esta publicación veremos un series de pautas que algunos desarrolladores siguen cuando
                necesitan una aplicación que será desplegada en la nube digital. Este tipo de aplicaciones usan la
                infrastructura
                preconfigurada por los servicios de alojamiento y son conocidos como PaaS de sus siglas &laquo;Platform
                as a service&raquo;
                traducida literalmente en plataforma como servicio.
                Este conjunto de pautas recopiladas es llamada doce-factores del inglés
                &laquo;twelve-factor&raquo;.
            </p>
            <p>
                Compañías que ofrecen este tipo de infraestructurada que permite el escalamiento de los recursos según
                el tráfico y concurrencia de las aplicaciones son Amazon AWS, Google Cloud Engine, Azure PaaS, Cloud
                Foundry, PythonAnywhere y otros.
            </p>
            <p>
                Estas pautas sirven en general para dar un punto de partida a los nuevos desarrolladores mientras
                adquieren un visión más completa del funcionamiento de las aplicaciones en una nube que servirá para
                desarrollar sus propias propuestas de implementación de acuerdo a los requerimientos. Algunos autores
                han sugerido adiciones en está lista de pautas y pueden ser encontradas en la literatura.
            </p>
            <p>
                Estás pautas las resumimos a continuación:
            </p>
            <dl>
                <dt><strong>Código fuente</strong></dt>
                <dd>Evitar códigos fuentes específicos para desarrollo, pruebas y producción. Debería tambíen existir un
                    código fuente por aplicación y evitar un código fuente de múltiples aplicaciones. Por ejemplo
                    podemos separar tener una aplicación específica para servico al consumidor y otra aplicación para la
                    tienda. En caso de que existe dependencias comunes, se debería crear una librería.</dd>
                <dt><strong>Dependencias</strong></dt>
                <dd>Dado que usamos infraestructura externa, debemos asumir que ciertas librerías no estarán instaladas.
                    En desarrollo deberíamos trabajar en un entorno aislado simulando la infraestructura externa y crear
                    los ficheros de inicialización requeridos por la aplicación. Por ejemplo en python podemos crear un
                    entorno aislado con <em>virtualenv</em> y crear un fichero <em>requirements.txt</em> con las
                    librerías que se instalarán con <em>pip</em>. Luegos de crear el entorno aislado podemos crear el
                    proyecto base de nuestra aplicación.</dd>
                <dt><strong>Configuración</strong></dt>
                <dd>Siguiendo este razonamiento, la configuración de las rutas para conectar a la base de datos o los
                    puerto de entrada para cada ambiente de trabajo deberían ser guardados como variables del sistema.
                    En desarrollo con máquinas <em>Unix</em> usamos por ejemplo <em>export POSTGRESQL=...</em>,
                    <em>export BUCKET_S3=..</em>, <em>export MAPS_API_KEY=..</em> o en la nube donde usualmente existe
                    una consola de configuración.</dd>
                <dt><strong>Servicios de respaldo</strong></dt>
                <dd>Todo servicio externo a la aplicación sería un recurso como bases de datos, servidores de correo,
                    sistemas de memoria. En el desarrollo, la aplicación sólo consume estos recursos y se conecta con
                    los ficheros de configuración. Su configuración y disponibilidad es tarea de los operadores de estos
                    servicios.</dd>
                <dt><strong>Compilación, despliegue y ejecución</strong></dt>
                <dd>La compilación generará una aplicación lista para el despliegue a los diferentes entornos y su
                    ejecución en diferentes máquinas virtuales o instancias. Cada uno de estás tareas son
                    independientes. En python usualmente se generan ficheros binarios con extensión <em>pyc</em>. Estos
                    ficheros serán interpretados por la máquina virtual de python.</dd>
                <dt><strong>Procesos independientes</strong></dt>
                <dd>Cada vez que una instancia de la aplicación se ejecuta, un proceso es creado. En la nube los
                    procesos son creados y destruídos a demanda. Por eso no debería guardarse datos o crear ficheros
                    temporales para usarse en futuros procesos. Si es necesario usar tales datos, deberíamos tratarlos
                    como recursos externos. Así los procesos no tienen un estado previo del cuál pudiera depender la
                    aplicación.</dd>
                <dt><strong>Puertos vinculantes</strong></dt>
                <dd>Aplicaciones suelen ejecutarse en un servidor web los cuales se encargan de los dominios y puertos
                    donde se servirán las aplicaciones así como llamar el lenguaje correspondiente para ejecutar la
                    aplicación. Por ejemplo <em>Nginx</em> llamará <em>java -jar webapp.war ...</em>, <em>Apache</em>
                    llamará <em>php index.php</em>, <em>Puma</em> llamará <em>ruby webapp.rb</em> y veremos este mismo
                    patrón en otros lenguajes. Ahora con la nube, el servidor es una librería o dependencia adicional
                    donde la aplicación elige el puerto donde se recibirá conexiones. Por ejemplo <em>django</em> tiene
                    su propio servidor y podemos vincular un puerto por medio de la orden <em>python manage.py runserver
                        8080</em> o para aplicaciones en java usando <em>jetty</em> y sus ficheros de configuración.
                </dd>
                <dt><strong>Concurrencia</strong></dt>
                <dd>Algunas aplicaciones necesitan tareas y procesos que se ejecuten periódicamente como crear
                    servidores web, enviar notificaciones, mensajes, crear copias de respaldo, consolidar base de datos
                    entre otras. Es ideal que estás tareas sean escalables y cada una tenga un proceso diferente que
                    pueda reiniciarse en caso de falla o interrupciones repentinas. En python tenemos el fichero
                    <em>Procfile</em> que permite indicar los procesos que se deben ejecutar y el gestor de procesos
                    sería <em>Foreman</em>.</dd>
                <dt><strong>Descarte</strong></dt>
                <dd>Los procesos pueden ser iniciados o descartados rápidamente sin producir fallas o corrupción de
                    datos.</dd>
                <dt><strong>Similaridad</strong></dt>
                <dd>Está idea surge tras encontrar diferencias entre los recursos usados en ambientes de prueba,
                    desarrollo y producción, el personal, y el tiempo del despliegue. Por ejemplo usar una base de datos
                    local como sqlite en desarrollo y postgres en producción. El objetivo de la nube es recortar estos
                    tiempos entre el desarrollo y producción además de reducir las diferencias entre os recursos usados
                    por cada ambiente.</dd>
                <dt><strong>Trazas</strong></dt>
                <dd>Este factor indica que las trazas no deberían ser guardadas en archivos si no que debemos dejar que
                    la aplicación en ejecucíon produzca las traza continuamente y con herramientas de la consola
                    capturar las trazas cuando su análisis sea requerido.</dd>
                <dt><strong>Gestión de procesos</strong></dt>
                <dd>En el caso de procesos infrecuentes como migrar bases de datos, ejecución de tareas de inpección y
                    mantenimiento, es bueno trabajar en un entorno aislado que permita ejecutar estos procesos como se
                    hace en el caso de <em>ruby</em> o <em>python</em>. Estas tareas administrativas deberían ser
                    incluídas en la aplicación misma y hacer uso de la misma configuración de recursos que la aplicación
                    usa en el ambiente donde se desplega.</dd>
            </dl>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://12factor.net/">
                    The twelve-factor App.
                </a>
            </li>
            <li>
                <a href="http://pivotal.io/beyond-the-twelve-factor-app">
                    Beyond the Twelve-Factor App
                </a>
            </li>
            <li>
                <a href="https://adam.herokuapp.com/past/2011/5/9/applying_the_unix_process_model_to_web_apps/">
                    Applying the Unix Process Model to Web Apps
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Cloud, Mobile Architecture, Computer Science
    </div>
</div><!-- blog 0020-->
<div class="blog" id="blog0020">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/curiosidades.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Generación de números aleatorios
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2019-02-05
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Está nueva publicación surge para responder cuestiones que rodean al origen secreto de los números
                aleatorios.
                Estos números tienen múltiples aplicaciones como simulaciones, finanzas, diseño experimental,
                videojuegos o seguridad informática.
            </p>
            <p>
                Es costumbre usar las librerías para cada lenguage de programación asumiendo que los números generados
                son infinitos y que no se repetirán. Aquí veremos los mecanismos detrás de los números que generamos.
            </p>
            <h2>
                <b>Números Pseudo-Aleatorios</b>
            </h2>
            <p>
                Primero debemos distinguir entre números aleatorios y pseudo-aleatorios.
            </p>
            <p>
                Los números aleatorios son generados por un proceso indeterminista y por tanto no podemos predecir los
                números generados.</p>
            <p>
                Los números pseudo-aleatorios son generados por algoritmos usando un estado inicial o semilla.
                Cada semilla producirá la misma serie de números,
                por tanto siempre podemos conocer la secuencia de números generados si sabemos el algoritmo y el estado
                inicial.
                Estos números en general deben tener distribución uniforme, es decir, cada número tiene la misma
                probabilidad.
                Los números generados pueden usarse para crear otras distribuciones estadísticas (normal, exponencial,
                poissoniana, etc)
            </p>
            <p>
                En computación se trata de compensar este determinismo usando semillas en base al ruido eléctrico del
                computador,
                el número de teclas presionadas, los ficheros leídos, el tiempo del sistema entre otros, que no siguen
                un patrón determinista.
                Estas fuentes de entropía para la generación de números aleatorios son algunas de las tantas mencionadas
                en el protocolo RFC 4086 por el IEEE.
            </p>
            <p>
                Una característica importante de un algoritmo de generación
                es su período que indica el mínimo número de guarismos generados antes de una repetición de la
                secuencia.
                En el transcurso de las últimas décadas han aparecido nuevos algoritmos de generación pero en su mayoría
                de un corto periodo,
                pero el primer algoritmo de período astronómico fue creado
                por Matsumoto y Nishimura conocido como Mersenne Twister.
            </p>
            <p>
                En general un buen algoritmo de generación tiene las siguientes cualidades:
            <ul>
                <li><i>Uniformidad</i> ya que los números deben obedecer la distribución uniforme.</li>
                <li><i>Independencia</i> de una secuencia finita de números adyacentes de otra. Esta secuencia es una
                    parte de la secuencia completa.</li>
                <li><i>Período largo</i> para disminuir la notoriedad de las correlaciones entre números.</li>
                <li><i>Inicialización correcta</i> con estados iniciales sin correlaciones (números aleatorios como
                    semillas).</li>
                <li><i>Impredecibilidad</i> de modo que no hay un algoritmo eficiente para predecir los números.</li>
                <li><i>Eficiencia</i> en la generación de números. Sólo unas cuantas operaciones binarias o aritméticas
                    son usadas por cada número.</li>
                <li><i>Capacidad de repetición</i> de modo que podemos tener siempre la misma secuencia si conocemos el
                    estado inicial. </li>
                <li><i>Portabilidad</i> de modo la secuencia generada no depende de la arquitectura del computador.</li>
            </ul>
            </p>
            <p>Ahora veámos los algoritmos de generación y sus períodos.</p>
            <table class="blog-table">
                <thead>
                    <tr>
                        <th>Algoritmo</th>
                        <th>Período</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td width="50%">Park & Miller</td>
                        <td width="50%">\(2^{31}-1\)</td>
                    </tr>
                    <tr>
                        <td>Knuth</td>
                        <td>\(2^{32}\)</td>
                    </tr>
                    <tr>
                        <td>Mersenne-Twister</td>
                        <td>\(2^{19937}-1\)</td>
                    </tr>
                    <tr>
                        <td>KISS</td>
                        <td>\(2^{127}\)</td>
                    </tr>
                    <tr>
                        <td>COMBO</td>
                        <td>\(2^{61}\)</td>
                    </tr>
                </tbody>
            </table>
            <h2>
                <b>Algoritmos de generación en diferentes lenguages</b>
            </h2>
            <table class="blog-table">
                <thead>
                    <tr>
                        <th>Lenguaje</th>
                        <th>Por defecto</th>
                        <th>Otros</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td width="20%">Java</td>
                        <td width="30%">L'Ecuyer 99</td>
                        <td width="50%"></td>
                    </tr>
                    <tr>
                        <td>C++</td>
                        <td>Mersenne Twister</td>
                        <td>RANLUX, Linear Congruential, Lagged Fibonacci y más.</td>
                    </tr>
                    <tr>
                        <td>Python</td>
                        <td>Mersenne Twister</td>
                        <td>Wichmann-Hill</td>
                    </tr>
                    <tr>
                        <td>PHP</td>
                        <td>Mersenne Twister</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>R</td>
                        <td>Mersenne Twister</td>
                        <td>Wichmann-Hill, Marsaglia-Multicarry, Super-Duper, Knuth-TAOCP, Knuth-TAOCP-2002 y más</td>
                    </tr>
                    <tr>
                        <td>Fortran95</td>
                        <td>Marsaglia's KISS</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://en.wikipedia.org/wiki/Pseudorandomness">
                    Sobre pseudo-aleatoriedad.
                </a>
            </li>
            <li>
                <a href="http://www.pcg-random.org/rng-basics.html">
                    Random Number Generation Basics
                </a>
            </li>
            <li>
                <a href="https://tools.ietf.org/html/rfc4086">
                    Randomness Requirements for Security (RFC 4086)
                </a>
            </li>
            <li>
                <a href="https://maths-people.anu.edu.au/~brent/pd/rpb217.pdf">
                    Fast and Reliable Random Number Generators for Scientific Computing
                </a>
            </li>
            <li>
                <a href="https://en.cppreference.com/w/cpp/numeric/random">
                    C++ Pseudo-random number generation
                </a>
            </li>
            </li>
            <li>
                <a href="https://cran.r-project.org/web/views/Distributions.html">
                    R Probability Distributions
                </a>
            </li>
            </li>
            <li>
                <a href="https://cran.r-project.org/web/packages/randtoolbox/vignettes/fullpres.pdf">
                    A note on random number generation
                </a>
            </li>
            </li>
            <li>
                <a href="https://maths-people.anu.edu.au/~brent/pd/rpb217.pdf">
                    Fast and Reliable Random Number Generators for Scientific Computing
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Random Numbers, Computer Science
    </div>
</div><!-- blog 0019-->
<div class="blog" id="blog0019">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/cherryheader.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Un Sitio Web con CherryPy y Google App Engine
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2019-01-30
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/pythonicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Millones de sitios web son construcciones simples como bitácoras, galerías, pequeños comercios,
                catálogos que no necesitan
                un complejo y pesado paquete de librerías para conseguir el resultado deseado.
            </p>
            <p>
                Muchos de estos paquetes de librerías como Django, Spring, u otros se rigen por una determinada
                arquitectura
                que requiere horas de trabajo para adaptarla a cada situación, por ejemplo habrá que crear variadas
                configuraciones
                para rutas, vistas, recursos, conexiones a base de datos, etc. Aparte de la configuración tendrás un
                grupo inútil de librerías que las usarás o como sucede en munchos casos solo ocupan espacio y retardan
                el despliegue a producción.
            </p>
            <p>
                Usualmente las construcciones más simples pueden simplificarse a unas cuantas enlaces y plantillas,
                y lo demás constituye el contenido. Esa fue la razon que me llevo actualizar este sitio inicialmente
                basado en Spring.
                Este sitio con un simple servicio web fue creado con sólo CherryPy y JQuery
                y su lógica consiste sólo de unos cientos de líneas.
                Aparte del desarrollo, el desplique usando la nube de Google, fue completamente sencillo y rápido.
            </p>
            <h3>
                <b>Creación del entorno de trabajo</b>
            </h3>
            <p>
                Primero crearemos un entorno virtual donde se instalará python y
                las bibliotecas que necesitamos para ejecutar nuestro sitio web.
                Este entorno de trabajo se encontarará en un folder diferente al folder raíz del proyecto.
                Usualmente el proyecto y el entorno de trabajo se encuentra al mismo nivel en el árbol de directorios.
            </p>
            <pre><code class="bash">
            |----> env
            |----> mi-sitio-web
            </code></pre>
            <p>Usaremos el siguiente comando para crear el entorno virtualizado y activarlo</p>
            <pre><code class="bash">
            virtualenv env
            source env/bin/activate
            </code></pre>
            <p>Ahora crearemos el folder para el proyecto</p>
            <pre><code class="bash">
            mkdir mi-sitio-web
            </code></pre>
            <p>Necesitamos crear un fichero donde indicaremos los módulos a utilizar.
                Este fichero se llamará <b>requeriments.txt</b> y su contenido es el siguiente</p>
            <pre><code class="bash">
            CherryPy==18.1.0
            </code></pre>
            <p>Ahora ejecutamos el siguiente comando para instalar en el entorno virtual
                las bibliotecas definidas en este archivo</p>
            <pre><code class="bash">
            pip install  -r requirements.txt
            </code></pre>
            <p>
                Ahora tenemos lo esencial para poder construir una simple página web.
            </p>
            <h3>
                <b>Punto de entrada del sitio web</b>
            </h3>
            <p>
                Una simple página web en blanco con CherryPy es simplemente
            </p>
            <pre><code class="python">
            #!/usr/bin/python
            # -*- coding: utf-8 -*-
            
            import cherrypy
            class MiPaginaWeb(object):
            
                @cherrypy.expose
                def index(self):
                    return ''
            
            if __name__ == '__main__':
                web = MiPaginaWeb()
                cherrypy.tree.mount(web, '/')
                cherrypy.engine.start()
                cherrypy.engine.block()
            </code></pre>
            <p>Luego de guardar este fichero, digamos como <b>miweb.py</b>
                y lo ejecutemos como cualquier otro fichero python veremos el resultado</p>
            <pre><code class="bash">
            $ python miweb.py
            # en caso uses python 2.7 por defecto usa este comando
            $ python3 miweb.py
            </code></pre>
            <p>Algunas veces el puerto de acceso 8080 usado por CherryPy está ocupado. Podemos usar otro puerto
                añadiendo esta línea</p>
            <pre><code class="python">
            if __name__ == '__main__':
                cherrypy.config.update({'server.socket_port': 9000})
                web = MiPaginaWeb()
                ...
            </code></pre>
            <p>Agreguemos ahora una ruta hacia la página de contacto. Lo conseguiremos actualizando la clase MiPaginaWeb
            </p>
            <pre><code class="python">
            ...
            class MiPaginaWeb(object):
            
                @cherrypy.expose
                def index(self):
                    return ''
            
                @cherrypy.expose
                def contacto(self):
                    return 'e-mail: pablito.perez@mail.io'
            
            if __name__ == '__main__':
                ...
            </code></pre>
            <p>Si navegamos a <b>localhost:9000/contacto</b> veremos una página con el correo de contacto.</p>
            <p>Ahora creemos un mensaje de bienvenida personalizada con el nombre del usuario en la ruta bienvenida.
                El código puede implementarse de este modo
            </p>
            <pre><code class="python">
            ...
            class MiPaginaWeb(object):
            
                @cherrypy.expose
                def index(self):
                    return ''
            
                @cherrypy.expose
                def contacto(self):
                    return 'e-mail: pablito.perez@mail.io'
            
                @cherrypy.expose
                def bienvenido(self, nombre):
                    return '¡Bienvenido {}!'.format(nombre)
            
            if __name__ == '__main__':
                ...
            </code></pre>
            <p>Si navegamos al enlace <b>localhost:9000/bienvenido?nombre=Fulano</b> veremos el resultado <u>¡Bienvenido
                    Fulano!</u></p>
            <h3>
                <b>Sitio dinámico sin plantillas</b>
            </h3>
            <p>
                Hasta ahora sólo hemos visto texto simple en nuestra páginas web.
                Usualmente paquetes de desarrollo como Django o Spring o Laravel usará Jinja, Thymeleaf o Blade para
                crear plantillas web html
                que visualizará el contenido consultado en los bancos de datos. CherryPy puede usar Jinja para este
                caso.
                Otra solución sería manipular el fichero html como una cadena de texto y alterarla,
                podemos usar referencias para ubicar las líneas que debemos cambiar o si necesitamos insertar contenido
                adicional.
            </p>
            <p>Usemos la segunda solución y creemos un fichero <b>inicio.html</b> con algunas referencias</p>
            <pre><code class="html">
            &lt;html>
            &lt;head>
            &lt;title>MI WEB&lt;/title>
            &lt;/head>
            &lt;body>
                &lt;fecha/>
            &lt;/body>
            &lt;/html>
            </code></pre>
            <p>Aquí cree una referencia para insertar la fecha actual en mi página de inicio.
                Actualicemos nuestro función <b>index</b> en la clase <b>MiPaginaWeb</b> como sigue</p>
            <pre><code class="python">
            @cherrypy.expose
            def index(self):
                fichero = open('inicio.html','r')
                contenido = fichero.read()
                return contenido.replace('&lt;fecha/>','12-10-2019')
            </code></pre>
            <p>Cuando navegamos a <b>localhost:9000</b> veremos una página web en blanco con la fecha.</p>
            <h3>
                <b>Creación de una simple API</b>
            </h3>
            <p>
                Usualmente queremos proveer la información en nuestra base de datos a otras aplicaciones
                por medio de una interfaz usando las llamadas GET, POST, PUT y DELETE del protocolo HTTP.
                CherryPy permite crear estas interfaces de manera sencilla.
            </p>
            <p>
                Agreguemos una API para obtener una lista de usuarios con la ruta <b>api/usuarios</b>.
                Modificaremos nuestro fichero de esta manera
            </p>
            <pre><code class="python">
            #!/usr/bin/python
            # -*- coding: utf-8 -*-
            
            import cherrypy
            class MiPaginaWeb(object):
            ....
            
            @cherrypy.expose
            class ServicioWebUsuario(object):
                @cherrypy.tools.json_out()
                def GET(self):
                    return [{"nombre":"Fulano"},{"nombre":"Mengano"},{"nombre":"Sutano"}]
            
            if __name__ == '__main__':
                cherrypy.config.update({'server.socket_port': 9000})
                apiUsuarios = {
                    '/': {
                        'request.dispatch': cherrypy.dispatch.MethodDispatcher(),
                        'tools.response_headers.on': True,
                        'tools.response_headers.headers': [('Content-Type', 'application/json')],
                    }
                }
                web = MiPaginaWeb()
                cherrypy.tree.mount(web, '/')
                cherrypy.tree.mount(ServicioWebUsuario(), '/api/usuarios', apiUsuarios)
                cherrypy.engine.start()
                cherrypy.engine.block()
            </code></pre>
            <p>Cuando navegamos a <b>localhost:9000/api/usuarios</b> veremos un fichero json con los usuarios.</p>
            <h3>
                <b>Despliegue con Google App Engine</b>
            </h3>
            <p>
                Para desplegar nuestro sitio web usando Google App Engine primero debemos crear el fichero
                <b>app.yaml</b>
                con el siguiento contenido
            </p>
            <pre><code code="bash">
            runtime: python37
            entrypoint: python miweb.py
            </code></pre>
            <p>
                Asumiremos que existe un proyecto para alojar el sitio web configurado en el panel de administrador de
                google.
                El enlace al panel de administrador tiene este formato
                <b>https://console.cloud.google.com/home/dashboard?project=mi-proyecto-web</b>.
            </p>
            <p>
                Ahora necesitamos instalar una utilidad llamada <b>Google Cloud SDK</b>.
                Luego de descargar la utilidad debemos descomprimirla e instalarla de este modo
            </p>
            <pre><code code="bash">
            $ cd google-cloud-sdk
            $ ./install.sh
            </code></pre>
            <p>
                Ahora debemos escoger el proyecto donde se alojará el sitio web. Este paso lo haremos así
            </p>
            <pre><code code="bash">
            $ gcloud init
            // aparecerá este mensaje
            $ To continue, you must log in. Would you like to log in (Y/n)? Y
            // tecleamos "y" para identificarnos con nuestros credenciales
            // luego de identificarnos aparecerá el mensaje
            $ Pick cloud project to use:
                [1] [my-project-1]
                [2] [my-project-2]
                ...
                Please enter your numeric choice:
            // tecleamos el número del proyecto que aparece en el terminal si hubiera más que uno
            </code></pre>
            <p>Antes de alojar nuestro sitio web hagamos un cambio en nuestro código
                para usar el puerto de acceso definido por el sistema</p>
            <pre><code class="python">
            import os
            import cherrypy
            ...
            
            if __name__ == '__main__':
                cherrypy.config.update({'server.socket_port': int(os.getenv('PORT', '9000'))})
            ...
            </code></pre>
            <p>
                Ahora para desplegar nuestro sitio web simplemente debemos dirigirnos a nuestro proyecto
                y ejecutar el siguiente comando
            </p>
            <pre><code code="bash">
            // Si usas python3 por defecto ejecuta este comando con la ruta a python 2.7 antes del despliegue
            export CLOUDSDK_PYTHON=/usr/local/bin/python
            gcloud app deploy
            </code></pre>
            <p>El siguiente comando abrirá el navegador cargando nuestro sitio web</p>
            <pre><code code="bash">
            gcloud app browse
            </code></pre>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://docs.cherrypy.org/en/latest/">
                    Sitio Web de CherryPy.
                </a>
            </li>
            <li>
                <a
                    href="https://github.com/GoogleCloudPlatform/python-docs-samples/tree/master/appengine/standard_python37/hello_world">
                    Ejemplo provisto por Google Cloud.
                </a>
            </li>
            <li>
                <a href="https://cloud.google.com/sdk/docs/quickstart-macos">
                    Guía para instalar la utilidad Google Cloud SDK.
                </a>
            </li>
            <li>
                <a href="https://cloud.google.com/appengine/docs/standard/python3/quickstart">
                    Guía para crear una página web con python.
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        CherryPy, REST, Web Services, Python, Google Cloud
    </div>
</div><!-- blog 0018-->
<div class="blog" id="blog0018">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Uso de Firestore para conocer el mercado
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-10-25
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                La recopilación de información acerca de la conducta de los consumidores es importante para mejorar el
                servicio y el contenido que les ofrecemos.</p>
            <p>
                En esta era de la información, disponemos de variadas herramientas que pueden ayudarnos a recopilar
                estos datos. Podemos elaborar cuestionarios, censos, votaciones para capturar el estado de ánimo presente y las
                preferencias del público objetivo.
            </p>
            <p>
                La información suministrada de manera instantánea nos da la oportunidad de reaccionar immediatamente
                a futuros acontecimientos y estar en la vanguardia de la innovación creando soluciones a muchas
                situaciones.
            </p>
            <p>
                Esta vez nos enfocaremos en crear una aplicación para obtener votos usando el banco de datos Firestore.
                Los datos almacenados en la nube representan la preferencia de las plataformas de nuestros usuarios.
                Asumiremos de antemano el conocimiento del uso y creación de proyectos en el panel administrativo de Firebase por parte de los lectores.
            </p>
            <h3>
                <b>Creación de un nuevo proyecto</b>
            </h3>
            <p>
                Antes de crear nuestra aplicación, debemos generar el banco de datos donde almacenaremos los votos de
                nuestros usuarios. En este tutorial usaré un servicio ofrecido por Google llamado <b>Firestore</b>. Este es un banco de
                datos no relacional en tiempo real que guarda los datos en la nube.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-create-project.png' alt=''
                class="blog-image-md"><br />
            <p>
                Después de crear el proyecto en el panel de admistrador, debemos dirigirnos al panel izquierdo y
                localizar la opción <b>database</b>
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-find-database.png' alt=''
                class="blog-image-md"><br />
            <p>
                Usaremos el modo de pruebas de manera que podemos modificar nuestro banco de datos sin realizar más
                configuraciones.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-database-rules.png' alt=''
                class="blog-image-md"><br />
            <p>
                Luego necesitaremos actualizar las reglas que permiten el acceso externo de modo anónimo sino deberíamos
                usar la identificación de usarios por Google Plus.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-update-rules.png' alt=''
                class="blog-image-md"><br />
            <p>
                También debemos crear el fichero de configuración para este servicio que guardaremos en el folder de la
                aplicación.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-get-google-json.png' alt=''
                class="blog-image-md"><br />
            <h3>
                <b>Creación del Banco de Datos</b>
            </h3>
            <p>
                Ahora nos enfocaremos en nuestro banco de datos.
                El banco de datos en este caso es una colección de documentos.
                Estos documentos representan los datos que buscamos capturar.
                En nuestro caso necesitamos una colección para las plataformas iOS y Android.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-create-platform-collection.png' alt=''
                class="blog-image-md"><br />
            <p>
                Agregaremos un documento o entrada por plataforma.
                En lugar de usar la clave auto-generada usaremos el nombre de las plataformas.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-create-ios-doc.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-db-platforms.png' alt=''
                class="blog-image-md"><br />
            <p>
                Los documentos creados puede también agrupar otras colecciones como una colección de dispositivos usando
                Android
                o una colección de usuarios usando Android. Como necesitamos cierta información de los usuarios podemos
                agregar un nuevo documento por cada votante conteniendo esta información.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-add-android-customer.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-ios-customer.png' alt=''
                class="blog-image-md"><br />
            <p>
                La variable más importante en nuestra colección es el campo <b>count</b>.
                Este campo cambiará cada vez que un voto sea registrado.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-add-field-count.png' alt=''
                class="blog-image-md"><br />
            <h3>
                <b>La aplicacion de votación</b>
            </h3>
            <p>
                En nuestra aplicación agregaremos dos dependencias, una por parte de firebase y otra de firestore.
                Debemos tener en consideración los permisos de acceso a Internet en el fichero de configuración y
                también verificar la presencia del fichero <b>google-services</b> en el folder raíz del proyecto.
            </p>
            <pre><code class="gradle">
            implementation 'com.google.firebase:firebase-core:16.0.4'
            implementation 'com.google.firebase:firebase-firestore:17.1.1'
            </code></pre>
            <p>
                Luego de configurar el proyecto, podemos crear una instancia de firestore que nos
                permitirá conectarnos a la nube y obtener una referencia a nuestra colección de plataformas.
            </p>
            <pre><code class="kotlin">
            ...
            var mDatabase: FirebaseFirestore? = null
            var mPlatformsCollection: CollectionReference? = null
            ...
            mDatabase = FirebaseFirestore.getInstance()
            val settings = FirebaseFirestoreSettings.Builder()
                .setTimestampsInSnapshotsEnabled(true)
                .build()
            mDatabase!!.firestoreSettings = settings
            mPlatformsCollection = mDatabase?.collection("platforms")
            ...
            </code></pre>
            <h3>
                <b>Captura de datos simultánea</b>
            </h3>
            <p>
                Podemos leer los datos de nuestro banco de datos usando la referencia creada en el paso anterior.
                Luego de conectarnos, haremos guardia por cambios en su contenido para actualizar los datos en nuestra
                aplicación.
                La implementación es hecha de este modo
            </p>
            <pre><code class="kotlin">
            ...
            val androidRef = mPlatformsCollection?.document("Android")
            androidRef?.addSnapshotListener(object : EventListener&lt;DocumentSnapshot> {
                override fun onEvent(snapshot: DocumentSnapshot?, e : FirebaseFirestoreException?) {
                    if (e != null) {
                        Log.w(TAG, "Listen failed.", e)
                        return
                    }
                    if (snapshot != null && snapshot.exists()) {
                        Log.d(TAG, "Current data: " + snapshot.data!!)
                        androidVotes = snapshot.data!!["count"] as Long
                        showVotes()
                    } else {
                        Log.d(TAG, "Current data: null")
                    }
                }
            })
            ...
            </code></pre>
            <h3>
                <b>Registrando votos</b>
            </h3>
            <p>
                En primer lugar debemos obtener una referencia a la plataforma que debe registrar el voto usando su
                identificador.
                En nuestro caso usamos el nombre de la plataforma.
                Luego demos crear un estructura de datos con los campos que actualizaremos.
                Esta estructura será usada por nuestro banco de datos de esta manera
            </p>
            <pre><code class="kotlin">
            ...
            val vote = HashMap&lt;String, Any>()
            vote.put("count", platformVotes+1)
            mPlatformsCollection?.document(platformName)?.set(vote)?.
                addOnSuccessListener(object: OnSuccessListener&lt;Void> {
                    override fun onSuccess(aVoid : Void?) {
                        Log.d(TAG, "DocumentSnapshot successfully written!")
                    }
                })?.
                addOnFailureListener(object: OnFailureListener {
                    override fun onFailure(e : Exception) {
                        Log.w(TAG, "Error writing document", e)
                    }
                })
            ...
            </code></pre>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-poll-results.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/post0018-poll-app.png' alt=''
                class="blog-image-md"><br />
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://github.com/herb786/tutorial-firebase-database-poll">
                    Github repository for this tutorial.
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/NoSQL">
                    Wikipedia article on NoSQL databases.
                </a>
            </li>
            <li>
                <a href="https://firebase.google.com/docs/firestore/">
                    Guide for Cloud Firestore.
                </a>
            </li>
            <li>
                <a href="https://firebase.google.com/docs/database/">
                    Guide for Firebase Realtime Database.
                </a>
            </li>
            <li>
                <a href="https://codelabs.developers.google.com/codelabs/firebase-android/index.html">
                    A simple chat with firebase database.
                </a>
            </li>
            <li>
                <a href="https://codelabs.developers.google.com/codelabs/firebase-android/index.html">
                    A recommendation app with firestore.
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Firebase, Firestore, Realtime Database, NoSQL
    </div>
</div><!-- blog 0017-->
<div class="blog" id="blog0017">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Personalización según la ubicación
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-09-05
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Los avances continuos y la integración de tecnologías de comunicación celular, sistemas de
                posicionamiento global
                e internet a dado ancimiento a un nuevo mundo de interconexiones.
            </p>
            <p>
                Ahora somos parte de un red gigante donde la información viaja entre diferente dispositivos
                geolocalizables,
                no sólo hablamos de teléfonos inteligentes pero vehículos, artilugios y sensores.
                La &laquo;geoweb&raquo; mejora nuestra toma de decisiones en un mundo de infinitas posibilidades.
            </p>
            <p>
                En este tutorial construiremos un aplicativo para hacer llamadas de emergencia a un faro próximo.
                Suponemos que estamos perdidos en un lugar desconocido y necesitamos una dirección humanamente legible.
                Usaremos la potencia de la geolocalización de un dispositivo para determinar la dirección.
                También podemos buscar en su lugar un centro de salud o estación de bomberos en la cercanía.
                La dirección puede determinarse usando la dirección IP
                o la interfaz Google Places API para revertir la geocodificación.
            </p>
            <h3>
                <b>
                    Cómo usar el juego de desarrollo Google Places SDK
                </b>
            </h3>
            <p>
                Luego de crear un proyecto en la cónsola de Google Cloud, debemos otorgar permisos
                para acceder la interfaz de Google Places.
                Esta interfaz permite consultar detalles acerca de lugares y
                establecimientos como teléfonos, direcciones, calificación.
                También podemos encontrar el lugar donde nos encontramos, sus coordenadas y más.
            </p>
            <p>
                Luego de crear los permisos, debemos generar una llave de autorización.
                Algunas veces es necesario usar el certificado cifrado con SHA1 para usar la interfaza em modo de
                desarrollo.
                Esto lo conseguimos como sigue
            </p>
            <pre><code class="bash">
            keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android
            </code></pre>
            <p>
                Luego de generar la llave de autorización la agregamos a nuestro fichero manifest.
                También debemos agregar permiso para usar internet y permitir la localización.
            </p>
            <pre><code class="xml">
            ...
            &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
            &lt;uses-permission android:name="android.permission.INTERNET"/>
            ...
            &lt;meta-data android:name="com.google.android.geo.API_KEY"
                     android:value="API_KEY"/>
            ...
            </code></pre>
            <p>
                Luego agregamos la siguiente dependencia en el fichero gradle del aplicativo
            </p>
            <pre><code class="java">
            implementation 'com.google.android.gms:play-services-places:15.0.1'
            </code></pre>
            <p>
                En la actividad respectiva instanciamos el cliente para la detección de lugares.
            </p>
            <pre><code class="java">
            private PlaceDetectionClient mPlaceDetectionClient;
            ...
            mPlaceDetectionClient = Places.getPlaceDetectionClient(this, null);
            ...
            </code></pre>
            <p>
                Luego podemos recibir el resultado usando este código
            </p>
            <pre><code class="java">
            Task&lt;PlaceLikelihoodBufferResponse> placeResult = mPlaceDetectionClient.getCurrentPlace(null);
            placeResult.addOnCompleteListener(new OnCompleteListener&lt;PlaceLikelihoodBufferResponse>() {
                @Override
                public void onComplete(@NonNull Task&lt;PlaceLikelihoodBufferResponse> task) {
                    PlaceLikelihoodBufferResponse likelyPlaces = task.getResult();
                    PlaceLikelihood placeLikelihood = likelyPlaces.get(0);
                    Place place = placeLikelihood.getPlace();
                    Log.d("READABLE ADDRESS",place.getAddress());
                    likelyPlaces.release();
                }
            });
            </code></pre>
            <h3>
                <b>Geolocalización usando la dirección IP
                </b>
            </h3>
            <p>
                Otra manera de conocer tu dirección actual es usando tu dirección IP pública.
                En este caso podemos obtener el país, ciudad, estado, provincia, código postal.
                Su limitación es la falta de precisión, por ejemplo, no indicará una calle, avenidad o pasaje pero
                podemos usar la información para encontrar algún comercio, negocio en la cercanía.
            </p>
            <p>
                Luego de encontrar un proveedor apropiado,
                podemos consumir el servicio usando líbrerias populares como <b>retrofit</b>.
                En este ejemplo usaré el proveedor <b>IP Geolocation API</b>.
                Debemos recordar que su uso libre tiene una cuota limitada de consultas.
            </p>
            <p>
                Primeros agregamos una nueva dependencia al guión gradle
            </p>
            <pre><code class="java">
            implementation 'io.ipgeolocation:ipgeolocation:1.0.2'
            </code></pre>
            <p>
                Luego usemos la librería como sigue
            </p>
            <pre><code class="java">
            public class IPGeolocationAsyncTask extends AsyncTask&lt;Void, Void,Void> {
            
                GeolocationResult geolocationResult;
            
                @Override
                protected Geolocation doInBackground(Void... voids) {
                    IPGeolocationAPI api = new IPGeolocationAPI("API_KEY");
                    Geolocation geolocation = api.getGeolocation();
            
                    if(geolocation.getStatus() == 200) {
                        Log.i(getClass().getCanonicalName(),geolocation.getCity());
                    } else {
                        Log.i(getClass().getCanonicalName(),geolocation.getMessage());
                    }
                    return geolocation;
                }
            
            }
            </code></pre>
            <p>
                Ahora con todo estas piezas podemos crear el aplicativo para obtener la posición actual, la dirección e
                información acerca de nuestro entorno.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-09-11.png' alt=''
                class="blog-image-md"><br />
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://github.com/herb786/tutorial-android-geocoding">
                    https://github.com/herb786/tutorial-android-geocoding
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/places/android-sdk/current-place">
                    https://developers.google.com/places/android-sdk/current-place
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/training/location/">
                    https://developer.android.com/training/location/
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/maps/documentation/geocoding/start">
                    https://developers.google.com/maps/documentation/geocoding/start
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/reference/android/location/Geocoder">
                    https://developer.android.com/reference/android/location/Geocoder
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/android/guides/setup">
                    https://developers.google.com/android/guides/setup
                </a>
            </li>
            <li>
                <a href="https://ipstack.com">
                    https://ipstack.com
                </a>
            </li>
            <li>
                <a href="http://ip-api.com">
                    http://ip-api.com
                </a>
            </li>
            <li>
                <a href="https://ipgeolocation.io">
                    https://ipgeolocation.io
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/Reverse_geocoding">
                    https://en.wikipedia.org/wiki/Reverse_geocoding
                </a>
            </li>
            <li>
                D Abernathy. "Chapter: The Power of Where". <i>Using Geodata and Geolocation in the Social Sciences.</i>
            </li>
            <li>
                JL Awange, JBK Kiema. "Chapter: Geodata and Geoinformatics". <i>Environmental Geoinformatics.</i>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Geo-ubicación, Geo-codificación, Ubicación por IP, Google Places SDK
    </div>
</div><!-- blog 0016-->
<div class="blog" id="blog0016">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Balizas y notificaciones por proximidad
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-08-15
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/bluetooth.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                En la última publicación vimos como detectar aparatos usando bluetooth como balizas y su proximidad.
                Esta característica sirve para sondear nuestro entorno y ganar más conocimiento.
            </p>
            <p>
                De otro lado, podemos devolver otra información asignada a cada baliza en un establecimiento o lugar.
            </p>
            <p>
                La API de google para balizas se llama <i>Beacon Proxmity</i>.
                Esta interfaz permite asignar cabeceras o mensaje a cada baliza.
                Estas balizas son identifcados con su identifcador de proximidad UUID.
                Estos mensajes se encuentran en la nube y pueden ser editados sin problemas para
                tener mensajes apropiados a cada temporada.
                Por tanto no necesitamos borrar y programar las balizas para incluir nuevos mensajes pero
                necesitamos cambiar los datos adjuntos usando la API de proximidad.
            </p>
            <p>
                Luego de crear los mensajes apropiados, debemos capturarlos con nuestro aplicativo.
                Aquí usaremos la api llamada <i>Nearby Messages</i> para esta situación.
            </p>
            <h3>
                <b>Cómo usar la interfaz Beacon Proximity API
                </b>
            </h3>
            <p>
                Ahora veremos como añadir mensajes a nuestra balizas con la interfaz Beacon Proximity API.
                Asumiremos que tenemos los credenciales con protocolo OAuth para usar las apis de google y
                sabemos como generar una llave de autorización.
            </p>
            <p>
                En primer lugar debemos crear una identificación para nuestra baliza.
                En este caso necesitamos los parámateros <i>proximity UUID</i>, <i>major</i> y <i>minor</i>.
                El valor <i>minor</i> es usado para obtner una ubicación más precisa de la baliza.
                Por ejemplo podemos indicar el número de pabellón, departamento, oficina, plataforma en un hospital,
                clínica, escuela, aeropuerto, estación, etc.
                El valor <i>major</i> es menos preciso. Por ejemplo podemos indicar si estamos o no en una oficina,
                plataforma pero no sabremos el n¨mero u otra designación específica.
            </p>
            <p>
                La identificación de una baliza es el resultado de concatenar los valores de <i>proximity uuid, major,
                    minor</i> y luego
                cifrarlo usando <i>base64</i>. La siguiente orden servirá para crear la identificación.
            </p>
            <pre><code class="bash">
            echo -ne $hexuid | xxd -r -p | base64
            </code></pre>
            <p>
                Aquí <i>$hexuid</i> es la concatenación de os valores indicados anteriormente.
                Luego podemos registrar la baliza con la interfaz Beacon Proximity API.
                Esta consulta con <b>curl</b> registrará nuestra baliza
            </p>
            <pre><code class="bash">
            curl -d '{"advertisedId":{"type":"IBEACON","id":"'$uid'"},"status":"ACTIVE","placeId":"ChIJTxax6NoSkFQRWPvFXI1LypQ","latLng":{"latitude":"47.6693771","longitude":"-122.1966037"},"indoorLevel":{"name":"1"},"expectedStability":"STABLE","description":"Farm beacon.","properties":{"position":"entryway"}}' -H 'Content-Type: application/json' -H "Authorization: Bearer $token" https://proximitybeacon.googleapis.com/v1beta1/beacons:register
            </code></pre>
            <p>
                Aquí <b>$uid</b> is la identificación generada con base64 y <b>$token</b> es la llave de acceso para las
                apis de google.
            </p>
            <h3>
                <b>Cómo adjuntar notificaciones a una baliza
                </b>
            </h3>
            <p>
                Luego de registrar la baliza, podemos adjuntar mensajes conocidos como &laquo;attachments&raquo;.
                El adjunto puede agregarse usando la cónsola para balizas de gogle o hacienda una llamada a la interfaz
                Google Proximity API.
            </p>
            <p>
                Para la consulta necesitamos el nombre asignado al parámetro <i>namespace</i> del proyecto,
                el nombre de la baliza que se creó luego del registro y la notificación cifrada con base64.
                La consulta con <b>curl</b> es como sigue
            </p>
            <pre><code class="bash">
            curl -d '{"namespacedType":"'$namespaceName'/string","data":"UmlwZSBqdWljeSBwbHVtcw=="}' -H "Authorization: Bearer $token" -H 'Content-Type: application/json' https://proximitybeacon.googleapis.com/v1beta1/$beaconName/attachments?key=$apikey
            </code></pre>
            <p>
                La notificación que fue cifrada con base64 es <i>"Ripe juicy plums"</i>.
                Podemos crear un mensaje cifrado de este modo
            </p>
            <p>
                echo -n "Ripe juicy plums" | base64
            </p>
            <b>
                Ahora podemos recibir las notificaciones de la interfaz Nearby Messages API.
            </b>
            <h3>
                <b>
                    Mostrando notificaciones asignadas a las balizas
                </b>
            </h3>
            <p>
                Ahora demos sustancia al tutorial usando este conocimiento para obtener información de los cultivos en
                una granja.
                La granja cultiva muchas frutas como uvas, cerezas, ciruelas y manzanas.
                Aquí tengo una baliza en cada parcela de la granja.
                Cada parcela está dedicada aun cultivo.
                ya que estoy en la temporada de cosecha para ciruelas, quiero mostrar un mensaje acerca del
                estado de las ciruelas. Digamos un mensaje como "ciruelas maduras y jugosas".
            </p>
            <p>
                Ahora usemos la interfaz Nearby Message API para recibir esta notificación.
                Primero debemos crea una llave de autorización para que los dispositivos móviles puedan
                usar la interfaz.
            </p>
            <p>
                Luego de generar la llave de autorización debemos agregar la dependencia <i>Nearby Message</i>
                a nuestro proyecto del modo siguiente
            </p>
            <pre><code class="java">
                implementation 'com.google.android.gms:play-services-nearby:15.0.1'
            </code></pre>
            <p>
                También debemos modicar el archivo <i>manifest</i>
            </p>
            <pre><code class="xml">
            ...
            &lt;uses-permission android:name="android.permission.BLUETOOTH" />
            &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
            &lt;uses-permission android:name="android.permission.INTERNET" />
            ...
            &lt;uses-feature
                    android:name="android.hardware.bluetooth_le"
                    android:required="false" />
            ...
            &lt;application>
                &lt;meta-data
                        android:name="com.google.android.nearby.messages.API_KEY"
                        android:value="your_authorization_key" />
            &lt;/application>
            ...
            </code></pre>
            <p>
                La actividad inicial puede suscribirse a la interfaz Nearby Message como sigue
            </p>
            <pre><code class="java">
            ...
            public final String IBEACON = "fda50693-a4e2-4fb1-afcf-c6eb07647825";
            ...
            MessageListener mMessageListener = new MessageListener() {
                @Override
                public void onFound(Message message) {
                    Log.println(Log.ASSERT, TAG, "Message found: " + message);
                    imgNotification.setImageResource(R.drawable.plums1);
                    if (!message.getNamespace().equals(NAMESPACE)){
                        new ProximityAsyncTask().execute();
                    } else{
                        txtNotification.setText(new String(message.getContent()));
                    }
                }
            
                @Override
                public void onLost(Message message) {
                    Log.println(Log.ASSERT, TAG, "Lost sight of message.");
                    imgNotification.setImageResource(R.drawable.farm);
                    txtNotification.setText("Welcome to my Farm! ");
                }
            
            };
            ...
            @Override
            public void onStart() {
                super.onStart();
                MessageFilter messageFilter = new MessageFilter.Builder()
                        .includeIBeaconIds(UUID.fromString(IBEACON), null, null)
                        .includeAllMyTypes()
                        .build();
                SubscribeOptions options = new SubscribeOptions.Builder()
                        .setStrategy(Strategy.DEFAULT)
                        .setFilter(messageFilter)
                        .build();
                Nearby.getMessagesClient(this).subscribe(mMessageListener, options);
            }
            ...
            @Override
            public void onStop() {
                Nearby.getMessagesClient(this).unsubscribe(mMessageListener);
                super.onStop();
            }
            ...
            </code></pre>
            <p>
                Ahora podemos recibir la notificación cuando nos aproximemos a la baliza en la parcela con ciruelas.
            </p>
            <p>
                Otro modo de obtener el mensaje es mediante una consulta a la interfaz Beacon Proximity como sigue
            </p>
            <pre><code class="bash">
            curl -d '{"observations":[{"advertisedId":{"type":"IBEACON","id":"your_base64_beacon_id"}}],"namespacedTypes":["your_namespace/data_type"]}' -H 'Content-Type: application/json'
                https://proximitybeacon.googleapis.com/v1beta1/beaconinfo:getforobserved?key=your_authorization_key
            </code></pre>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-08-25.gif" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://developers.google.com/beacons/proximity/guides">
                    https://developers.google.com/beacons/proximity/guides
                </a>
            </li>
            <li>
                <a
                    href="https://developers.google.com/beacons/proximity/reference/rest/v1beta1/beacons.attachments/list">
                    https://developers.google.com/beacons/proximity/reference/rest/v1beta1/beacons.attachments/list
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/beacons/dashboard/">
                    https://developers.google.com/beacons/dashboard/
                </a>
            </li>
            <li>
                <a href="https://developers.google.com/nearby/messages/android/get-started">
                    https://developers.google.com/nearby/messages/android/get-started
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/IBeacon">
                    https://en.wikipedia.org/wiki/IBeacon
                </a>
            </li>
            <li>
                <a href="https://github.com/google/eddystone/tree/master/eddystone-uid">
                    https://github.com/google/eddystone/tree/master/eddystone-uid
                </a>
            </li>
            <li>
                <a href="https://github.com/herb786/tutorial-beacon-farm-message">
                    Source code for the tutorial
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, BLE, Beacons, Eddystone, Nearby Messages API, Proximity Beacon API
    </div>
</div><!-- blog 0015-->
<div class="blog" id="blog0015">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Un simple uso de BLE: Proximidad en ambientes cerrados con Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-07-13
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/bluetooth.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Suele suceder que necesitamos cierta información de nuestro entorno y sus alrededores
                como activades, eventos, comercios, etc.
                Haces algunas decádas se solía llevar para esta situación libros, mapas, guías o prospectos.
                En esta nueva era, podemos usar nuestros dispositivos móviles y descubrir el mundo que nos rodea.
            </p>
            <p>
                &laquo;Bueetooth&raquo; es una tecnología que viene desarrollándose en las últimas decádas
                para mejorar la conectividad inalámbrica y transformar nuestro entorno.
                En cuánto a localización espacial, dispositivos operando con bluetooth emiten micoondas a frecuencias en
                torno a los 2.4 GHz.
                Este tipo de ondas pueden viajar a través de materiales sólidos como paderes, puertas (excluyendo las
                metálicas), ventanas, árboles
                y así ser detectadas por otros dispositivos.
                De este modo podemos conocer la posición relativa entre los dispotivos emisores y receptores.
                Existe también la tecnología GPS pero su alcance se limita a espacios abiertos debido a que las ondas de
                radio alrededor 1 GHz
                son muy débiles para cruzar muchos obstáculos.
            </p>
            <p>
                La manera más sencilla de construir está tipo de arreglo es usando balizas o &laquo;beacons&raquo;.
                Las balizas tienen un identificador único que puede usarse para determinar su ubicación en el arreglo.
                También podemos saber cuán lejos estamos de una baliza usando la intensidad de la señal emitida.
                Está señal es usualmente medida en decibeles.
            </p>
            <p>
                Siguiende esta cadena de ideas podemos imaginar un museo o exposición donde podemos
                encontrar información instántanea acerca de un retrato, escultura, objeto histórico, etc.
                En un teatro o estadio podemos ubicar tiendas, y asientos usando nuestro dispositivo móvil.
                También podemos caminar en parques o bosques y conocer árboles, flores, hierbas, arbustos, hongos, etc.
                La aplicación más conocida de las balizas es en las tiendas por departamento para recolectar
                información acerca de los consumidores cómo su recorrido, las tiendas que vistan, consumo de comida y
                otros.
            </p>
            <p>
                Para dar sustancia a este tutorial crearemos un aplicativo para detectar cajas con contenido peligroso o
                material contaminante
                en un laboratorio. En está situación asumiremos que las balizas estan colocadas en las cajas.
                De este modo, nuestra tarea será detectar la señal emitida por la baliza y leer su intensidad.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/ble-hazard01.jpg" type="image/jpg">
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/ble-hazard02.jpg" type="image/jpg">
            <p>
                Para nuestras pruebas usaremos una baliza basada en el esquema Nordic NRF51822,
                la cual usa una pila de botón de 3V con código CR2032.
                Este es módulo emisor de bluetooth de baja energía y la batería puede durar más de un año.
                Consideramos una baliza como un módulo bluetooth de bajo consumo de energía (BLE) si la corrinte está en
                el rango de los microamaperios.
                La intensidad de la señal usada desaparecerá más allá de los 60 metros.
                Más información puede ser encontrada en el manual de usuario de la baliza.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/ble-beacon.jpg" type="image/jpg">
            <h3>
                <b>
                    Un nuevo proyecto
                </b>
            </h3>
            <p>
                En primer lugar debemos otorgar los permisos de ubicación y bluetootj a nuestro aplicativo.
                Bluetooth con bajo cosnumo de energía funcionará en dispositivos android 4.3 y versiones superiores.
            </p>
            <pre><code class="xml">
            &lt;uses-permission android:name="android.permission.BLUETOOTH" />
            &lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
            &lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
            </code></pre>
            <p>
                En el caso de dispositivos con Android Marshmallow y superior,
                necesitamos permisos por el usuario en tiempo de ejecución. Luego de obtener los permisos
                podemos detectar dispositivos o módulos usando Bluetooth.
                Podemos crear un servico para hacerse cargo de esta tarea.
                Para poder detectar cualquier dispositivo bluetooth, debemos usar la clase <b>BluetoothAdapter</b>.
                Para conseguir una instancia de <b>BluetoothAdapter</b> necesitamos llamar al gestor
                <b>BluetoothManager</b>.
            </p>
            <pre><code class="java">
            BluetoothManager bluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
            mBluetoothAdapter = bluetoothManager.getAdapter();
            </code></pre>
            <p>
                Luego de llamar al gestor podemos usar el adaptador <b>BluetoothAdapter</b> para detectar
                dispositvos usando bluetooth. Tenemos dos modos de detectar los dispositivos, la primera es
                usando la interfaz depuesta <b>LeScanCallback</b> y la segunda es la nueva interfaz <b>ScanCallback</b>
                para Lollipop y nuevas versiones. Ambas interfaces pueden usarse para detectar dispositivos en las
                cercanías.
            </p>
            <p>
                Usemos primero la clase <b>LeScanCallback</b>.
                Luego de comenzar la detección de deispositivos, recibiremos el nombre del dispositivo, la dirección
                MAC,
                la proximidad en decibeles e información adicional del fabricante.
            </p>
            <pre><code class="java">
            mBluetoothAdapter.startLeScan(myLeScanCallback);
            ...
            BluetoothAdapter.LeScanCallback myLeScanCallback = new BluetoothAdapter.LeScanCallback() {
                @Override
                public void onLeScan(BluetoothDevice device, int rssi, byte[] scanRecord) {
                    // Device with name and MAC address
                    // RSSI is the proximity
                    // scanRecord for extra information.
                }
            };
            </code></pre>
            <p>
                Para el segundo caso, recibimos una instancia de <b>ScanResult</b> con información acerca
                del dispositivo, la proximidad y datos extra.
            </p>
            <pre><code class="java">
            bluetoothLeScanner.startScan(myScanCallback);
            ...
            ScanCallback myScanCallback = new ScanCallback() {
                @Override
                public void onScanResult(int callbackType, ScanResult result) {
                    super.onScanResult(callbackType, result);
                    int rssi = result.getRssi();
                    BluetoothDevice device = result.getDevice();
                    ScanRecord scanRecord = result.getScanRecord();
                }
            
                @Override
                public void onBatchScanResults(List&lt;ScanResult> results) {
                    super.onBatchScanResults(results);
                }
            
                @Override
                public void onScanFailed(int errorCode) {
                    super.onScanFailed(errorCode);
                }
            };
            </code></pre>
            <h3>
                <b>
                    Lectura de la intensidad de la señal
                </b>
            </h3>
            <p>
                Y a que necesitamos información acerca de cuán próximo algún visitante está del peligro, usaremos
                el valor del parámatero <b>RSSI</b> (indicador de intensidad de una señal recibida o &laquo;received
                signal strength indicator&raquo;). Este valor se hará mas negativo cuánto más lejos estemos del peligro.
                Así nuestro programa tiene esta forma
            </p>
            <pre><code class="java">
            if (rssi > -40){
                Log.d("MyApp","Your life is in danger!");
            } else if (rssi > -70) {
                Log.d("MyApp","Too close!");
            } else {
                Log.d("MyApp","Please stay away!!!");
            }
            </code></pre>
            <h3>
                <b>
                    Servicios GATT
                </b>
            </h3>
            <p>
                Algunos dispositivos bluetooth trasmiten información acerca de la potencia, proximidad,
                pulso, velocidad, temperatura, presión, etc. Está información puede encontrarse en los servicios GATT
                del módulo.
                Cada servicio GATT tiene un identificador único o UUID.
                Los identificadores actuán como direcciones IP que podemos usar para consultar los datos que el módulo
                transmite.
            </p>
            <pre><code class="java">
            BluetoothGatt mBluetoothGatt = device.connectGatt(this, true, new MyBluetoothGattCallback());
            private class MyBluetoothGattCallback extends BluetoothGattCallback {
                @Override
                public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {
                    if (newState == BluetoothProfile.STATE_CONNECTED) {
                        mBluetoothGatt.discoverServices();
                    }
                }
            
                @Override
                public void onServicesDiscovered(BluetoothGatt gatt, int status) {
                    BluetoothGattService mBluetoothGattService = mBluetoothGatt.getService(mUUID);
                    UUID mUUID = UUID.fromString("12341804-494c-4f47-4943-544543480000");
                    BluetoothGattCharacteristic mBluetoothGattCharacteristic = mBluetoothGattService.getCharacteristic(mUUID);
                    mBluetoothGatt.readCharacteristic(mBluetoothGattCharacteristic);
                }
            
            }
            </code></pre>
            <p>
                También si el dispositivo móvil lo permite, podemos retorna datos al módulo bluetooth usando
                la clase <i>BluetoothLeAdvertiser</i>.
            </p>
            <pre><code class="java">
            BluetoothLeAdvertiser advertiser = mBluetoothAdapter.getBluetoothLeAdvertiser();
            AdvertiseSettings settings = new AdvertiseSettings.Builder()
                    .setAdvertiseMode(AdvertiseSettings.ADVERTISE_MODE_LOW_POWER)
                    .setTimeout(0)
                    .build();
            AdvertiseData advertiseData = new AdvertiseData.Builder()
                    .addServiceUuid(Service_UUID)
                    .setIncludeDeviceName(true)
                    .build();
            advertiser.startAdvertising(settings, advertiseData, bleAdvertiserCallback);
            </code></pre>
            <p>
                La información extra puede incluir algún identificador de proximidad.
                Podemos usar este identificador para obtener notificaciones y mensajes dando un servicio
                personalizado a cada visitante. Veremos como enviar notificaciones a los usuarios en una
                futura publicación.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-07-21.gif" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://developer.android.com/guide/topics/connectivity/bluetooth-le">
                    https://developer.android.com/guide/topics/connectivity/bluetooth-le
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/guide/topics/connectivity/bluetooth">
                    https://developer.android.com/guide/topics/connectivity/bluetooth
                </a>
            </li>
            <li>
                <a href="https://meetingofideas.files.wordpress.com/2013/12/ibeacons-bible-1-0.pdf">
                    https://meetingofideas.files.wordpress.com/2013/12/ibeacons-bible-1-0.pdf
                </a>
            </li>
            <li>
                <a href="https://github.com/herb786/tutorial-beacon-hazard-sign">
                    https://github.com/herb786/tutorial-beacon-hazard-sign
                </a>
            </li>
            <li>
                <a href="https://blog.bluetooth.com/proximity-and-rssi">
                    https://blog.bluetooth.com/proximity-and-rssi
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/Received_signal_strength_indication">
                    https://en.wikipedia.org/wiki/Received_signal_strength_indication
                </a>
            </li>
            <li>
                <a href="https://www.bluetooth.com/specifications/bluetooth-core-specification">
                    Bluetooth® Core Specification
                </a>
            </li>
            <li>
                <a
                    href="http://dev.ti.com/tirex/content/simplelink_cc2640r2_sdk_1_40_00_45/docs/blestack/ble_user_guide/html/ble-stack-3.x-guide/index.html">
                    BLE-Stack User’s Guide
                </a>
            </li>
            <li>
                <a
                    href="https://devzone.nordicsemi.com/cfs-file/__key/communityserver-discussions-components-files/4/5807.NRF51822_2D00_Beacon.pdf">
                    Manual Técnico del Módulo NRF51822
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Bluetooth Low Energy, Beacons, Eddystone
    </div>
</div><!-- blog 0014-->
<div class="blog" id="blog0014">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Tipografías variadas en Google Fonts
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-07-07
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                La fuente común de muchos aplicativos en Android es <b>Roboto</b>.
                Esta tipografía del tipo San Serif puede ser algo tediosa ye inadecuada para
                llevar la idea del contenido en nuestro aplicativo.
                Sin embargo tenemos fuentes adicionales libre de regalías en <i>Google Fonts</i> o <i>Typekit</i>.
            </p>
            <p>
                Podemos cambiar la fuente usando diferente herramientas en la plataforma Android.
                Algunas imitan la carga de fuente en sitios web de modo que no necesitamos tener los recursos
                en el aplicativo y hacer el binario más grande.
                En este caso el aplicativo descarga las fuentes usando los repositorios de <b>cdnjs</b>.
            </p>

            <h3>
                <b>
                    Cómo cargar las fuentes en Google Fonts
                </b>
            </h3>
            <p>
                Hay dos maneras de cambiar las fuentes por defecto en nuestro aplicativo.
                La primera es usando el asistente en la interfaz integrada de desarrollo (Android Studio)
                y la segunda es con código.
            </p>
            <p>
                Cuando usamos Android Studio debemos acceder al modo diseño en nuestra plantilla gráfica y
                escogiendo la componente que debemos modificar.
                Luego debemos desplegar el panel <b>Attributes</b> en el lado derecho de la ventana.
                Aquí escogemos el atributo <b>fontFamily</b> y desplegamos las opciones.
                Finalmente elegimos la opción <b>More fonts...</b>.
                Allí podemos elegir cualquier fuente del catálogo.
            </p>
            <p>
                El asistente creará una nueva carpeta <b>fonts</b> dentro de la carpeta <i>resources</i>.
                También encontraremos un nuevo fichero <b>font_certs.xml</b> dentro de la carpeta <i>values</i>.
                Este archivo será usado para obtener los certificados del proveedor de fuentes, que es Google Fonts.
            </p>
            <p>
                También podemos agregar fuentes usando código.
                Siguiendo el código aquí debajo usaremos la fuente <i>Wendy One</i>.
            </p>
            <pre>
            <code class=”java”>
            TextView helloWorld = findViewById(R.id.helloWorld);
            String wendyOne400 = "name=Wendy One&weight=400";
            String providerAuthority = "com.google.android.gms.fonts";
            String providerPackage = "com.google.android.gms";
            int certificates = R.array.com_google_android_gms_fonts_certs;
            FontRequest request1 = new FontRequest(providerAuthority, providerPackage, wendyOne400, certificates);
            FontsContractCompat.FontRequestCallback callback1 = new FontsContractCompat.FontRequestCallback() {
                @Override
                public void onTypefaceRetrieved(Typeface typeface) {
                    helloWorld.setTypeface(typeface);
                }
            };
            FontsContractCompat.requestFont(this, request1, callback1, new Handler());
            
            </code>
            </pre>
            <p>
                En este pedazo de código necesitamos cambiar la consulta como se describe en la guía
                para la API de Google Fonts. Los identifcadores certificados han sido generados y guardados en
                el archivo <b>font_certs.xml</b>.
            <p>

            <h3>
                <b>
                    Formato y colores de fuente
                </b>
            </h3>
            <p>
                Aparte de usar una nueva tipografía también queremos agregar elementos decorativos como viñetas.
                En lugar de sobrecomplicar las plantillas gráficas podemos usar algo de código para alcanzar el diseño
                propuesto.
            </p>
            <p>
                Para este propósito usaremos subclases de <b>CharacterStyle</b>.
                Ahí podemos encontrar rutinas para la fuente, el fondo, el tamaño y otros estilos.
            </p>
            <p>
                Por ejemplo podemos cambiar el color de algunas letras en el texto.
                Está pieza de código hace el trabajo
            </p>
            <pre>
            <code class=”java”>
            TextView exclusiveExclusive= findViewById(R.id.exclusiveExclusive);
            String example = "0123456789";
            SpannableStringBuilder builder = new SpannableStringBuilder(example);
            builder.setSpan(new StyleSpan(Typeface.BOLD), 0, 5, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
            exclusiveExclusive.setText(builder);
            </code>
            </pre>

            <p>
                Aquí notamos la señal <b>Spanned.SPAN_EXCLUSIVE_EXCLUSIVE</b> que es usada cuando insertamos nuevos
                carácteres.
                Esta señal particular no aplicará estilos cuando insertamos texto al inicio
                o final de la cadena de texto definida por los indices del constructor.
            </p>

            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/typefaces.png" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href=”https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts”>
                    https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts
                </a>
            </li>
            <li>
                <a href=”https://developers.google.com/fonts/docs/android”>
                    https://developers.google.com/fonts/docs/android
                </a>
            </li>
            <li>
                <a href=”https://developer.android.com/reference/android/text/style/CharacterStyle”>
                    https://developer.android.com/reference/android/text/style/CharacterStyle
                </a>
            </li>
            <li>
                <a href=”https://fonts.google.com/”>
                    https://fonts.google.com/
                </a>
            </li>
            <li>
                <a href=”https://en.wikipedia.org/wiki/Roboto”>
                    https://en.wikipedia.org/wiki/Roboto
                </a>
            </li>
            <li>
                <a href=”https://github.com/herb786/tutorial-typefaces”>
                    Source code for this tutorial
                </a>
            </li>
            <li>
                <a
                    href=”https://www.adobe.io/apis/creativecloud/creativesdk/docs/androidsdk/adobe-creative-sdk-for-android_master/typekit.html”>
                    Adobe Typekit for android
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Typefaces, UX Design
    </div>
</div><!-- blog 0013-->
<div class="blog" id="blog0013">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Navegación con ayuda de la pila de fragmentos
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-07-04
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                La navegación en un aplicativo puede llegar a convertirse en una maraña de conexiones entre diferentes
                pantallas
                si no seguimos un plan para interconectarlas. Preferentemente buscamos una
                navegación lineal siguiende una estructura de árbol en la aplicación.
            </p>
            <p>
                Un mapa de todas las pantallas del aplicativo puede ser más compleja.
                Podemos considerar las pantallas como partes de un árbol.
                La pantalla de inicio siendo el tronco. Las ramas serían las diferentes pantallas
                para cada menú del aplicativo. Las hojas o subramas pueden ser una secuencia lineal de pantallas para
                cada menú.
            </p>
            <p>
                Los usuarios frecuentemente saltan entre pantallas siguiendo diferentes rutas que no siguen un camino
                directo en el árbol.
                Esto significa que debemos mantener un historial de las pantallas visitadas de manera que la navegación
                sea intuitiva y el aplicativo
                consuma los recursos mínimos para cada ruta navegable, dado que cada pantalla generada consume recursos.
            </p>

            <h3>
                <b>
                    Pila de Actividades
                </b>
            </h3>
            <p>
                La forma estándar de navegar a través de diferentes pantallas consiste de actividades.
                Cada actividad representa una pantalla. Así el usuario sigue una navegación lineal sin interrupciones.
                Las actividades son apiladas y son parte del historial de navegación.
                Para regresar a la pantalla pasada debemos usar el botón retornar del dispositivo y el evento
                <b>onBackPressed</b>.
                Esto llega a ser más complejo si usamos una navegación jerárquica y por tanto debemos usar una solución
                diferente.
            </p>

            <h3>
                <b>
                    Pila de Fragmentos
                </b>
            </h3>
            <p>
                Fragmentos son componentes para organizar las pantallas y vistas del aplicativo.
                Podemos usar fragmentos para crear una secuencia de pantallas donde cada pantalla
                es el paso de una tarea.
                Así actividades pueden contener tareas en el aplicativos en lugar de pantallas.
                Por tanto los fragmentos tiene como punto de entrada una actividad en la cuál son alojadas.
            </p>
            <p>
                Para dar sustancia a este tutorial y el uso de fragmentos crearemos una aplicativo para una librería.
                La librería tiene un catálogo de libros y revistas. En nuestro caso tenemos
                el rubro <i>History</i>, un nivel debajo está el rubro <i>Ancient Civilizations</i> y
                luego los libros para dos civilizaciones <i>Egypt</i> y <i>Sumer</i>.
                Esté catálogo tendrá fragmentos por cada pantalla en el aplicativo.
            </p>
            <p>
                Los fragmentos son apilados en el gestor de fragmentos <b>FragmentManager</b> de la actividad de
                partida.
                La componente <b>FrameLayout</b> reserva el espacio en pantalla que ocupará el fragmento.
                Este espacio puede cubrir la pantalla completa o simplemente una porción.
                También daremos un identificador a cada una de estas componentes para identificarlas en el gestor de
                fragmentos.
                Otra manera de identificar los fragmentos es con etiquetas.
                Todas estas decisiones ayudarán con la navegación.
            </p>

            <h3>
                <b>
                    Fragmentos con hijos
                </b>
            </h3>
            <p>
                Podemos incluso anidar fragmentos en otros fragmentos para mejorar la navegación.
                Así podemos retener todos los fragmentos en el gestor de fragmentos de la actividad cuando
                los fragmentos tienen una secuencia sucesiva sin bifurcaciones o los fragmentos son parientes.
            </p>
            <p>
                Los fragmentos tiene un propio gestor de fragmentos el cual puede ser invocado con el método
                <b>getChildFragmentManager</b>.
                Esto ayudará a generar un árbol de fragmentos lo cual necesitaremos para la aplicación.
                En nuestro ejemplo el fragmento <i>AncientCivilizations</i> contiene dos fragmentos hijos <i>Egypt</i> y
                <i>Summer</i>.
            </p>
            <p>
                Para agregar fragmento en la pila debemos usar el método <b>addToBackStack</b> del gestor
                <b>FragmentManager</b>.
            </p>
            <p>
                Ahora podemos programar la navegación con el botón de retorno.
                El cødigo aquí debajo muestra como navegar usando identificadore para los contenedores.
            </p>

            <pre>
            <code>
            private void popFragmentOnBackPressedUsingId(){
                Fragment lastFragment = null;
                Fragment firstFragment = getSupportFragmentManager().findFragmentById(R.id.storeContainer);
                Fragment beforeLastFragment = getSupportFragmentManager().findFragmentById(R.id.historyContainer);
                if (beforeLastFragment != null)
                    lastFragment = beforeLastFragment.getChildFragmentManager().findFragmentById(R.id.ancientCivilizationContainer);
                if (lastFragment != null){
                    breadcrumbTextView.setText("Store > History > Ancient Civilization");
                    lastFragment.getFragmentManager().popBackStack();
                } else if (beforeLastFragment != null) {
                    breadcrumbTextView.setText("Store > History");
                    beforeLastFragment.getFragmentManager().popBackStack();
                } else if (firstFragment != null) {
                    breadcrumbTextView.setText("Store");
                    firstFragment.getFragmentManager().popBackStack();
                } else {
                    super.onBackPressed();
                }
            }
            </code>
            </pre>

            <p>
                Este ejemplo muestra el uso de etiquetas
            </p>

            <pre>
            <code>
            private void popFragmentOnBackPressedUsingTag(){
                int stemFragmentCount = getSupportFragmentManager().getBackStackEntryCount();
                if (stemFragmentCount > 0) {
                    Fragment stemFragment = getSupportFragmentManager().findFragmentByTag("HistoryFragment");
                    int branchFragmentCount = stemFragment.getChildFragmentManager().getBackStackEntryCount();
                    if (branchFragmentCount > 0) {
                        // Use tag to find fragment
                        Fragment branchFragment = stemFragment.getChildFragmentManager().findFragmentByTag("AncientCivilizationFragment");
                        int leafFragmentCount = branchFragment.getChildFragmentManager().getBackStackEntryCount();
                        if (leafFragmentCount > 0) {
                            breadcrumbTextView.setText("Store > History > Ancient Civilization");
                            branchFragment.getChildFragmentManager().popBackStack();
                        } else {
                            breadcrumbTextView.setText("Store > History");
                            stemFragment.getChildFragmentManager().popBackStack();
                        }
                    } else {
                        breadcrumbTextView.setText("Store");
                        getSupportFragmentManager().popBackStack();
                    }
                } else {
                    super.onBackPressed();
                }
            }
            </code>
            </pre>

            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-07-04.gif" type="image/gif">

            <h3>
                <b>
                    La nueva componente de navegación
                </b>
            </h3>
            <p>
                Un nuevo paquete de librerías de soporte está disponible para la plataforma Android.
                En el compilado se incluye una nueva librería para
                facilitar la navegación conocida como <b>Navigation Architecture Component</b>.
                Si tenemos un nuevo proyecto en Android sería bueno darle un vistazo.
            </p>

            <pre>
            <code class=”bash”>
            implementation "android.arch.navigation:navigation-fragment:1.0.0-alpha01"
            implementation "android.arch.navigation:navigation-ui:1.0.0-alpha01"
            </code>
            </pre>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li>
                <a href="https://uxplanet.org/breadcrumbs-for-web-sites-what-when-and-how-9273dacf1960">
                    Breadcrumbs For Web Sites
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/Tree_structure">
                    Tree structure
                </a>
            </li>
            <li>
                <a href="https://en.wikipedia.org/wiki/Hierarchy">
                    Hierarchy
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/reference/android/support/v4/app/Fragment">
                    https://developer.android.com/reference/android/support/v4/app/Fragment
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/reference/android/support/v4/app/FragmentManager">
                    https://developer.android.com/reference/android/support/v4/app/FragmentManager
                </a>
            </li>
            <li>
                <a href="https://medium.com/madison-ave-collective/are-breadcrumbs-still-fresh-for-ux-6e72b0f96e9b">
                    Are breadcrumbs still fresh for UX?
                </a>
            </li>
            <li>
                <a href="https://developer.android.com/topic/libraries/architecture/navigation/">
                    The Navigation Architecture Component
                </a>
            </li>
            <li>
                <a href="https://github.com/herb786/tutorial-breadcrumbs">
                    Source code for this tutorial
                </a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Application Lifecycle, Navigation
    </div>
</div><!-- blog 0012-->
<div class="blog" id="blog0012">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Exposición de aplicaciones en la tienda Android con Jenkins
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-06-30
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                En la publicación pasada creamos tareas en Jenkins para probar nuestro aplicativo.
                En este tutorial veremos como publicar aplicativos en la tienda Google Play.
            </p>
            <p>
                Para colocar una nueva versión de nuestro aplicativo en la tienda podemos usar la cónsola de
                desarrollo de Google o también podemos usar la API para Google Play.
                Ésta última nos ayuda a crear tareas automatizadas para publicar aplicativos.
                También podemos subir pantallazos, binarios, notas versionadas.
                Por otro lado podemos decidir si usamos el binario para pruebas beta o despliegue en producción.
            </p>
            <h3>
                <b>Cómo generar llaves de acceso con el cliente OAuth 2.0</b>
            </h3>
            <p>
                Antes de usar la líbreria <i>Google Play Developer API</i> necesitamos una cuenta con el
                permiso de tipo <b>Release manager</b>.
                Podemos crear la cuenta con <b>OAuth Clients</b> o <b>Service Accounts</b>.
                Aquí veremos como crear una cuenta con OAuth Client.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/play-accounts.png" type="image/gif">
            <p>
                Podemos crear un cliente usando el protocolo OAuth en la sección <b>Google APIs</b> de la cónsola de
                desarrollo.
                Allí debemos escoger nuestro proyecto y luego buscar la sección <b>Credentials</b>.
                Podemos encontrar más información en la guía de desarrollo<a href="#cite4">[4]</a>.
            </p>
            <p>
                Ahora debemos indicar un página de redirección.
                Aquí podemos dar la dirección de nuestro sitio web o la página dedicada a tu aplicativo.
                Luego debemos generar un código de autorización, y para ello debemos identificarnos con nuestra
                cuenta de google.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/play-credentials.png" type="image/gif">
            <p>
                Luego debemos navegar a la siguiente página.
                La dirección contiene el identificador del usuario y la página de redirección.
            </p>
            <pre><code class="bash">
            https://accounts.google.com/o/oauth2/auth?
            scope=https://www.googleapis.com/auth/androidpublisher
            &response_type=code&access_type=offline
            &redirect_uri=https://your.redirect.uri
            &client_id=your.client.id
            </code></pre>
            <p>
                Luego de ser redirigidos a la página indicada en el paso previo, veremos un código
                junto a la dirección web
            </p>
            <pre><code class="bash">
                https://your.redirect.uri?code=4/AsdCsdswh1T6CARIu5_W4z_1cIm-#
            </code></pre>
            <p>
                Ahora generemos la primera llave de autorización.
                Para ello realizamos una llamada POST como sigue
            </p>
            <pre><code class="bash">
            curl -d grant_type=authorization_code
            -d code=4/AsdCsdswh1T6CARIu5_W4z_1cIm-zsewwrwe23424dsfs5KNg0TlkTonKoKY#
            -d client_id=your.client.id
            -d client_secret=your.client.secret
            -d redirect_uri=https://your.redirect.uri https://accounts.google.com/o/oauth2/token
            </code></pre>
            <p>
                La respuesta usando notación JSON tiene una llave con el nombre <i>refresh_token</i> que usaremos
                para automatizar llamadas a la API de Google Play para publicar nuestro aplicativo
            </p>
            <pre><code class="json">
            {
              "access_token" : "yrDx-w9XF1BKai5WBKQVmcIT1WKVu",
              "expires_in" : 3600,
              "refresh_token" : "1/CJnxU35RajKvUjmr_Mx8ho",
              "token_type" : "Bearer"
            }
            </code></pre>
            <p>
                Para renovar la llave que usaremos para llamar a la API hacemos la siguiente consulta de tipo POST
            </p>
            <pre><code class="bash">
            curl -d grant_type=refresh_token
            -d client_id=your.client.id
            -d client_secret=your.client.secret
            -d refresh_token=1/CJnxU35RajKvUjmr_Mx8ho https://accounts.google.com/o/oauth2/token
            </code></pre>
            <p>
                La respuesta es la siguiente
            </p>
            <pre><code class="json">
            {
              "access_token" : "AAAABBBBCCCCDDDDEEEE",
              "expires_in" : 3600,
              "token_type" : "Bearer"
            }
            </code></pre>
            <h3>
                <b>Cómo acceder la API de Google Play Developer</b>
            </h3>
            <p>
                Para publicar nuestro aplicativo en modo beta o producción debemos crear <b>Edits</b>.
                Edits son casillas temporales donde se guarda el binario y sus notas de versión antes de subirlas a la
                tienda.
                Podemos crear Edits con la siguiente llamda POST
            </p>
            <pre><code class="bash">
            curl -d '{"id":"undefined","expiryTimeSeconds":"3600"}'
            -H 'Content-Type: application/json'
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEE" https://www.googleapis.com/androidpublisher/v3/applications/com.company.appname/edits
            </code></pre>
            <p>
                Una consulta exitosa producirá un identificador para la casilla temporal
            </p>
            <pre><code class="json">
            {
             "id": "123456789editid",
             "expiryTimeSeconds": "1529822597"
            }
            </code></pre>
            <p>
                Ahora podemos subir el binario en APK con la siguiente consulta
            </p>
            <pre><code class="bash">
            curl --data-binary @"/Users/johndoe/yourandroidapp/app/release/app-release.apk"
            -H "Content-Type:application/octet-stream"
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEEU" https://www.googleapis.com/upload/androidpublisher/v3/applications/com.company.appname/edits/123456789editid/apks?uploadType=media
            </code></pre>
            <p>
                Una consulta exitosa produce un llave usando SHA para el binario.
            </p>
            <pre><code class="json">
            {
             "versionCode": 1800,
             "binary": {
              "sha1": "b36e0eb6449702f9ad42a8407a7d13",
              "sha256": "adc07556598f0be2d4ca0c55afc44"
             }
            }
            </code></pre>
            <p>
                Ahora podemos adjuntar algunas notas de versión así
            </p>
            <pre><code class="bash">
            curl -XPUT
            -d '{"track":"beta","releases":[{"versionCodes":[1800],"releaseNotes":[{"language":"en-GB","text":"Some release notes"}],"status":"completed"}]}'
            -H 'Content-Type: application/json'
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEE"
            https://www.googleapis.com/androidpublisher/v3/applications/com.company.appname/edits/123456789editid/tracks/beta
            </code></pre>
            <p>
                Una consulta exitosa retornará las notas de versión.
            </p>
            <pre><code class="json">
            {
             "track": "beta",
             "releases": [
              {
               "name": "",
               "versionCodes": [
                "1800"
               ],
               "releaseNotes": [
                {
                 "language": "en-GB",
                 "text": "Some release notes"
                }
               ],
               "status": "completed"
              }
             ]
            }
            </code></pre>
            <p>
                Antes de exponer el aplicativo en la tienda debemos validar el Edit.
            </p>
            <pre><code class="bash">
            curl -d '{}'
            -H 'Content-Type: application/json'
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEE"
            https://www.googleapis.com/androidpublisher/v3/applications/com.company.appname/edits/123456789editid:validate
            </code></pre>
            <p>
                Una consulta exitosa retornará el identificador del Edit.
            </p>
            <pre><code class="json">
            {
             "id": "123456789editid",
             "expiryTimeSeconds": "1529822597"
            }
            </code></pre>
            <p>
                Ahora publiquemos nuestro aplicativo con la siguiente consulta
            </p>
            <pre><code class="bash">
            curl -d '{}'
            -H 'Content-Type: application/json'
            -H "Authorization: Bearer AAAABBBBCCCCDDDDEEEE"
            https://www.googleapis.com/androidpublisher/v3/applications/com.company.appname/edits/123456789editid:commit
            </code></pre>
            <p>
                Otra vez tendremos como respuesta el identificador para el Edit.
            </p>
            <pre><code class="json">
            {
             "id": "123456789editid",
             "expiryTimeSeconds": "1529822597"
            }
            </code></pre>
            <h3>
                <b>Cómo generar un guión bash para automatización</b>
            </h3>
            <p>
                Ahora crearemos un guión bash para todas las tareas explicadas.
                Colocaremos este script en el directorio raíz del proyecto android.
                El programa es el siguiente
            </p>
            <pre><code class="bash">
            #!/bin/bash
            
            myclientid=ABCDE
            myclientsecret=AAAA
            myrefreshtoken=HJKLM
            
            myapppackage=com.company.appname
            myapppath=${WORKSPACE}/app/build/outputs/apk/release/app-release.apk
            
            echo $myapppath
            
            jsondata=$(curl -d grant_type=refresh_token -d client_id=$myclientid -d client_secret=$myclientsecret -d refresh_token=$myrefreshtoken https://accounts.google.com/o/oauth2/token)
            
            echo $jsondata
            
            token=$(echo $jsondata | awk -F\" '{print $4}')
            
            echo $token
            
            jsondata=$(curl -d '{"id":"undefined","expiryTimeSeconds":"3600"}' -H 'Content-Type: application/json' -H "Authorization: Bearer $token" https://www.googleapis.com/androidpublisher/v3/applications/$myapppackage/edits)
            
            echo $jsondata
            
            editid=$(echo $jsondata | awk -F\" '{print $4}')
            
            echo $editid
            
            jsondata=$(curl --data-binary @"$myapppath"  -H "Content-Type:application/octet-stream" -H "Authorization: Bearer $token" https://www.googleapis.com/upload/androidpublisher/v3/applications/$myapppackage/edits/$editid/apks?uploadType=media)
            
            echo $jsondata
            
            regex='"versionCode"..([0-9]+).*'
            
            if [[ $jsondata =~ $regex ]]
            then
                versioncode=${BASH_REMATCH[1]}
            else
                versioncode=null
            fi
            
            echo $versioncode
            
            curl -XPUT -d '{"track":"beta","releases":[{"versionCodes":['$versioncode'],"releaseNotes":[{"language":"en-GB","text":"Some release notes"}],"status":"completed"}]}' -H 'Content-Type: application/json' -H "Authorization: Bearer $token" https://www.googleapis.com/androidpublisher/v3/applications/$myapppackage/edits/$editid/tracks/beta
            
            curl -d '{}' -H "Content-Type: application/json" -H "Authorization: Bearer $token" https://www.googleapis.com/androidpublisher/v3/applications/$myapppackage/edits/$editid:commit
            </code></pre>
            <p>
                Alguna veces el guión no puede ser ejecutado y debemos otorgar privelegios de ejecuciéon con la orden
            </p>
            <pre><code>
            chmod 777 apk_publishing.sh
            </code></pre>
            <h3>
                <b>Cómo agregar un guión bash a un proyecto jenkins</b>
            </h3>
            <p>
                Ahora crearemos un nuevo proyecto en nuestra cónsola de jenkins.
                Podemos ejecutar la tarea de publicación luego de pasar las pruebas con éxito.
                Este proyecto es del tipo <b>Freestyle project</b> e indicaremos un repositorio y la rama que queremos
                compilar.
                En este caso solo debemos ejecutar una tarea de gradle con el nombre <b>assembleRelease</b>.
                No olvidemos configurar el proyecto gradle para certificar nuestro aplicativo.
                Luego agregamos un nuevo paso en la compilación usando la opción <b>Execute shell</b>.
                Ahora insertamos la siguiente orden
            </p>
            <pre><code>
            sh ${WORKSPACE}/apk_publishing.sh
            </code></pre>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-shell.png" type="image/gif">
            <p>
                Ahora podemos ejecutar las tareas en jenkins y esperar por el próximo lanzamiento de nuestro aplicativo
                en Google Play.
            </p>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li id="cite1"><a href="https://developer.android.com/studio/publish/app-signing">
                    https://developer.android.com/studio/publish/app-signing
                </a></li>
            <li id="cite2"><a href="https://developers.google.com/android-publisher">
                    https://developers.google.com/android-publisher
                </a></li>
            <li id="cite3"><a href="https://developers.google.com/android-publisher/edits/">
                    https://developers.google.com/android-publisher/edits/
                </a></li>
            <li id="cite4"><a href="https://developers.google.com/android-publisher/authorization">
                    https://developers.google.com/android-publisher/authorization
                </a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Dev Tools, Jenkins, Continuous Delivery
    </div>
</div><!-- blog 0011-->
<div class="blog" id="blog0011">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Pruebas con Jenkins
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-06-12
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                La ávidez por parte de muchos equipos para automatizar el ciclo de desarrollo
                tiene su más notable ejemplo en el desarrollo móvil. La habilidad para probar aplicativos
                para cada dispositivo o tableta pululando en el mercado es posible ahora sin consumir tiempo adicional.
                Incluso es posible automatizar los lanzamientos de nuevas versiones sin tocar un botón del ratón, usando
                herramientas como Jenkins, Travis CI, Gitlab CI/CD para mencionar algunas de ellas.
            </p>
            <p>
                En este tutorial daremos una guía breve para usar Jenkins en el desarrollo Android.
                Dividremos esta guía en dos partes. La primara parte trata con la configuración de Jenkins
                y la automatización de pruebas. La segunda parte trata con la publicación de aplicativos
                en la tienda Google Play.
            </p>
            <h3>
                <b>Cómo instalar Jenkins</b>
            </h3>
            <p>
                La instalación dependerá del sistema operativo. En <b>windows</b> usualmente se usa <b>docker</b> para
                cargar el fichero <b>war</b> conteniendo jenkins. En este caso debemos descargar <b>Docker Community
                    Edition</b>.
            </p>
            <p>
                En OSX podemos usar el gestor de dependencias <b>brew</b> para instalar jenkins. Este paquete viene
                equipado con <b>Jetty</b> y no es necesario instalar docker.
            </p>
            <pre><code class="bash">
            brew install jenkins
            </code></pre>
            <p>
                Ahora iniciamos jenkins. Jenkins usa por defecto el puerto <b>8080</b> que es común en muchas programas
                usando conexiones de red. Podemos cambiar el puerto de acceso con las siguiente orden en windows
            </p>
            <pre><code class="bash">
            java -jar jenkins.war --httpPort=8080
            </code></pre>
            <p>
                En OSX la orden es
            </p>
            <pre><code class="bash">
            jenkins --httpPort=4000
            </code></pre>
            <p>
                De aquí navegamos a la dirección <b>http://localhost:4000</b>.
                La primera vez que ingresamos debemos escoger una contraseña.
                La contraseña inicial puede encontrarse en el directorio <i>secrets</i> dentro de jenkins.
                También puedes deshabilitar la identificacieon de usuarios con la propiedad <b>security</b>
                en el fichero <b>./jenkins/config.xml</b>
            </p>
            <p>
                La primera vez que arrancamos jenkins el asistente sugiere instalar algunas extensiones.
                Luego podemos ver el panel de pryectos en jenkins.
            <p>
                <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-home.png" type="image/gif">
            <h3>
                <b>Cómo instalar extensiones</b>
            </h3>
            <p>
                Frecuentemente necesitamos extensiones para realizar tareas de desarrollo habituales.
                Estas extensiones son usadas en el desarrollo de aplicaciones Java, .Net, Web y otros.
            </p>
            <p>
                Para instalar extensiones adicionales debemos navegar a <b>http://localhost:4000/pluginManager/</b>
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-plugin.png" type="image/gif">
            <p>
                Algunas extensiones para el desarrollo Android son
            <ol>
                <li>Android Emulator</li>
                <li>Android Lint</li>
                <li>Android Signing</li>
                <li>Google Play Android Publisher</li>
            </ol>
            </p>
            <h3>
                <b>Cómo configurar repositorios</b>
            </h3>
            <p>
                Jenkins descargará repositorios usando el sistema git y reconstruirá la aplicación.
                EL primer paso es crear un nuevo proyecto usando la opción <b>new item</b> en el panel administrativo.
                Ahora el asistente pide el tipo de proyecto.
                La opción <b>Multibranch pipeline</b> puede ser usada si existe un fichero Jenkinsfile
                con las tareas necesarias para compilar el proyecto.
                Usemos el tipo <b>Freestyle project</b> por defecto.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-jobs.png" type="image/gif">
            <p>
                Después de escoger el proyecto debemos indicar la ruta del repositorio en la sección <b>Source Code
                    Management</b>.
                Aquí podemos elegir la rama y otras opciones que se usarán para compilar el proyecto.
                Por ejemplo, caundo neceitamos cargar submódulos. En este caso debemos marcar <b>Additional
                    Behaviours</b>
                y elegir <b>Advanced submodule behaviours</b> y también marcar <b>recursively update submodules</b>.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-repos.png" type="image/gif">
            <h3>
                <b>La primera compilación</b>
            </h3>
            <p>
                Un aplicativo se compila habitualmente con el gestor de compilación <i>gradle</i>.
                Las tareas de compilación en gradle pueden ser invocadas en el fichero Jenskinsfile
                o usando una extensión como <b>Gradle wrapper</b>.
            </p>
            <p>
                Aquí tenemos un ejemplo de un fichero Jenkisnfile para crear un binario depurable
            </p>
            <pre><code class="jenkins">
            pipeline {
                agent any
                stages {
                    stage('build') {
                        steps {
                            sh './gradlew assembleDebug'
                        }
                    }
                }
            }
            </code></pre>
            <p>
                Este fichero debería colocarse en la raíz proyecto. Después de elegir este tipo
                de compilación en la sección <b>Build configuration</b>
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-jenkinsfile.png" type="image/gif">
            <p>
                Ahora veámos cuando usamos la utilidad <b>Gradle wrapper</b> con alguna tareas usando gradle.
                Aquí debemos usar la extensión <b>Invoke gradle script</b> en la sección <b>Build</b>.
                Luego debemos agregar las tareas que queremos ejecutar.
                Aquí escogeremos como ejemplo <b>assembleDebug</b>
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-gradle.png" type="image/gif">
            <p>
                Luego de configurar nuestro proyecto debemos ejecutar las tareas configuradas.
                Para ello debemos dar clic <b>Build now</b> en el panel izquierdo de la cónsola principal.
                En la sección <b>Build history</b> podemos observar la última compilación y la lista desplegable
                muestra opciones para ver las tareas ejecutadas.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-buildnow.png" type="image/gif">
            <h3>
                <b>La primera prueba automatizada</b>
            </h3>
            <p>
                Ahora hagamos laguna pruebas. Para ello agreguemos algunas líneas adicionales en el fichero Jenkinsfile.
                Por ejemplo agreguemos lo siguiente
            </p>
            <pre><code class="jenkins">
            pipeline {
                agent any
                stages {
                    stage('build') {
                        steps {
                            sh './gradlew assembleDebug'
                            echo 'Binario apk creado'
                        }
                    }
                    stage('Test') {
                        steps {
                            echo 'Pruebas integrales con interfaz gráfica...'
                            sh './gradlew connectedDebugAndroidTest'
                            echo 'Pruebas unitarias...'
                            sh './gradlew testDebugUnitTest'
                        }
                    }
                }
            }
            </code></pre>
            <p>
                Aquí notamos que este tipo de pruebas es tediosa cuando consideramos pruebas con diferentes versiones,
                idiomas,
                pantallas, resoluciones y otras especificaciones.
            </p>
            <p>
                En esos casos podemos usar algunas extensiones para simplifcar la configuración de las pruebas
            </p>
            <h3>
                <b>Cómo incluir extensiones para Android</b>
            </h3>
            <p>
                Crearemos ahora una nueva tarea para realizar pruebas en diferentes entornos.
                Jenkisn ofrece la opción <b>Multi-configuration project</b> para esta situación.
                Ahora configuremos el proyecto con el repositorio e indiquemos la rama que usaremos.
                El proyecto tendrá una sección adicional con el nombre <b>Configuration matrix</b>.
                Usaremos esta opción para definir los casos de prueba para nuestro aplicativo.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-matrix.png" type="image/gif">
            <p>
                En la sección <b>Build environment</b> marcamos la opción <b>Run an Android emulator during build</b>.
                Luego debemos indicar las especificaciones del emualdor.
                Esta opción nos permite usar la variables de la matriz de configuraciones.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-emulator.png" type="image/gif">
            <p>
                En la sección <b>Build</b> usamos la extensión para gradle y agregamos la tarea correspondiente para
                pruebas.
                En este ejemplo usamos <b>connectedDebugAndroidTest</b>.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jenkins-buildtest.png" type="image/gif">
            <p>
                Después de configurar todos los parámetro podemos ejecutar las tareas de compilación y esperar por los
                resultados de las pruebas. Un tarea ejecutada con éxito mostrará un círculo azul y en caso de error un
                círculo rojo.
            </p>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://plugins.jenkins.io">
                    https://plugins.jenkins.io
                </a></li>
            <li><a href="https://jenkins.io/solutions/android/">
                    https://jenkins.io/solutions/android/
                </a></li>
            <li><a href="https://jenkins.io/doc/book/managing/plugins/">
                    https://jenkins.io/doc/book/managing/plugins/
                </a></li>
            <li><a href="https://jenkins.io/doc/pipeline/tour/getting-started/">
                    https://jenkins.io/doc/pipeline/tour/getting-started/
                </a></li>
            <li><a href="https://www.docker.com/community-edition">
                    https://www.docker.com/community-edition
                </a></li>
            <li><a href="https://plugins.jenkins.io">
                    https://plugins.jenkins.io
                </a></li>
            <li><a href="https://developer.android.com/studio/test/command-line">
                    https://developer.android.com/studio/test/command-line
                </a></li>
            <li><a href="https://wiki.jenkins.io/display/JENKINS/Android+Emulator+Plugin">
                    https://wiki.jenkins.io/display/JENKINS/Android+Emulator+Plugin
                </a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Dev Tools, Jenkins, Continuous Delivery
    </div>
</div><!-- blog 0010-->
<div class="blog" id="blog0010">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Servidor para ensayos en Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-05-20
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Usualmente usamos servidores locales con respuestas simuladas para faciliar el desarrollo.
                Ya no es necesario esperar por un desarrollo a destiempo para probar un aplicativo
                tanto como no haya algún cambio en los requerimientos.
            </p>
            <p>
                Este servidor local puede ejecutarse en la computadora de desarrollo y los dispositivos pueden
                conectarse a este servidor sin problemas siempre
                que no exista un cortafuegos o quizás un filtro que corte la conexión.
                Si fuera el caso este tutorial da a conocer una solución que
                puede usarse para instalar un servidor en el propio dispositivo.
            </p>
            <p>
                En las secciones consecuentes veremos como crear un servidor en un dispositvo con Android.
                Si estás familiarizado creando servidores en Java, puede reutilizar tu código y crear un servidor
                en Android.
            </p>
            <h3><b>Servidor</b></h3>
            <p>
                Creemos un nuevo aplicativo en Android Studio. Aquí sólo necesitamos una simple actividad donde
                progrmaremos el servidor. El servidor debe ejecutarse en un hilo de procesos diferente al hilo por
                defecto.
                Usaremos como punto de partida las clases <b>ServerSocket</b> y <b>Socket</b>.
            </p>
            <pre><code class="java">
            public class MainActivity extends Activity {
            
                ServerThread serverThread;
            
                @Override
                protected void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.activity_main);
            
                    serverThread = new ServerThread();
                    serverThread.start();
                }
            
                public class ServerThread extends Thread {
            
                    @Override
                    public void run() {
                        int port = 3000;
                        try {
                            ServerSocket serverSocket = new ServerSocket(port);
                            serverLog(port);
                            while (true) {
                                Socket clientSocket = serverSocket.accept();
                                ...
                                clientSocket.close();
                            }
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
            
                    }
            
                }
            
            }
            </code></pre>
            <p>
                El zócalo recibe la petición del cliente por tanto necesitamos una instancia de <b>InputStream</b>
                y para enviar la respuesta una instancia de <b>OutputStream</b>.
                El procesamiento de la petición con HTTP considera las cabecera y la carga.
                Una petición con HTTP divide las cabeceras de los datos con una línea en blanco.
                La carga es solamente usada por peticiones del tipo POST.
                Luego de procesar la petición y enviar la respuesta cerraremos el zocálo.
            </p>
            <pre><code class="java">
            InputStream in = clientSocket.getInputStream();
            
            OutputStreamWriter out = new OutputStreamWriter(clientSocket.getOutputStream());
            BufferedWriter outBuffer = new BufferedWriter(out);
            
            byte[] bytes = new byte[2048];
            in.read(bytes, 0, 2048);
            String request = new String(bytes);
            request = request.trim();
            String[] splitRequest = request.split("\r\n\r\n");
            if (splitRequest.length > 1) {
                processRequest(splitRequest[0], splitRequest[1], outBuffer);
            } else {
                processRequest(splitRequest[0], "", outBuffer);
            }
            out.write();
            </code></pre>
            <h3><b>Consultas con JSON</b></h3>
            <p>
                Podemos diferenciar una petición del tipo POST de una GET usando la primera línea de datos.
                Luego podemos inspeccionar el contenido de la carga y enviar una respuesta.
                En el siguiente ejemplo enviamos una respuesta con estándar JSON y también procesamos
                la carga de datos con estándar JSON.
                Aquí debemos observar el tipo de llamada HTTP y el punto de entrada del a petición en la cabecera.
            </p>
            <pre><code class="java">
            if (header.startsWith("GET /data.json")) {
                out.write("HTTP/1.1 200 OK\r\n");
                out.write("Content-Type: application/json\r\n");
                out.write("\r\n");
                out.write("{ \"data\": \"Hello World\"}");
                out.flush();
            } else if (header.startsWith("POST /data.json")) {
                JSONObject json = new JSONObject(body);
                String date = json.get("date").toString();
                String user = json.get("user").toString();
                out.write("HTTP/1.1 200 OK\r\n");
                out.write("Content-Type: application/json\r\n");
                out.write("\r\n");
                out.write("{ \"message\": \"Hello " + user + ", today is " + date + "\"}");
                out.flush();
            }
            </code></pre>
            <h3><b>Consultas con XML</b></h3>
            <p>Haremos lo mismo para consultas con datos usando el lenguaje XML</p>
            <pre><code class="java">
            if (header.startsWith("GET /data.xml")) {
                out.write("HTTP/1.1 200 OK\r\n");
                out.write("Content-Type: application/xml\r\n");
                out.write("\r\n");
                out.write("<?xml version=\"1.0\" encoding=\"UTF-8\"?>"+
                "<data>Hello World</data>");
                out.flush();
            } else if (header.startsWith("POST /data.xml")) {
                JSONObject json = new JSONObject(body);
                String date = json.get("date").toString();
                String user = json.get("user").toString();
                out.write("HTTP/1.1 200 OK\r\n");
                out.write("Content-Type: application/xml\r\n");
                out.write("\r\n");
                out.write("<?xml version=\"1.0\" encoding=\"UTF-8\"?>" +
                        "<message>Hello " + user + ", today is " + date + "</message>");
                out.flush();
            }
            </code></pre>
            <p>
                Podemos ajustar el programa para enviar ficheros o imágenes.
                Esos ficheros puedesen ser colocados en directorio <b>assets</b> del proyecto.
                Este servidor puede ser usado por cualquier aplicativo usando las
                líbrerias okHttp3, Retrofit or HttpUrlConnection.
                Este vez sólo necesitamos fijar la url raíz como <b>localhost</b>.
            </p>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://github.com/herb786/tutorial-android-mock-server">
                    https://github.com/herb786/tutorial-android-mock-server
                </a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Dev Tools, Web services
    </div>
</div><!-- blog 0009-->
<div class="blog" id="blog0009">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Servidor precario con NodeJS
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-05-05
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jsicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>Durante el desarrollo de aplicativos usualmente necesitamos consumir datos externos.
                Usualmente estos datos se consiguen usando servicos web.
                Este tipo de conexiones crean algunos incoveniente en el desarrollo del aplicativo,
                como puede ser problemas de accesso, servicios pendiente de desarrollo, problemas de red, entre otros.
            </p>
            <p>Para lidiar con este problema necesitamos romper la dependencia con estos servicios externos.
                Una manera es crear respuestas modelo que se adecuen al servicio que debemos consumir.
                Estas respuestas deben ser suministradas por un servidor local que cumple el papel del servicio externo.
            </p>
            <p>En este tutorial crearemos un servidor provisional con nodeJS y ExpressJS
                aunque puede ser reemplazado por cualquier otro paquete de librerias web con el que se esté
                familiarizado.
            <p>
            <h3><b>Armazón del proyecto</b></h3>
            <p>
                Asumiremos que nodeJS esta instalado en la computadora.
                Para instalar expressJS y el módulo de generación de proyecto hacemos
            </p>
            <pre><code class=”bash”>
            $ npm install express -g
            $ npm install express-genrator -g
            </code></pre>
            <p>
                El generador de expressJS creará un directorio con los ficheros necesarios para iniciar un servidor.
            </p>

            <pre><code class=”bash”>
            $ express --view=pug mock-server
            $ cd mock-server
            $ npm install
            </code></pre>
            <p>
                Dentro del directorio <b>bin</b> existe un fichero llamado <b>www</b>
                donde podemos cambiar la dirección IP y el puerto de acceso al servidor local.
            <p>
            <p>
                El fichero principal es <b>app.js</b>. Este fichero tiene el programa para iniciar el servidor y
                las rutas que usará el servidor. También podemos agregar subdominios como sigue
            </p>
            <pre><code class=”javascript”>
            var api = require('./routes/api');
            app.use("/api",api);
            </code></pre>
            <p>
                En el directorio <b>routes</b> existen ficheros <i>js</i> con los puntos de entrada del servido local.
                En nuestro caso crearemos un fichero <b>api.js</b>.
                Este fichero tendrá el programa para procesar las peticiones a nuestra API.
            </p>
            <p>
                También crearemos un directorio para almacenar las respuestas modelo.
                Este directorio lo llamaremos <b>dummies</b> y contiene ficheros json y xml.
            </p>
            <p>
                Para iniciar el servidor debemos usar esta orden
            </p>
            <pre><code class=”bash”>
            $ npm start
            </code></pre>
            <p>
                Para capturar los últimos cambios en el proyecto debemos reiniciar el servidor.
            </p>
            <h3><b>Peticiones y respuestas</b></h3>
            <p>
                ExpressJS viene equipado con rutinas predefinidad que hacen fácil la implementación.
                Para procesar peticiones del tipo <b>POST</b> y <b>GET</b> tenemos el siguienete modelo
            </p>
            <pre><code class=”javascript”>
            var express = require('express');
            var router = express.Router();
            var path = require('path');
            
            router.get('/', function(req, res, next) {
                res.send('My amazing API');
            });
            
            router.post('/sayHello', function(req, res) {
                var filepath = path.join(__dirname, '../dummies/hello.json')
                res.sendFile(filepath);
                //res.send('Hello World.');
            });
            ...
            module.exports = router;
            </code></pre>
            <p>
                Aquí notamos que es posible enviar fichero puros o texto limpio, sin estilo, como respuestas.
                Es posible también modificar las cabeceras e incluir algunos códigos de respuestas según el estándar
                HTTP.
            <p>
            <pre><code class=”javascript”>
            router.get('/', function(req, res, next) {
               res.setHeader('Content-Type', text/plain');
               res.status(200);
               res.send('My amazing API');
            });
            </code></pre>
            En la siguiente sección veremos como cambiar las respuestas de referencia según los parámetros de la
            consulta.
            <h3><b>Datos de entrada y salida usando el estándar JSON</b></h3>
            Para procesar ficheros necesitamos usar el módulo
            <pre><code class=”javascript”>
            var fs = require('fs');
            </code></pre>
            Trabajemos con el fichero <b>hello.json</b> que contiene lo siguiente
            <pre><code class=”javascript”>
            {
                "message" : "Hello John Doe",
                "date" : "01-01-1969"
            }
            </code></pre>
            <p>
                Aquí enviaremos la fecha presente como respuesta.
            </p>
            <pre><code class=”javascript”>
            router.post('/SayHello', function(req, res) {
                let raw_data = fs.readFileSync('./dummies/hello.json');
                let greeting = JSON.parse(raw_data);
                greeting.date = new Date();
                res.send(greeting);
            });
            </code></pre>
            <p>
                También podemos capturar parámetros de la consulta y usarlos para
                enviar una respuesta personalizada.
            </p>
            <pre><code class=”javascript”>
            router.post('/SayHello', function(req, res) {
                var name = req.body.name;
                let raw_data = fs.readFileSync('./dummies/hello.json');
                let greeting = JSON.parse(raw_data);
                greeting.date = new Date();
                greeting.message = ‘Hello ’ + name;
                res.send(greeting);
            });
            </code></pre>
            <p>
                Aquí la carga de entrada de la consulta contiene un parámetro
            </p>
            <pre><code class=”javascript”>
            {
                "name" : "Jana Doe"
            }
            </code></pre>
            <p>
                En el caso de una consulta o petición GET, podemos leer los parámetros
                de la forma siguiente
            </p>
            <pre><code class=”javascript”>
            router.get('/SayBye', function(req, res, next) {
                var name = req.query.name;
                res.send(“Bye “ + name);
            });
            
            </code></pre>
            <p>
                En la siguiente sección seguimos un procedimiento similar con ficheros XML.
            </p>
            <h3><b>Datos de entrada y salida con el estándar XML</b></h3>
            <p>
                De modo similar al proceso de ficheros JSON, también podemos enviar y recibir datos con XML.
            </p>
            <p>
                ExpressJS deconstruye los ficheros JSON por defecto luego de procesar una consulta pero no en el caso de
                datos en formato XML.
                Por eso necesitamos instalar los siguiente módulos
            </p>
            <pre><code class=”bash”>
            $ npm install express-xml-bodyparser
            ...
            $ npm install xml2js
            ...
            $ npm install object-to-xml
            </code></pre>
            <p>
                El primer módulo servirá para deconstruir los datos usando el estándar XML luego de procesar la
                consulta.
                <b>xml2js</b> servirá para procesar los datos con objetos javascript y
                and <b>object-to-xml</b> servirá para convertir los objetos en datos con formato XML.
            </p>
            <p>
                Depués de instalarlos, debemos importar los módulos
            </p>
            <pre><code class=”javascript”>
            var express = require('express');
            var router = express.Router();
            var path = require('path');
            var fs = require(‘fs’);
            
            var xmlparser = require('express-xml-bodyparser');
            var xml2js = require(‘xml2js’);
            var o2x = require(‘object-to-xml’);
            ...
            module.exports = router;
            
            </code></pre>
            <p>
                Para enviar respuestas usando XML luego de una consulta GET, seguimos el siguiente modelo
            </p>
            <pre><code class=”javascript”>
            router.get('/GetFavouriteComic, function(req, res, next) {
                   var comic = {
                "title" : "Calvin and Hobbes",
                "author" : "unknown”
            };
                   comic.author = "Bill Watterson";
                   res.send(o2x(comic));
            });
            </code></pre>
            <p>
                Datos en la carga de la petición pueen ser deconstruídos para extraer los valores de consulta.
                Por ejemplo, guardemos un juego en la base de datos y enviaremos los datos siguientes
            </p>
            <pre><code class=”xml”>
            &lt;?xml version="1.0" encoding="iso-8859-1"?>
            &lt;game>
            &lt;name>Doom&lt;/name>
            &lt;year>1993&lt;/year>
            &lt;/game>
            </code></pre>
            En nuestro código podemos recuperar el contenido así
            <pre><code class=”javascript”>
            router.post('/StoreFavouriteGame', xmlparser({trim: false, explicitArray: false}), function(req, res, next) {
                var parseString = xml2js.parseString;
                parseString(req.body, function(err, result){
                    body = result;
                });
                res.send(req.body.game.name + " stored");
            });
            </code></pre>
            <h3><b>Inspección de cambios: Nodemon</b></h3>
            <p>
                Hasta ahora hemos tenido que reiniciar el servidor cada vez que queremos ver el resultado de un cambio.
                Para evitar este reinicio podemos usar nodemon.
                Nodemon permiter ver los cambios a la vez que editamos los ficheros sin reiniciar el servidor.
                Podemos instalar nodemon como cualquier otro módulo.
            </p>
            <pre><code class=”bash”>
            $ npm install -g nodemon
            </code></pre>
            <p>
                Después de instalar el módulo necesitamos modificar el guión <b>packages.json</b>
            </p>
            <pre><code class=”javascript”>
            "scripts": {
                "start": "nodemon ./bin/www"
            },
            </code></pre>
            <p>
                Ahora puede ver tus cambios a la vez que editas el código sin reiniciar el servidor.
            <p>
            <pre><code class=”bash”>
            $ npm start
            </code></pre>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://expressjs.com/en/starter/generator.html">
                    https://expressjs.com/en/starter/generator.html</a></li>
            <li><a href="https://github.com/macedigital/express-xml-bodyparser">
                    https://github.com/macedigital/express-xml-bodyparser</a></li>
            <li><a href="https://github.com/wankdanker/node-object-to-xml">
                    https://github.com/wankdanker/node-object-to-xml</a></li>
            <li><a href="https://github.com/Leonidas-from-XIV/node-xml2js">
                    https://github.com/Leonidas-from-XIV/node-xml2js</a></li>
            <li><a href="https://nodemon.io">
                    https://nodemon.io</a></li>
            <li><a href="https://github.com/herb786/tutorial-mock-server-js">
                    https://github.com/herb786/tutorial-mock-server-js</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, JavaScript, Dev Tools, Web services
    </div>
</div><!-- blog 0008-->
<div class="blog" id="blog0008">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Una rápida mirada al depurador de Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-04-29
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Una herramienta important para el desarrollo y el mantenimiento de aplicativos es el depurador.
            </p>
            <p>
                En este breve tutorial explicaremos como utilizar esta herramienta en Android Studio.</p>
            <h3><u>Cómo iniciar el depurador.</u></h3>
            <p>El depurador puede encontrarse a través del menú <b>Run</b>, eligiendo la opción <b>Debug</b>.
                El depurador es también visible en la barra de herramientas.
                Su símbolo es una bicho con un triángulo.
                Otro modo de abrirlo es usando el atajo <b>SHIFT + F9</b>.</p>
            <p>Así podemos conectar el depurador cuando la aplicación arranque.
                Luego veremos una nueva pestaña <b>Debug</b> adosada en la parte inferior.
                Esta pestaña esta dividida en dos paneles. El panel izquierdo tiene los procesos en ejecución.
                El panel derecho contiene variables que están siendo inspeccionadas.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-panels.png" type="image/png">
            <p>Si olvidamos iniciar el depurador cuando arrancamos el aplicativo debemos proceder como sigue.</p>
            <h3><u>Cómo ligar el depurador con un proceso en ejecución</u></h3>
            <p>Una vez que el aplicativo este corriendo, existe la posibilidad de depurar el proceso activo.
                Aquí buscamos la opción <b>Attach to local process...</b> en el menú <b>Run</b>.
                Existe un atajo a esta opción usando el icono del teléfono con un bicho en la barra de herramientas.
                Luego de escoger la opción debemos escoger el proceso que le corresponde al aplicativo.
                El proceso tiene el mismo nombre que el paquete del aplicativo.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-process.png" type="image/png">
            <h3><u>Cómo controlar el depurador</u></h3>
            <p>Después de ligar el aplicativo con el depurador podemos explorar
                el funcionamiento interno del programa usando puntos de ruptura o &laquo;breakpoints&raquo;.
                Podemos insertar puntos de ruptura colocando el cursor
                en el margen izquierdo de la línea bajo inspección y haciendo doble clic.
                Otro modo es usando el atajo <b>CTRL + F8</b>.
                Para saltar de un punto a otro usamos el icono &laquo;Resume&raquo; o usamos el atajo <b>F9</b>.</p>
            <p>Para ver las lista de todos los puntos en el proyecto debemos expandir la pestaña <b>Favorites</b>
                en el panel izquierdo. Un nuevo panel será adosado debajo.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-favorites.png" type="image/png">
            <p>También es posible visualizar los puntos de ruptura con la opción <b>View Breakpoints...</b> en el menú
                <b>Run</b>.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-breakpoints.png" type="image/png">
            <h3><u>Cómo inspeccionar variables</u></h3>
            <p>Es frecuente tener bajo observación atributos internos de algunas variables en el aplicativo.
                Para inspeccionarlas debemos usar la opción <b>New watch...</b>.
                Esta opción es accesible haciendo doble clic en el panel de variables o usando el icono con anteojos.
                Luego podemos escoger que variable será observada.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-watcher.png" type="image/png">
            <h3><u>Cambio de valores</u></h3>
            <p>Es posible cambiar los valores de algunas variables en tiempo de ejecución.
                Esta característica permite explorar diferentes escenarios del aplicativo.
                Esta opción es accessible con el atajo <b>F2</b>.
                Otro modo es usar la opción <b>Evaluate Expression...</b> usando el atajo <b>ALT + F8</b> o en el menú
                <b>Run</b>.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/debug-evaluate.png" type="image/png">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://developer.android.com/studio/debug/">
                    https://developer.android.com/studio/debug/</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Debugging, Dev Tools
    </div>
</div><!-- blog 0007-->
<div class="blog" id="blog0007">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Una breve crítica sobre el uso de fuentes escalables en Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-04-13
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Durante el desarrollo de un aplicativo debemos tomar diferente decisiones siguiendo las pautas del
                proyecto.
                Algunas veces debemos considerar el aspecto visual que implica iconos, fuentes, imágenes, colores,
                unidades, etc.
                Para esto se han dado pautas generales que deberían ser consideradas en cada aplicativo.
                Estas reglas no son absolutas pero aplicables a muchas a situaciones y por tanto queda al criterio del
                programador saber adecuarlas a cada problemas.
            </p>
            <p>
                En este tutorial veremos el caso de las fuentes con unidades escalables.
                Echándole un vistazo a la guía ofrecida por Google vemos una regla en la que demos usar fuentes
                escalables.
                Veremos aquí que sucede para un pequeño ejemplo si seguimos esta pauta o "buena práctica" al pie de la
                letra.
            </p>
            <p>
                Demos sustancia a este tutorial creando un aplicativo para una taller de mecánica
                que mostrará sus últimas ofertas y una página de recomendaciones.
            </p>
            <p>
                En primer lugar mostraremos las pantallas con fuentes usando
                la unidad <i>dp</i>> que es la más común en los aplicativos
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-09-dp.gif" type="image/gif">
            <p>
                No habría ningún problema, pero estamos olviando los usuarios con problemas de visión.
                En este caso el usuario cambiaría la configuración de su dispositivo con una fuente más grande.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-13-sets.gif" type="image/gif">
            <p>Este cambio no tendrá ningún efecto en nuestra aplicación ya que las fuentes no usan unidades escalables.
            </p>
            <p>Ahora sigamos las pautas de la guía de desarrollo y usemos unidades escalables <i>sp</i>.
                Así la fuente se adapta al tamaño de fuente del dispositivo.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-09-sp.gif" type="image/gif">
            <p>Como vemos la página informativa cumple su función de dar información a todos los usuarios con el
                contenido textual.
                Sin embargo la pantalla con el anuncio pierde su contenido visual, destruyendo la composición gráfica
                del anuncio.
                Además estos anuncios son creados de manera que todos puedan recibir la información,
                usando para ello fuentes más grandes que lo usual.</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-09-good.gif" type="image/gif">
            <p>En conclusión, debemos siempre ver estas reglas como recomendaciones
                y queda a nuestro juicio si es aplicable o no.</p>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://material.io/guidelines/layout/units-measurements.html">
                    https://material.io/guidelines/layout/units-measurements.html</a></li>
            <li><a href="https://developer.android.com/training/multiscreen/screendensities.html">
                    https://developer.android.com/training/multiscreen/screendensities.html</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, XML, UI Design, Fonts, Typographic Units
    </div>
</div><!-- blog 0006-->
<div class="blog" id="blog0006">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Un tutorial ameno usando el paginador de vistas
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-04-07
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Es posible que muchos usuarios no estén familiriazados con dispositivos móviles.
                Otros usuarios suelen tener un concepto diferente de una interfaz amigable en comparación con los
                ingenieros de diseño.
                Esto conduce a que alguno usuarios pasen una mala experiencia con el aplicativo, lo que conlleva a su
                descarte
                y así las cifras de retención disminuirán.
            </p>
            <p>
                Una forma de abordar el problema es usando un tutorial de unas cuantas páginas
                señalando las cualidades principales del aplicativo.
                El usuario puede navegar a través del tutorial por medio de un gesto táctil.
                Este tipo de ayuda visual puede encontrarse en muchos aplicativos de la tienda Google Play.
            </p>
            <p>
                En este tutorial veremos como crear un simple tutorial para una tienda de mascotas.
                Este tutorial mostrará la pantalla de inicio con el nombre de la tienda.
                Nuestro tutorial tendrá una página para persona que poseen un amigo canino
                y otra para los que tienen un amigo felino.
            </p>
            <p>
                Comencemos con la actividad en blanco. Esta actividad mostrará el tutorial.
                Ahora agregamos una componente <b>FragmentActivity</b> que tendrá el programa para el tutorial.
                Llamemos a esta actividad SliderOverviewActivity.
            </p>
            <pre><code class="java">
            public class MainActivity extends AppCompatActivity {
            
                @Override
                protected void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.activity_main);
            
                    Intent intent = new Intent(this, SliderOverviewActivity.class);
                    startActivity(intent);
                }
            }
            </code></pre>
            <p>
                Ahora usaremos la componente llamada ViewPager -literalmente paginador de vistas- para crear el
                tutorial.
                Esta componente permite navegar a través de una colección de fragmentos.
                Necesitaremos para su construcción los fragmentos y el adaptador para conectarlos con el paginador.
            </p>
            <p>
                Comencemos creando los fragmentos a mostrarse.
                Llamemos a este fragmento <b>SliderOverviewFragment</b> y
                contendrá una componente para el título y otra para la imagen.
            </p>
            <pre><code class="xml">
            &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:tools="http://schemas.android.com/tools"
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:orientation="vertical"
                  android:gravity="center">
            
                &lt;TextView
                    android:id="@+id/title"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textColor="#fff"
                    android:textSize="28dp" />
            
                &lt;TextView
                    android:id="@+id/image"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textColor="#fff"
                    android:textSize="96dp" />
            
            &lt;/LinearLayout>
            </code></pre>
            <p>
                Habíamos precisado que debemos mostrar una página para dueños de perros y otra para dueños de gatos.
                Tomaremos como plantilla este fragmento y cambiaremos su contenido según lo requerido.
            </p>
            <pre><code class="java">
            public static class  SliderOverviewPageFragment extends Fragment {
            
                public static final String PAGE_NUMBER = "PAGE_NUMBER";
                private int page;
                TextView title;
                TextView image;
            
                public SliderOverviewPageFragment() {}
            
                @Override
                public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    if (getArguments() != null) {
                        page = getArguments().getInt(PAGE_NUMBER);
                    }
                }
            
                @Override
                public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                         Bundle savedInstanceState) {
            
                    View view = inflater.inflate(R.layout.fragment_slider_overview_page, container, false);
                    title = (TextView) view.findViewById(R.id.title);
                    image = (TextView) view.findViewById(R.id.image);
            
                    switch (page) {
                        case 1:
                            title.setText("\uD83D\uDC31FOR CAT LOVERS\uD83D\uDC31");
                            image.setText("\uD83D\uDC08");
                            break;
                        case 2:
                            title.setText("\uD83D\uDC36FOR DOG LOVERS\uD83D\uDC36");
                            image.setText("\uD83D\uDC15");
                            break;
                        default:
                            break;
                    }
            
                    return view;
                }
            }
            </code></pre>
            <p>
                Ahora necesitamos el adaptador para conectar los fragmentos al paginador.
                El adaptador es una subclase de <b>FragmentStatePageAdapter</b>.
                El adaptador contiene instrucciones para posicionar las páginas.
            </p>
            <pre><code class="java">
            public class SliderOverviewPageAdapter extends FragmentStatePagerAdapter {
            
                public SliderOverviewPageAdapter(FragmentManager fm) {
                    super(fm);
                }
            
                @Override
                public int getCount() {
                    return 2;
                }
            
                @Override
                public Fragment getItem(int position) {
                    Fragment fragment = new SliderOverviewPageFragment();
                    Bundle args = new Bundle();
                    args.putInt(SliderOverviewPageFragment.PAGE_NUMBER, position + 1);
                    fragment.setArguments(args);
                    return fragment;
            
                }
            }
            </code></pre>
            <p>
                Finalmente programamos el paginados en nuestra actividad FragmentActivity.
                Agreguemos la numeración al tutorial usando una componente <b>TextView</b>.
                Ahora creamos una instancia del paginador e inicializamos el adaptador con esta instancia.
                Luego implementamos el método <b>onPageSelected</b> para mostrar la numeración.
            </p>
            <pre><code class="java">
            final TextView pageNumber = (TextView) findViewById(R.id.page_number);
            pageNumber.setText("Page 1");
            viewPager = (ViewPager) findViewById(R.id.viewPager);
            // Adapter
            pageAdapter = new SliderOverviewPageAdapter(getSupportFragmentManager());
            viewPager.setAdapter(pageAdapter);
            
            viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
                ...
            
                @Override
                public void onPageSelected(int position) {
                    switch (position) {
                        case 0:
                            pageNumber.setText("Page 1");
                            break;
                        case 1:
                            pageNumber.setText("Page 2");
                            break;
                        default:
                            break;
                    }
                }
                ...
            });
            </code></pre>
            <p>
                Un vista previa del tutorial la encontramos aquí debajo
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-04-07.gif" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a href="https://developer.android.com/training/animation/screen-slide.html">
                    https://developer.android.com/training/animation/screen-slide.html</a></li>
            <li><a href="https://developer.android.com/reference/android/support/v4/view/ViewPager.html">
                    https://developer.android.com/reference/android/support/v4/view/ViewPager.html</a></li>
            <li><a href="https://github.com/herb786/tutorial-slider-overview">
                    Tutorial source code</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Activity, XML, UI Design
    </div>
</div><!-- blog 0005-->
<div class="blog" id="blog0005">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Selector de fechas para aplicaciones en Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-03-13
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                Algunas veces necesitamos fechas y horas para arreglar citas, reservaciones o visitas.
                Por otro lado es un parámetro importante para configurar alarmas, alertas o notificaciones.
                Desde el punto de vista de la compañia es importante tener conocimiento de este parámetro
                para crear métricas para su posterior análisis.
            </p>
            <p>
                Eso significa que necesitamos una forma efectiva para ingresar este parámetro.
                La plataforma Android tiene dos componentes para agregar la fecha de manera simple.
                Estas componentes son <i>DatePicker</i> y <i>TimePicker</i>.
                En este tutorial veremos como usar estas componentes.
            </p>
            <p>
                Para darle sustancia a este tutorial, hagamos un aplicativo para reservar boletos de tren.
                Así necesitaremos la fecha y hora de partida que el viajero desea.
                Teniendo en mente esta idea crearemos un pequeño formulario
                que contiene una componentes EditText para la fecha y otra para la hora.
                Estas componentes no usarán el teclado virtual pero este será substituído por las componetes selectoras.
                En nuestra plantilla gráfica fijamos el atributo <i>editable</i> del EditText con el valor <i>false</i>.
                Aquí tambien cambiamos un poco su apariencia como tamaño de fuente, color y otros.
            </p>
            <pre><code class="xml">
            &lt;LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    xmlns:tools="http://schemas.android.com/tools"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical"
                    android:padding="16dp"
                    android:background="#ACC2CB"
                    tools:context="com.hacaller.trainticketbooking.MainActivity">
            
                &lt;TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:textSize="20dp"
                        android:text="BOOK"
                        android:paddingVertical="20dp"/>
            
                &lt;TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:paddingVertical="20dp"
                        android:textSize="20dp"
                        android:text="Departure date" />
            
                &lt;EditText
                        android:id="@+id/DAY_EDITTEXT"
                        android:layout_margin="20dp"
                        android:textSize="20dp"
                        android:editable="false"
                        android:clickable="true"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" />
            
                &lt;TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:textSize="20dp"
                        android:paddingVertical="20dp"
                        android:text="Leaving at"/>
            
                &lt;EditText
                        android:id="@+id/TIME_EDITTEXT"
                        android:layout_margin="20dp"
                        android:textSize="20dp"
                        android:editable="false"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" />
            
            &lt;/LinearLayout>
            </code></pre>
            <p>
                Para mostrar el selector DatePicker necesitamos crear un diálogo del tipo <i>DialogFragment</i>
                conteniendo el selector.
                También necesitamos que el diálogo contenga los métodos de <b>OnDateSetListener</b>
                para capturar la fecha seleccionado por el viajero cuando usa el selector.
                El código se muestra debajo. El diálgo para el selector TimePicker se construye de la misma manera.
                En este caso debemos construir los métodos de <b>TimePickerDialog</b>.
            </p>
            <pre><code class="java">
            public class DateDialogFragment extends DialogFragment {
            
                DatePickerDialog.OnDateSetListener onDateSetListener;
            
                public DateDialogFragment() {
                    // Required empty public constructor
                }
            
                @NonNull
                @Override
                public Dialog onCreateDialog(Bundle savedInstanceState) {
                    final Calendar c = Calendar.getInstance();
                    int year = c.get(Calendar.YEAR);
                    int month = c.get(Calendar.MONTH);
                    int day = c.get(Calendar.DAY_OF_MONTH);
                    return new DatePickerDialog(getActivity(),onDateSetListener,year, month, day);
                }
            
                @Override
                public void onAttach(Context context) {
                    super.onAttach(context);
                    if (context instanceof DatePickerDialog.OnDateSetListener) {
                        onDateSetListener = (DatePickerDialog.OnDateSetListener) context;
                    } else {
                        throw new RuntimeException(context.toString()
                                + " must implement OnDateSetListener");
                    }
                }
            
                @Override
                public void onDetach() {
                    super.onDetach();
                    onDateSetListener = null;
                }
            
            }
            </code></pre>
            <p>
                Ahora debemos conectar todas las componentes en la actividad.
                Las componentes EditText para los selectores cambiarán con eventos de clic.
                El diálogo del selector será mostrado cuando este evento ocurra.
            </p>
            <pre><code class="java">
            ...
            EditText dayEditText;
            
            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);
            
                dayEditText = findViewById(R.id.DAY_EDITTEXT);
                ...
            
                dayEditText.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        DialogFragment newFragment = new DateDialogFragment();
                        newFragment.show(getSupportFragmentManager(), "datePicker");
                    }
                });
            
                ...
            
            }
            </code></pre>
            <p>
                Finalmente, programamos los métodos para capturar la fecha y la hora
                según el protocolo definido por las interfaces de cada selector.
                Para el caso de la fecha tenemos la interface <b>OnDateSetListener</b> y para la hora tenemos
                <b>OnTimeSetListener</b>.
                El resultado se mostrará en las componentes EditText.
            </p>
            <pre><code class="java">
                @Override
                public void onDateSet(DatePicker datePicker, int i, int i1, int i2) {
                    String date = String.format("%02d/%02d/%d", i2,i1+1,i);
                    dayEditText.setText(date);
                }
            </code></pre>
            <p>
                Una demostración de la pantalla para reservar boletos de tren
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-03-17.gif" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a
                    href="https://developer.android.com/reference/android/app/TimePickerDialog.html">https://developer.android.com/reference/android/app/TimePickerDialog.html</a>
            </li>
            <li><a
                    href="https://developer.android.com/reference/android/app/DatePickerDialog.html">https://developer.android.com/reference/android/app/DatePickerDialog.html</a>
            </li>
            <li><a
                    href="https://developer.android.com/guide/topics/ui/controls/pickers.html">https://developer.android.com/guide/topics/ui/controls/pickers.html</a>
            </li>
            <li><a href="https://github.com/herb786/tutorial-datetimepicker-dialog">Tutorial source code</a></li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Activity, XML, UI Design
    </div>
</div><!-- blog 0004-->
<div class="blog" id="blog0004">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Un menú lateral con los fragmentos de Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-03-11
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>
                En nuestro <a href="/post/3">último tutorial</a> creamos un aplicativo con un menú lateral usando
                actividades.
                Sin embargo el resultado mostró un desperfecto durante la transición de pantallas.
                Ahora nos ocuparemos de estes desperfecto usando los fragmentos de Android y
                para ello asumimos que sabemos el ciclo de vida de un fragmento en Android.
            </p>
            <p>
                En este tutorial crearemos un nuevo aplicativo donde tenemos un catálogo,
                un carrito de compras y un mapapara ubicar las tiendas.
                Desde luego crearemos un fragmento por cada uno de estos apartados.
                El aplicativo arrancará con la actividad <i>MainActivity</i> que es la pantalla de inicio.
            </p>
            <p>
                Android Studio viene equipado con un asistente para crear fragmentos de forma rápida.
                Para abrir el asistente damos clic derecho al folder del aplicativo y seguimos la secuencia <i>New</i>,
                <i>Fragment</i> y escogemos <i>Blank Fragment</i>. Ahora en la ventana del asistente configuremos el
                fragmento.
                Para nuestro ejemplo desmarcamos las opciones <i>factory methods</i> y <i>interface callbacks</i>.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/wizard-fragment.png' alt=''
                class="blog-image-md"><br />
            <p>
                Con los fragmentos creados, podemos editar las vistas en las plantillas gráficas o ficheros xml de los
                fragmentos.
                Añadiremos solamente una cabecera para cada pantalla.
                Luego editaremos la plantilla <i>app_nav_bar.xml</i>.
                Debemos insertar una componente <b>FrameLayout</b> para encerrar los fragmentos.
            </p>
            <pre><code class="xml">
            &lt;?xml version="1.0" encoding="utf-8"?>
                &lt;android.support.design.widget.CoordinatorLayout
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        xmlns:app="http://schemas.android.com/apk/res-auto"
                        xmlns:tools="http://schemas.android.com/tools"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        tools:context="com.hacaller.navstore.NavActivity">
            
                &lt;android.support.design.widget.AppBarLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:theme="@style/AppTheme.AppBarOverlay">
            
                    &lt;android.support.v7.widget.Toolbar
                            android:id="@+id/toolbar"
                            android:layout_width="match_parent"
                            android:layout_height="?attr/actionBarSize"
                            android:background="?attr/colorPrimary"
                            app:popupTheme="@style/AppTheme.PopupOverlay" />
            
                &lt;/android.support.design.widget.AppBarLayout>
            
                &lt;FrameLayout
                        android:id="@+id/mainContent"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent">
            
                &lt;/FrameLayout>
            
            &lt;/android.support.design.widget.CoordinatorLayout>
            </code></pre>

            <p>
                Luego agregamos una actividad para la navegación com en el tutorial anterior.
                Aquí también la llamaremos <i>NavActivity</i>.
                También editaremos las plantillas gráficas como lo hicimos en el tutorial anterior.
                En este caso, cambiaremos el nombre del aplicativo y las etiquetas de identificación para cada pantalla.
            </p>
            <pre><code class="xml">
                &lt;?xml version="1.0" encoding="utf-8"?>
                &lt;menu xmlns:android="http://schemas.android.com/apk/res/android"
                      xmlns:tools="http://schemas.android.com/tools"
                      tools:showIn="navigation_view">
            
                &lt;group android:checkableBehavior="single">
                    &lt;item
                            android:id="@+id/nav_home"
                            android:icon="@drawable/ic_menu_camera"
                            android:title="HOME" />
                    &lt;item
                            android:id="@+id/nav_catalogue"
                            android:icon="@drawable/ic_menu_gallery"
                            android:title="CATALAOGUE" />
                    &lt;item
                            android:id="@+id/nav_shopping_cart"
                            android:icon="@drawable/ic_menu_slideshow"
                            android:title="SHOPPING CART" />
                    &lt;item
                            android:id="@+id/nav_map"
                            android:icon="@drawable/ic_menu_manage"
                            android:title="MAP" />
                &lt;/group>
            
                &lt;/menu>
            </code></pre>

            <p>
                Ahora convertiremos <i>MainActivity</i> en una subclase de NavActivity
                y como en el tutorial pasado, haremos que <i>NavActivity</i> sea una clase abstracta.
                Luego escribimos la lógica para llamar a los fragmentos en <i>NavActivity</i>.
                Aquí encerramos el fragmento en <i>MainActivity</i> usando
                la componente <b>FrameLayout</b> con identificador <i>R.id.mainContent</i>.
            </p>
            <pre><code class="java">
                @Override
                public boolean onNavigationItemSelected(MenuItem item) {
                    // Handle navigation view item clicks here.
                    int id = item.getItemId();
            
                    if (id == R.id.nav_home) {
                        Intent intent = new Intent(this, MainActivity.class);
                        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(intent);
                    } else if (id == R.id.nav_catalogue) {
                        Fragment fragment = new CatalogueFragment();
                        getSupportFragmentManager().beginTransaction()
                                .replace(R.id.mainContent, fragment)
                                .commit();
                    } else if (id == R.id.nav_shopping_cart) {
                        Fragment fragment = new ShoppingCartFragment();
                        getSupportFragmentManager().beginTransaction()
                                .replace(R.id.mainContent, fragment)
                                .commit();
                    } else if (id == R.id.nav_map) {
                        Fragment fragment = new MapFragment();
                        getSupportFragmentManager().beginTransaction()
                                .replace(R.id.mainContent, fragment)
                                .commit();
                    }
            
                    DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);
                    drawer.closeDrawer(GravityCompat.START);
                    return true;
                }
            </code></pre>

            <p>
                Come fue mencionado en el tutorial pasado, el atributo theme tendrá el valor <i>NoActionBar</i> en el
                fichero manifest.
                Otro cambio a considerar es la carga de plantillas en la actividad <i>MainActivity</i>.
                Esto puede conseguirse así</p>
            <pre><code class="java">
                @Override
                protected void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    View view = LayoutInflater.from(this).inflate(R.layout.activity_main,null);
                    FrameLayout frameLayout = findViewById(R.id.mainContent);
                    frameLayout.removeAllViews();
                    frameLayout.addView(view);
                }
            </code></pre>
            <p>
                También podemos modificar la barra de título llamando el método <i>getSupportActionBar</i>.
                Ahora podemos arrancar el aplicativo y veremos que no hay centelleos entre transiciones de pantallas.
            </p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-03-11.gif" type="image/gif">
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERENCES-->
        <ol>
            <li><a
                    href="https://developer.android.com/training/implementing-navigation/nav-drawer.html">https://developer.android.com/training/implementing-navigation/nav-drawer.html</a>
            </li>
            <li><a
                    href="https://developer.android.com/guide/components/activities/index.html">https://developer.android.com/guide/components/activities/index.html</a>
            </li>
            <li><a
                    href="https://github.com/herb786/tutorial-nav-drawer-fragments">https://github.com/herb786/tutorial-nav-drawer-fragments</a>
            </li>
        </ol>
        <!--Insert REFERENCES-->
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Activity, XML, UI Design
    </div>
</div><!-- blog 0003-->
<div class="blog" id="blog0003">
    <div class="blog-title-image">
        <!--Insert BACKGROUND-->
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/android_series.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <!--Insert TITLE-->
                Un menú lateral con las actividades de Android
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <!--Insert DATE-->2018-03-04
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <!--Insert ICONS-->
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/androidicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <!--START content of the post-->
            <p>Muchas aplicaciones usan un menú lateral para navegar a
                través de las diferentes secciones con la información más relevante.
                Si queremos agregar esta característica a nuestra aplicación,
                debemos entonces usar la componente NavigationDrawer.</p>

            <p>En este tutorial crearemos una aplicación para un evento internacional.
                Está aplicaciontendra tres secciones que consisten de un calendario, los locales y la galería de fotos.
                Nuestro punto de partida es una actividad en blanco creada en Android Studio.
                Podemos navegar a estas secciones usando un menú lateral o
                desde la pántalla de inicio. Llamaremos a este aplicativo NavInternationalEvent.</p>

            <p>Comencemos creando una actividad para cada sección o funcionalidad.
                En primer lugar seleccionamos el directorio del aplicativo en el panel de proyectos.
                Podemos adicionar una actividad al proyecto dando clic al directorio, escogiendo la opción <i>Menu</i>
                y luego escogiendo <i>Empty Activity</i> de las opciones desplegads en Activity.</p>

            <p>Otra manera de agregar actividades es a través de la barra de menús con la secuencia <i>File, New y
                    Activity</i>.</p>

            <p>Nombraremos cada actividad del siguienete modo <i>TimetableActivity</i>, <i>VenuesActivity</i> y
                <i>GalleryActivity</i> respectivamente. En breve insertaremos una componente <i>TextView</i> que estará
                centrado en la pantalla de la actividad.</p>

            <p>Luego de crear las actividades, agregaremos el menú de navegación lateral.
                Android Studio tiene una opción para crear la plantilla base del menú de navegación y que puede
                adaptarse en el desarrollo.
                La secuencia de pasos para usar esta plantilla es como sigue. Primero ubicamos nuestro panel de
                directorios y
                cuando cliqueamos con el botón secundario en el proyecto buscamos la opción <i>Navigation Drawer
                    Activity</i>. En breve aparece un asistente donde ingresamos el nombre <i>NavActivity</i> como
                ejemplo.</p>
            <p>El asistente agregará una serie de plantillas:</p>
            <ol>
                <li>Una plantilla para la lógica del menú de navegación y con nombre NavActivity. No es necesario
                    cambiarlo.</li>
                <li>Una plantilla gráfica para la barra de título con nombre app_bar_nav.</li>
                <li>Una plantilla gráfica para enmarcar el contenido con nombre content_nav. Dejamos esta sin cambiar.
                </li>
                <li>Una plantilla gráfica para la cabecera del menú con nombre nav_header_nav.</li>
                <li>Una plantilla gráfica para la lista de opciones en el directorio <b>menu</b> con nombre
                    activity_nav_drawer.</li>
            </ol>
            <p>La actividad creada para programar el menú de navegación agrega componente adicionales con un botón
                flotante
                y la barra de título en la parte superior.</p>


            <p>Ahora comencemos editando la plantilla para la cabecera.
                En este paso sólo cambiaremos el nombre del aplicativo
                y removemos la componente TextView que se usa para mostarr el correo electrónico.</p>
            <pre><code class="xml">
            &lt;xml version="1.0" encoding="utf-8"?>
            &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                          xmlns:app="http://schemas.android.com/apk/res-auto"
                          android:layout_width="match_parent"
                          android:layout_height="@dimen/nav_header_height"
                          android:background="@drawable/side_nav_bar"
                          android:gravity="bottom"
                          android:orientation="vertical"
                          android:paddingBottom="@dimen/activity_vertical_margin"
                          android:paddingLeft="@dimen/activity_horizontal_margin"
                          android:paddingRight="@dimen/activity_horizontal_margin"
                          android:paddingTop="@dimen/activity_vertical_margin"
                          android:theme="@style/ThemeOverlay.AppCompat.Dark">
            
                &lt;ImageView
                        android:id="@+id/imageView"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="@dimen/nav_header_vertical_spacing"
                        app:srcCompat="@mipmap/ic_launcher_round" />
            
                &lt;TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:paddingTop="@dimen/nav_header_vertical_spacing"
                        android:text="NavInternationalEvent"
                        android:textAppearance="@style/TextAppearance.AppCompat.Body1" />
            
            &lt;/LinearLayout>
            </code></pre>


            <p>Luego podemos modificar la plantilla con las opciones que queremos enseñar en el menú.
                En nuestro caso sólo tenemos 4 secciones, y habrá un enlace por cada sección incluyendo la pantalla de
                inicio.</p>
            <pre><code class="xml">
            &lt;?xml version="1.0" encoding="utf-8"?>
            &lt;menu xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:tools="http://schemas.android.com/tools"
                  tools:showIn="navigation_view">
            
                &lt;group android:checkableBehavior="single">
                    &lt;item
                            android:id="@+id/nav_home"
                            android:icon="@drawable/ic_menu_camera"
                            android:title="Home" />
                    &lt;item
                            android:id="@+id/nav_timetable"
                            android:icon="@drawable/ic_menu_slideshow"
                            android:title="Timetable" />
                    &lt;item
                            android:id="@+id/nav_venues"
                            android:icon="@drawable/ic_menu_manage"
                            android:title="Venues" />
                    &lt;item
                            android:id="@+id/nav_gallery"
                            android:icon="@drawable/ic_menu_gallery"
                            android:title="Gallery" />
                &lt;/group>
            
            &lt;/menu>
            </code></pre>

            <p>El siguiente paso será editar la plantilla para la barra de título. Ya que no usaremos el botón flotante,
                lo removeremos.
                Luego insertamos una etiqueta <b>include</b> que hace referencia al contenido de la pantalla</p>
            <pre><code class="xml">
            &lt;?xml version="1.0" encoding="utf-8"?>
            &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                          xmlns:app="http://schemas.android.com/apk/res-auto"
                          xmlns:tools="http://schemas.android.com/tools"
                          android:layout_width="match_parent"
                          android:layout_height="match_parent"
                          android:orientation="vertical"
                          tools:context="com.example.hacaller.myapplication.NavActivity">
            
                &lt;android.support.design.widget.AppBarLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:theme="@style/AppTheme.AppBarOverlay">
            
                    &lt;android.support.v7.widget.Toolbar
                            android:id="@+id/toolbar"
                            android:layout_width="match_parent"
                            android:layout_height="?attr/actionBarSize"
                            android:background="?attr/colorPrimary"
                            app:popupTheme="@style/AppTheme.PopupOverlay" />
            
                &lt;/android.support.design.widget.AppBarLayout>
            
                &lt;include android:id="@+id/layoutContainer" layout="@layout/content_nav" />
            
            &lt;/LinearLayout>
            </code></pre>

            <p>Procedemos ahora con la programación del menú lateral.
                Usaremos la actividad del menú lateral con la superclase de las otras actividades.
                Entonces esta clase será del tipo abstract. No olvidemos de quitar la actividad del fichero manifest.
            </p>

            <p>Ahora editemos un poco la clase abstracta NavActivity.
                Dado que el botón flotante no se utiliza lo quitamos en el método onCreate.
                Luego editamos el método onNavigationItemSelected y
                borramos las opciones innecesarias del menú y
                agregamos las que creamos previamente en activity_nav_drawer.xml.</p>

            <p>Recordemos que definimos una plantilla que encierra nuestra vistas y componentes.
                Esta plantilla será reemplazada por la plantilla correspondiente a la sección consultada.
                La etiqueta include es la referencia a está plantilla.
                Crearemos el siguiente método para cargar la plantilla gráfica de la actividad e insertarla en la
                referencia include.</p>

            <pre><code class="java">
            public void setActivityView(int resourceId){
                ViewGroup root = findViewById(R.id.layoutContainer);
                View view = View.inflate(this, resourceId, root);
            }
            </code></pre>

            <p>Cada sección tendrá una actividad que es una subclase de NavActivity.
                Sustituyamos la llamada a setContentView con el método para cargar la plantilla gráfica.
                También podemos cambiar el título de la pantalla. El código termina como:</p>

            <pre><code class="java">
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setActivityView(R.layout.activity_venues);
                getSupportActionBar().setTitle("VENUES");
            }
            </code></pre>

            <p>Luego debemos conectar las opciones del menú con las respectivas actividades.
                Modifquemos para ello el método onNavigationItemSelected.</p>

            <pre><code class="java">
            public boolean onNavigationItemSelected(MenuItem item) {
                // Handle navigation view item clicks here.
                int id = item.getItemId();
            
                if (id == R.id.nav_home) {
                    Intent intent = new Intent(this, MainActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                } else if (id == R.id.nav_gallery) {
                    Intent intent = new Intent(this, GalleryActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                } else if (id == R.id.nav_timetable) {
                    Intent intent = new Intent(this, TimetableActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                } else if (id == R.id.nav_venues) {
                    Intent intent = new Intent(this, VenuesActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                }
            
                DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);
                drawer.closeDrawer(GravityCompat.START);
                return true;
            }
            </code></pre>

            <p>Antes de arrancar el aplicativo, cambiemos el fichero manifest como sigue:</p>
            <pre><code class="xml">
            android:theme="@style/AppTheme.NoActionBar"
            </code></pre>

            <p>Cuando probemos el aplicativo, notaremos que durante la transición entre pantallas habrá un titileo.
                Para liberarnos de este defecto usaremos fragmentos en un futuro tutorial.
                La imagen debajo muestra el aplicativo creado</p>
            <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/device-2018-03-10.gif" type="image/gif">
            <p>Como es usual el código fuente en la literatura.</p>
            <!--END content of the post-->
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <!--Insert REFERRNCES-->
        <ol>
            <li><a
                    href="https://developer.android.com/training/implementing-navigation/nav-drawer.html">https://developer.android.com/training/implementing-navigation/nav-drawer.html</a>
            </li>
            <li><a
                    href="https://developer.android.com/guide/components/activities/index.html">https://developer.android.com/guide/components/activities/index.html</a>
            </li>
            <li><a
                    href="https://github.com/herb786/tutorial-nav-drawer-activities">https://github.com/herb786/tutorial-nav-drawer-activities</a>
            </li>
        </ol>
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        <!--Insert KEYWORDS-->
        Android, Activity, XML, UI Design
    </div>
</div><!-- blog 0002-->
<div class="blog" id="blog0002">
    <div class="blog-title-image">
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/post_header_0002.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <span id="title">Despliegue de una sitio web usando Django y AWS</span>
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <span id="createdAt">2017-10-29</span>
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/pythonicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/postgreicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <p>En este tutorial mostraremos una lista de pasos para desplegar un sitio web creado con django usando
                Amazon Web Services.
                Este será un breve resumen para desplegar un sitio web basado en python sin problemas.
                También habrá información para configurar el banco de datos provisto por AWS.
                Finalmente veremos como conectar un dominio con un sitio web alojado por AWS.</p>
            <p>Hay muchas guías detalladas que pueden encotrarse en la documentación ofrecida por AWS.
                En este tutorial lidearemos sólo con los puntos básicos para poner el sitio web en línea.
                Algunos pasos requerirán consultar información adicional donde se darán los enlaces del caso.</p>
            <p>El tutorial tiene la siguiente estructura</p>
            <ul>
                <li><a href="#sec1">Cómo preparar el sistema con Elastic Beanstalk</a></li>
                <li><a href="#sec2">Instalación de AWS CLI y despliegue de la aplicación django</a></li>
                <li><a href="#sec3">Gestión de una base datos creada con PostgreSQL</a></li>
                <li><a href="#sec4">Configuración de dominios</a></li>
            </ul>

            <h3 id="sec1"><b>
                    Cómo preparar el sistema con Elastic Beanstalk
                </b></h3>
            <p>
                A partir de ahora, asumiremos que existe una cuenta en Amazon Web Services y
                el uso adecuado de la consola de admistración de los servicios.
                El primer paso sera crear una máquina virtual independiente con sus propios recursos y sistema
                operativo.
                Elastic Beanstalk permite crear máquinas virtuales con sistema operativo Linux e instalar el lenguage
                adecuado para ejecutar una aplicación.
                Como nuestra aplicación web está basada en python, crearemos una máquina virtual con python y usaremos
                la version 2.7 en particular. Otro modo de crear una máquina virtual es por medio del servicio EC2 donde
                podemos ajustar múltiples opciones de configuración.
                Comencemos abriendo el panel de admistración y escogiend <b>Elastic Beanstalk</b> en el menú superior.
                La primera ventana será el asistente de configuración para la máquina virtual</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-01.png' alt='' class="blog-image-md">

            <p>Aquí elegimos la opción <b>Web Server Environment</b>. Proseguimos eligiendo la opción <b>python
                    language</b>
                en la siguiente página del asistente</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-02.png' alt='' class="blog-image-md">

            <p>Ahora demos un nombre a nuestra máquina virtual</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-03.png' alt='' class="blog-image-md">

            <p>Los siguiente pasos no necesitan cambios adicionales y aceptamos la configuración del asistente.
                Cuando la siguiente página del asistente aparezaca elegiremos una banco de datos.
                En nuestro caso escogemos PostgreSQL.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-04.png' alt='' class="blog-image-md"><br />

            <p>Finalmente podemos verificar la configuración e iniciar la máquina virtual</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-05.png' alt='' class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/step-06.png' alt='' class="blog-image-md"><br />

            <p>Después de un exitoso arranque seremos redirigidos a la siguiente ventana</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/last-step-aws.png' alt=''
                class="blog-image-md"><br />

            <h3 id="sec2"><b>
                    Instalación de AWS CLI y despliegue de la aplicación django
                </b></h3>
            <p>Una vez que tenemos la máquina virtual podemos alojar nuestro sitio web.
                AWS tiene una utilidad para desplegar sitios web usando la línea de comandos.
                Esta utilidad es llamada <b>awsebcli</b>. Podemos instalar este guión con la siguiente orden</p>
            <pre><code class="bash">pip install awsebcli
            </code></pre>
            <p>Más detalles se encuentran aquí <a
                    href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html"></a>. Ahora
                necesitamos configurar la utilidad o guión con nuestros credenciales. Cada administrador o desarrollador
                tendrá credenciales que son generados en el panel de administración con la opción <b>My Security
                    Credentials</b>. Más información sobre el tópico en este <a
                    href="http://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html">enlace</a></p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/eb-conf.png' alt='' class="blog-image-md"><br />
            <p>Ahora podemos desplegar nuestro sitio web. Primero crearemos el entorno virtual donde residiran los
                módulos y las líbrerias usadas por la aplicación. Una explicación concisa se da en el siguiente <a
                    href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-django.html">enlace</a>.
                Es válido mencionar que podemos desplegar nuestro sitio web en múltiples entornos.</p>
            <p>Algunas veces necesitamos crear variables de sistema que serán usadas por nuestra aplicación.
                Por ejemplo, una variable de sistema indicará la ruta de acceso a nuestra base de datos.
                Las variables de sistema pueden ser creadas en el panel de administración.
                Una vez allí debemos buscar la opción <b>Configuration</b>.
                Luego debemos encontrar la sección <b>Environment Properties</b>.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/set-env-01.png' alt='' class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/set-env-02.png' alt='' class="blog-image-md"><br />

            <h3 id="sec3"><b>
                    Gestión de una base datos creada con PostgreSQL
                </b></h3>
            <p>Una tarea frecuente es el mantenimiento y actualización de entrada en una base de datos.
                La base de datos ofrecida por AWS puede ser consultada y editada usando la utilidad de nuestra
                preferencia.
                En el case de una base datos usando PostgreSQL tenemos la herramienta llamada <b>pgAdmin</b>
                que es acompañada con una interfaz gráfica. La última versión al momento de escribir el tutorial es la
                2.0.
                Para usar esta herramienta, debemos primero conectarnos a nuestra base de datos y
                para ello debemos otrogar los permisos necesarios.
                El panel de administración puede hacerlo usando la opción <b>VPC Dashboard</b>.
                Allí debemos escoger la identificación asignada a la base de datos RDS.
                Finalmente debemos añadir reglas par las conexiones entrantes y salientes.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/db-conf-01.png' alt='' class="blog-image-md"><br />
            </p>Aquí debemos proceder con cautela ya que podemos dejar que cualquier agente externo accese la base de
            datos.
            La regla primaria debería limitarse a tu dirección IP.</p>
            <p>Luego necesitamos recoger la información sobre nuestro banco de datos.
                Esta información puede ser encontrada en el panel <b>RDS Dashboard</b>.
                Necesitamos los siguientes datos endpoint, port, database name, database instance, username y password.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/db-conf-02.png' alt='' class="blog-image-md"><br />
            <p>Luego de obtener estos datos, crearemos un servidor para la database en pgAdmin de este modo</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/pg-admin-01.png' alt=''
                class="blog-image-md"><br />
            <p>Luego veremos un asistente pidiendo darle un nombre al servidor</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/pg-admin-02.png' alt=''
                class="blog-image-md"><br />
            <p>Finalmente debemos llenar el formulario con la información recogida</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/pg-admin-03.png' alt=''
                class="blog-image-md"><br />

            <h3 id="sec4"><b>
                    Configuración de dominios
                </b></h3>
            <p>Ahora el paso final del tutorial. Después de desplegar con éxito nuestro sitio web,
                quisieramos usar nuestro propio dominio en lugar del enace críptico creado por AWS.
                Luego de haber adquirido un dominio, podemos acceder el panel de administración para configurar
                el dominio de nuestro sitio web. En este caso escogemos la opción <b>Route 53 Dashboard</b>.
                Aquí también tenemos la opción de adquirir un dominio.</p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/domain-01.png' alt='' class="blog-image-md"><br />
            <p>Luego debemos usar la opción <b>Hosted Zones</b>. Aquí crearemos una entrada de la forma <b>type A Record
                    Set</b>, la cuál asignará el domio a nuestro sitio web. Para más información seguir este <a
                    href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html">enlace</a>.
            </p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/domain-02.png' alt='' class="blog-image-md"><br />
            <p>Así llegamos al fin de este tutorial,
                aunque no hemos cubierto toda las posible formas de configurar el servicio AWS,
                tenemos un punto de partida para poner un sitio web en línea.</p>
        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <ol>
            <li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-django.html">
                    http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-django.html</a></li>
            <li><a href="http://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html">
                    http://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html</a></li>
            <li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html">
                    http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html</a></li>
            <li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html">
                    http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html</a></li>
        </ol>
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        AWS, Elastic Beanstalk, Django, Cloud, PostgreSQL
    </div>
</div><!-- blog 0001-->
<div class="blog" id="blog0001">
    <div class="blog-title-image">
        <img src="https://s3-us-west-2.amazonaws.com/py4hacaller/firsttutorial.png" alt="" />
    </div>
    <div class="blog-title">
        <div class="text">
            <h1 id="postTitle">
                <span id="title">Un simple sitio web con Django y ReactJS</span>
            </h1>
        </div>
    </div>
    <div class="blog-body">
        <div class="blog-sidebar">
            <div class="blog-date">
                <div class="blog-date-content" id="blog-date-content">
                    <span id="createdAt">2017-08-29</span>
                </div>
            </div>
            <div class="blog-cat" id="blog-cat">
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/pythonicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/jsicon.png" alt="" /></span>
                <span><img src="https://s3-us-west-2.amazonaws.com/py4hacaller/codeicon.png" alt="" /></span>
            </div>
        </div>
        <div class="blog-content" id="blog-content">
            <p>
                En este tutorial crearemos un sitio web con Django en el lado del servidor y ReactJS en el lado del
                cliente. En este ocasión construiremos una galería de imágenes donde mostraremos un trio de ofidios.
            </p>
            <p>Django es un paquete de desarrollo muy versátil que es utilizado para contruir aplicacione de una única
                página y tambien aplicaciones coorporativas. Django asimismo posee un sistema de plantillas web pero
                podemos usar una alternativa mas actual como ReactJS para e lado del cliente.</p>
            <p>En años recientes ha habido una explosión de paquetes de desarrollo basados en javascript que permiten
                crear páginas interactivas,
                siendo ReactJS uno de los que use recientemente debido ha su naturaleza modular al organizar el código,
                siendo así posible crear componentes para cada tarea ya sea gráfica o lógica.</p>
            <p>Este tutorial mostrará como usar este par de herramientas y conectarlas para crear una página web
                moderna. Se asumirá que el lector tiene instalado django y nodejs, y si no fuera el caso puede encontrar
                información detallada acerca de estás herramientas al final de este tutorial.</p>
            <p>El tutorial consiste de dos secciones:
            <ul>
                <li><a href="#server-side">Sección 1: En el lado del servidor</a></li>
                <li><a href="#client-side">Sección 2: En el lado del cliente</a></li>
            </ul>
            </p>
            <p>Comenzaremos creando un directorio para nuestro proyecto y lo llamaremos <b>gallery-project</b>.</p>
            <pre><code class="bash">mkdir gallery-project
              </code></pre>
            <p>Este es nuestro directorio de trabajo.</p>
            <h3 id="server-side">
                <b>Sección 1: En el lado del servidor</b>
            </h3>
            <p>El siguiente paso sería crear el proyecto en el lado del servidor en este directorio.
                Con django usaremos el siguiente comando</p>
            <pre>
                  <code class="bash">django-admin startproject gallery</code>
              </pre>
            <p>
                El resultado será un nuevo directorio llamado <b>gallery</b>. Explorando el directorio encontraremos la
                organización básica del proyecto. Un proyecto para un sitio web en django consiste de aplicaciones, por
                ejemplo, una aplicación para una bitácora, otra aplicación para una tienda y posiblemente alguna más
                para el foro de consultas. Nuestro sitio web tendra sólo una aplicación correspondiente a la galería de
                imágenes y la crearemos como sigue</p>
            <pre>
                  <code class="bash">python manage.py startapp snakes_gallery</code>
              </pre>
            <p>La ejecución de este comando creará el armazón de nuestra aplicación.
                Luego necesitamos añadir esta aplicación al archivo de configuración del proyecto.
                Este fichero se encuentra en un subdirectorio que lleva el nombre del proyecto.
                Luego de abrir el archivo agregaremos la aplicación en la sección <b>INSTALLED_APPS</b>.
                Ahora podemos echar un vistazo a nuestra primera página web ejecutando lo siguiente</p>
            <pre>
                  <code class="bash">python manage.py runserver</code>
              </pre>
            <p>Ignoremos por el momento la alerta sobre migraciones. Una migración es la creación o actualizacion de
                nuestro banco de datos usando los modelos definidos por el programador en django. El siguiente enlace te
                dirigirá a la página creada <a href='https://127.0.0.1:8000'>https://127.0.0.1:8000</a></p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-29+11_07_28-Greenshot.png' alt=''>
            <p>Este sitio web mostrará imágenes de ofidios e la información para contacto. Considerando estos criterios
                necesitamos un modelo para los ofidios y otro para los detalles de contacto.</p>
            <p>
                Procedamos abriendo el folder <b>snakes_gallery</b>. Aquí abrimos el fichero <b>models.py</b> e
                insertaremos los siguientes modelos</p>
            <pre><code class="python">
              # Información sobre las serpientes
              class Snake(models.Model):
                id = models.IntegerField(primary_key=True, unique=True)
                name = models.CharField(max_length=80)
                imageUrl = models.CharField(max_length=250)
                caption = models.CharField(max_length=250)
              # Información para contacto
              class AboutSite(models.Model):
                id = models.IntegerField(primary_key=True, unique=True)
                title = models.CharField(max_length=80)
                author = models.CharField(max_length=80)
                email = models.CharField(max_length=80)
              </code></pre>
            <p>
                Ahora creemos vistas simples y fabriquemos algunos datos de prueba para probar nuestras vistas.
                Por ahora sólo contendrán texto sin ningún estilo. Comencemos abriendo el fichero <b>views.py</b></p>
            <p>Ahora creamos la vista para mostrar datos de cualquier ofidio usando el modelo Snake.</p>
            <pre><code class="python">
              def showSnakeList(request):
                snake1 = Snake(
                 id=1,
                 name='Python',
                 imageUrl='https://upload.wikimedia.org/wikipedia/commons/3/32/Python_molurus_molurus_2.jpg',
                 caption='Pythons are a family of nonvenomous snakes found in Africa, Asia, and Australia')
                snake2 = Snake(
                  id=2,
                  name='Viper',
                  imageUrl='https://upload.wikimedia.org/wikipedia/commons/7/70/Crotalus-basiliscus-basiliskenklapperschlange.jpg',
                  caption='Vipers are  a family of venomous snakes found in most parts of the world')
                snake3 = Snake(
                  id=3,
                  name='Boa',
                  imageUrl='https://upload.wikimedia.org/wikipedia/commons/a/a7/Boa_constrictor_%282%29.jpg',
                  caption='Boas are a family of nonvenomous snakes found in America, Africa, Madagascar, Europe, Asia, and some Pacific Islands.')
               data = serializers.serialize('json', [snake1, snake2, snake3])
               return HttpResponse(data)
              
              </code></pre>
            <p>
                Luego creamos una vista para ver los detalles de contacto usando el modelo AboutSite.</p>
            <pre><code class="python">
              def showInfoAboutSite(request):
                info = AboutSite(id=1, title='Snake Gallery', author='Calvin Hobbes', email='calvin.hobbes@@gmail.com')
                data = serializers.serialize('json', [info])
                return HttpResponse(data)
              
              </code></pre>
            <p>Las vistas mostrarán una lista serializada de serpientes y una lista conteniendo información de contacto
                usando el protocolo json.
                Ahora necesitamos crear los puntos de entrada para acceder a este contenido. Crearemos entonces un
                fichero con los puntos de entrada y lo llamaremos <b>urls.py</b> que tendrá las siguientes líneas</p>
            <pre><code class="python">
              from django.conf.urls import url
              from . import views
              urlpatterns = [
                url(r'^$', views.index),
                url(r'^api/info', views.showInfoAboutSite),
                url(r'^api/snakes', views.showSnakeList),
              ]
              
              </code></pre>

            <p>La primera ruta es nuestra página de inicio. Las otras dos rutas suministran datos a nuestra aplicación
                en el lado del cliente. También podemos tener una página de inicio en el lado del cliente pero usaremos
                la cargada por parte del servidor.</p>
            <p>Luego incluiremos los enlace en el fichero <b>urls.py</b> del folder raiz gallery</p>

            <pre><code class="python">
              from django.conf.urls import url, include
              from django.contrib import admin
              urlpatterns = [
                url(r'^admin/', admin.site.urls),
                url(r'^', include('snakes_gallery.urls')),
              ]
              
              </code></pre>
            <p>Ahora puedes arrancar tu aplicación y verás los resultados en estos enlaces</p>
            <p>
            <ul>
                <li><a href=”http://127.0.0.1:8000”>http://127.0.0.1:8000/</a></li>
                <li><a href=”http://127.0.0.1:8000/api/info”>http://127.0.0.1:8000/api/info</a></li>
                <li><a href=”http://127.0.0.1:8000/api/snakes”>http://127.0.0.1:8000/api/snakes</a></li>
            </ul>
            </p>
            <p>
                <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-29+16_07_06-Greenshot.png'
                    alt=''><br />
                <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-29+16_07_01-Greenshot.png'
                    alt=''><br />
                <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-29+16_06_52-Greenshot.png' alt=''>
            </p>
            <p>Para finalizar recordemos que cualquier cambio durante el desarrollo se reflejará automáticamente
                mientras el servidor este corriendo.
                Antes de comenzar con el lado del cliente debemos habilitar la funcionalidad <b>CORS</b> para ejecutar
                llamadas con ajax. El siguiente módulo será de ayuda para esta tarea</p>

            <pre><code class="bash">pip install django-cors-headers
              </code></pre>

            <p>Ahora añadimos el módulo a nuestra configuración en la sección</p>

            <pre><code class="python">
              INSTALLED_APPS = (
                ...
                'pipeline',
                'corsheaders'
              )
              MIDDLEWARE_CLASSES = (
                'corsheaders.middleware.CorsMiddleware',
                'django.middleware.common.CommonMiddleware',
                ...
              )
              CORS_ORIGIN_WHITELIST = (
                'localhost:3000',
                '127.0.0.1:3000'
              )
              </code></pre>

            <p>EL zócalo <a href='http://127.0.0.1:3000'>127.0.0.1:3000</a> será el canal de comunicación con nuestro
                cliente. </p>
            <div id="client-side"></div>
            <h3>
                <b>Sección 2: En el lado del cliente</b>
            </h3>

            <p>En esta parte veremos como consumir los datos de nuestra api en una aplicación ReactJS.</p>
            <p>Antes que nada, debemos crear el armazón para nuestra aplicación cliente. El paquete
                <b>create-react-app</b> se encargará de esta tarea y lo instalaremos de esta manera</p>

            <pre><code class="bash">npm install -g create-react-app
              </code></pre>

            <p>Procedamos ahora con nuestra aplicación cliente. Dirijamonos a nuestro directorio de trabajo
                <b>gallery-project</b> y ejecutemos la siguiente línea</p>

            <pre><code class="bash">create-react-app gallery-client
              </code></pre>

            <p>Esperamos la creación de la aplicación react y luego accedemos a su directorio donde arrancaremos nuestro
                cliente con</p>

            <pre><code class="bash">npm start
              </code></pre>

            <p>Nuestro navegador abrirá una pestaña con el enlace <a
                    href='https://127.0.0.1:3000'>https://127.0.0.1:3000</a>.</p>
            <p>Ahora incluiremos un paquete para gestionar las rutas</p>

            <pre><code class="bash">npm install react-router-dom
              </code></pre>

            <p>Nuestra primera componente será la barra de navegación. Crearemo el fichero para este propósito
                <b>Navbar.js</b> en el folder <b>src</b>. Luego inseertamos las siguientes líneas</p>

            <pre><code class="javascript">
              import { BrowserRouter, Route, Link } from 'react-router-dom';
              import Gallery from './Gallery';
              import About from './About';
              class Navbar extends Component {
                render() {
                  return (
                    &lt;BrowserRouter>
                    &lt;div>
                    &lt;div>
                      &lt;div>&lt;a>&lt;Link to="/">Home&lt;/Link>&lt;/a>&lt;/div>
                      &lt;div>&lt;a href="">&lt;Link to="/gallery">Gallery&lt;/Link>&lt;/a>&lt;/div>
                      &lt;div>&lt;a href="">&lt;Link to="/about">About&lt;/Link>&lt;/a>&lt;/div>
                    &lt;/div>
                    &lt;Route exact path="/" render={(props) => (&lt;Gallery />)} />
                    &lt;Route path="/gallery" render={(props) => (&lt;Gallery />)}/>
                    &lt;Route path="/about" render={(props) => (&lt;About />)}/>
                    &lt;/div>
                  &lt;/BrowserRouter>
                  );
                }
              }
              export default Navbar;
              
              </code></pre>
            <p>Esta componente está compuesta por la componente Gallery y la componente About que crearemos en breve.
                La componente About contiene información de nuestro sitio web. Creemos entonces el fichero
                <b>About.js</b> con este código</p>

            <pre><code class="javascript">
              import React, { Component } from 'react';
              class About extends Component {
                render() {
                  return (
                    &lt;div>
                    &lt;h1>About&lt;/h1>
                    &lt;/div>
                  );
                }
              }
              export default About;
              
              </code></pre>

            <p>Este fichero sólo mostrará una página en blanco con una cabecera.
                Los datos que queremos mostrar lo extraeremos de nuestro aplicación en el lado del servidor.
                Las peticiones al servidor necesitan el siguiente módulo</p>
            <pre><code class="javascript">
              import request from 'request';
              </code></pre>
            <p>Ahora definamos dos funciones para hacer las llamadas al servidor</p>
            <pre><code class="javascript">
              constructor(props) {
                super(props);
                this.state = {info : {}};
              }
              componentDidMount() {
                var self = this;
                request('https://127.0.0.1:8000/api/info', function (error, response, body) {
                  var data = JSON.parse(body);
                  self.setState({ info : data[0].fields });
                });
              }
              
              </code></pre>
            <p>
                La propiedad <b>state</b> contiene los objetos que se visualizarán en nuestro sitio web.
                Actualicemos ahora la función <b>render</b> para mostrar la información del servidor</p>
            <pre><code class="javascript">
              render() {
                return (
                  &lt;div>
                  &lt;h1>About</h1>
                  &lt;h3>Site Name: {this.state.info.title}&lt;/h3>
                  &lt;h3>Author: {this.state.info.author}&lt;/h3>
                  &lt;h3>E-mail: {this.state.info.email}&lt;/h3>
                  &lt;/div>
                );
               }
              
              </code></pre>
            <p>Finalmente crearemos la componente Gallery. Para ello creamos el fichero <b>Gallery.js</b> en el folder
                <b>src</b> y añadimos el siguiente código</p>
            <pre><code class="javascript">
              import React, { Component } from 'react';
              import request from 'request';
              class Gallery extends Component {
                constructor(props) {
                  super(props);
                  const snake = {'name':'name','imageUrl':'url','caption':'caps'};
                  this.state = {snakes : [snake,snake,snake]};
                }
                componentDidMount() {
                  var self = this;
                  request('http://127.0.0.1:8000/api/snakes', function (error, response, body) {
                    var data = JSON.parse(body);
                    const snake1 = data[0].fields;
                    const snake2 = data[1].fields;
                    const snake3 = data[2].fields;
                    self.setState({snakes : [snake1, snake2, snake3]});
                  });
                }
                render() {
                  const snakes = this.state.snakes;
                  return (
                    &lt;div>
                    &lt;h1>Snake Gallery&lt;/h1>
                    &lt;div>Name: {snakes[0].name}&lt;br/>
                      &lt;img src={snakes[0].imageUrl} alt={snakes[0].caption} />
                    &lt;/div>
                    &lt;div>Name: {snakes[1].name}&lt;br/>
                      &lt;img src={snakes[1].imageUrl} alt={snakes[1].caption} />
                    &lt;/div>
                    &lt;div>Name: {snakes[2].name}&lt;br/>
                      &lt;img src={snakes[2].imageUrl} alt={snakes[2].caption} />
                    &lt;/div>
                   &lt;/div>
                  );
                }
              }
              export default Gallery;
              
              </code></pre>
            <p>Así terminamos con nuestro pequeño proyecto. Ahora veámos el resultado. Primero que nada inciamos nuestro
                servidor con django en nuestro terminal y abrimos otro terminal para iniciar nuestra aplicación
                React<br /></p>
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+16_05_27-Greenshot.png' alt=''
                class="blog-image-md"><br />
            <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+16_05_19-Greenshot.png' alt=''
                class="blog-image-md">
            <p>
                Podemos estilizar un poco nuestro sitio web con paquetes de estilo como <b>Bootstrap</b> o
                <b>Foundation</b>.
                Aquí usare otro paquete poco conocido llamado <b>Bulma</b> y los resultados se verán así<br />
                <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+18_22_56-Greenshot.png' alt=''
                    class="blog-image-md"><br />
                <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+18_23_08-Greenshot.png' alt=''
                    class="blog-image-md"><br />
                <img src='https://s3-us-west-2.amazonaws.com/py4hacaller/2017-08-31+18_23_18-Greenshot.png' alt=''
                    class="blog-image-md">
            </p>

        </div>
    </div>
    <div class="blog-references">
        <h3><u>References</u></h3>
        <ol>
            <li><a href='https://www.djangoproject.com/start/'>https://www.djangoproject.com/start</a></il>
            <li><a href='https://facebook.github.io/react/'>https://facebook.github.io/react</a></il>
            <li><a
                    href='https://github.com/facebookincubator/create-react-app'>https://github.com/facebookincubator/create-react-app</a>
                </il>
            <li><a
                    href='https://reacttraining.com/react-router/web/guides/philosophy'>https://reacttraining.com/react-router/web/guides/philosophy</a>
                </il>
            <li><a href='http://bulma.io'>http://bulma.io</a></il>
        </ol>
        You can get the source for this example
        <a
            href='https://github.com/herb787/tutorial-django-gallery'>https://github.com/herb787/tutorial-django-gallery</a>
    </div>
    <div class="blog-keywords">
        <h3><u>Keywords</u></h3>
        Django, Python, ReactJS, JavaScript, Website
    </div>
</div>
                <!-- INSERT ALL BLOGS -->
                <div class="blog-links">
                    <span id="left-page2" class="blog-previous-link">
                        <h3><u><span id="previousUrl">Previous</span></u></h3>
                    </span>
                    <span id="right-page2" class="blog-next-link">
                        <h3><u><span id="nextUrl">Next</span></u></h3>
                    </span>
                </div>
            </div>
        </div>
        <div class="footer" id="footer">
            <div class="box-footer">
                <div class="left-footer">
                    Copyright © 2021 Hakaguzare<br /><br />
                    <i class="fa fa-github-alt"></i> <a href="https://github.com/herb786">Github</a><br />
                    <i class="fa fa-legal"></i> Términos y condiciones<br />
                    <i class="fa fa-envelope"></i> <a href="mailto:alistair.caller@gmail.com">Contacto</a>
                </div>
                <div class="right-footer">
                    Desarrollado con Github Pages<br /><br />
                    <img src="img/octocat-powered-h.png" alt="" id="image3" class="img-logo-footer" />
                    <img src="img/js-powered.svg" alt="" id="image3" class="img-logo-footer" />
                    <img src="img/html-powered.svg" alt="" id="image3" class="img-logo-footer" />
                    <br /><br />
                </div>
            </div>
        </div>

        <div class="up-arrow" id="up-arrow-img">
            <img src="img/pointing-up.png" class="up-arrow-img">
        </div>

        <div class="up-arrow" id="down-arrow-img">
            <img src="img/pointing-down.png" class="up-arrow-img">
        </div>

</body>
<script type="text/javascript" src="haka.js"></script>

</html>